import{$ as dt,$b as as,Aa as pe,Ab as ae,B as Gp,Ba as Ml,Bb as ge,C as Kp,Ca as ng,Cb as Ul,D as oe,Da as is,Db as jl,E as Cl,Ea as ig,F as ki,Fa as Xe,Fb as Bl,G as Pi,Ga as Kn,H as $o,Ha as rs,Hb as bg,Hc as xg,I as Rl,Ia as Ni,Ib as Tn,Ic as Dg,J as fe,Ja as Mi,Jb as te,Jc as Wl,K as Yp,Ka as rg,Kb as Ko,Kc as kg,La as sg,Lb as Bi,Lc as Pg,M as xl,Ma as og,N as qo,Na as ag,O as In,Oa as cg,Oc as Og,P as Dl,Pa as lg,Pc as Gl,Q as Qp,Qa as ug,R as Xp,Ra as Ze,Rb as Pe,Rc as Xo,Sa as Ll,Sc as Zo,T as Ho,Tb as An,U as ts,Ua as dg,Uc as Kl,V as me,Vb as tn,W as Ye,X as At,Xa as ss,Y as It,Ya as Et,Za as rt,_ as V,_a as Go,a as yn,aa as Zp,ac as _g,b as $p,ba as tt,bb as Li,bc as Yo,c as Gn,ca as kl,cb as hg,cc as vg,d as yl,da as R,db as fg,dc as zl,e as wl,ea as L,ec as $l,f as X,fa as Qt,fb as H,fc as en,g as Mt,ga as Jp,gb as mg,gc as Qo,ha as es,hb as Fi,hc as cs,i as qp,ia as gt,ib as Fl,ic as yg,j as Hp,ja as Qe,jb as os,jc as be,k as wn,ka as ht,kb as Je,l as Bo,la as Xt,lb as pg,lc as wg,ma as Ee,mb as Vl,mc as Ig,n as Il,na as tg,nb as gg,nc as ql,o as El,oa as ns,ob as Vi,oc as Eg,p as re,pa as En,pb as Te,pc as Tg,q as B,qa as Oi,qb as $t,qc as Q,r as Jr,ra as Pl,rb as Ui,rc as Ag,s as Tl,sa as Ol,sb as ji,sc as ls,t as Wp,tc as Sg,u as ot,ub as Ae,uc as Cg,v as Di,va as Wo,vc as Yn,w as se,wa as eg,wc as Rg,x as Al,xa as Lt,y as zo,ya as Nl,z as Sl,za as xt,zb as Zt,zc as Hl}from"./chunk-JPNHJXW6.js";import{a as O,b as ut,i as vn,j as y}from"./chunk-SO6VPFYA.js";var Xl=class extends Tg{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Zl=class i extends Xl{static makeCurrent(){Eg(new i)}onAndCancel(t,e,n){return t.addEventListener(e,n),()=>{t.removeEventListener(e,n)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=gI();return e==null?null:bI(e)}resetBaseElement(){us=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Rg(document.cookie,t)}},us=null;function gI(){return us=us||document.querySelector("base"),us?us.getAttribute("href"):null}function bI(i){return new URL(i,document.baseURI).pathname}var _I=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:t.\u0275fac});let i=t;return i})(),Jl=new tt(""),Fg=(()=>{let t=class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(s=>{s.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,s){return this._findPluginFor(r).addEventListener(n,r,s)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new It(5101,!1);return this._eventNameToPlugin.set(n,r),r}};t.\u0275fac=function(r){return new(r||t)(R(Jl),R(H))},t.\u0275prov=V({token:t,factory:t.\u0275fac});let i=t;return i})(),Jo=class{constructor(t){this._doc=t}},Yl="ng-app-id",Vg=(()=>{let t=class t{constructor(n,r,s,o={}){this.doc=n,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Wl(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(s=>s.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Yl}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(n,r){let s=this.styleRef;if(s.has(n)){let o=s.get(n);return o.usage+=r,o.usage}return s.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===n)return s.delete(r),o.removeAttribute(Yl),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(Yl,this.appId),n.appendChild(c),c}}addStyleToHost(n,r){let s=this.getStyleElement(n,r),o=this.styleRef,c=o.get(r)?.elements;c?c.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}};t.\u0275fac=function(r){return new(r||t)(R(Q),R(is),R(rs,8),R(Xe))},t.\u0275prov=V({token:t,factory:t.\u0275fac});let i=t;return i})(),Ql={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},eu=/%COMP%/g,Ug="%COMP%",vI=`_nghost-${Ug}`,yI=`_ngcontent-${Ug}`,wI=!0,II=new tt("",{providedIn:"root",factory:()=>wI});function EI(i){return yI.replace(eu,i)}function TI(i){return vI.replace(eu,i)}function jg(i,t){return t.map(e=>e.replace(eu,i))}var Ng=(()=>{let t=class t{constructor(n,r,s,o,c,l,d,f=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=l,this.ngZone=d,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Wl(l),this.defaultRenderer=new ds(n,c,d,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===es.ShadowDom&&(r=ut(O({},r),{encapsulation:es.Emulated}));let s=this.getOrCreateRenderer(n,r);return s instanceof ta?s.applyToHost(n):s instanceof hs&&s.applyStyles(),s}getOrCreateRenderer(n,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let c=this.doc,l=this.ngZone,d=this.eventManager,f=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,v=this.platformIsServer;switch(r.encapsulation){case es.Emulated:o=new ta(d,f,r,this.appId,p,c,l,v);break;case es.ShadowDom:return new tu(d,f,n,r,c,l,this.nonce,v);default:o=new hs(d,f,r,p,c,l,v);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(r){return new(r||t)(R(Fg),R(Vg),R(is),R(II),R(Q),R(Xe),R(H),R(rs))},t.\u0275prov=V({token:t,factory:t.\u0275fac});let i=t;return i})(),ds=class{constructor(t,e,n,r){this.eventManager=t,this.doc=e,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(Ql[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Mg(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(Mg(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new It(-5104,!1);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;let s=Ql[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){let r=Ql[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(ss.DashCase|ss.Important)?t.style.setProperty(e,n,r&ss.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&ss.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t!=null&&(t[e]=n)}setValue(t,e){t.nodeValue=e}listen(t,e,n){if(typeof t=="string"&&(t=ql().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(n))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function Mg(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var tu=class extends ds{constructor(t,e,n,r,s,o,c,l){super(t,s,o,l),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=jg(r.id,r.styles);for(let f of d){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=f,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},hs=class extends ds{constructor(t,e,n,r,s,o,c,l){super(t,s,o,c),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?jg(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ta=class extends hs{constructor(t,e,n,r,s,o,c,l){let d=r+"-"+n.id;super(t,e,n,s,o,c,l,d),this.contentAttr=EI(d),this.hostAttr=TI(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}},AI=(()=>{let t=class t extends Jo{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,s){return n.addEventListener(r,s,!1),()=>this.removeEventListener(n,r,s)}removeEventListener(n,r,s){return n.removeEventListener(r,s)}};t.\u0275fac=function(r){return new(r||t)(R(Q))},t.\u0275prov=V({token:t,factory:t.\u0275fac});let i=t;return i})(),Lg=["alt","control","meta","shift"],SI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},CI={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},RI=(()=>{let t=class t extends Jo{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,s){let o=t.parseEventName(r),c=t.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ql().onAndCancel(n,o.domEventName,c))}static parseEventName(n){let r=n.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=t._normalizeKey(r.pop()),c="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),c="code."),Lg.forEach(f=>{let p=r.indexOf(f);p>-1&&(r.splice(p,1),c+=f+".")}),c+=o,r.length!=0||o.length===0)return null;let d={};return d.domEventName=s,d.fullKey=c,d}static matchEventFullKeyCode(n,r){let s=SI[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(s=n.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Lg.forEach(c=>{if(c!==s){let l=CI[c];l(n)&&(o+=c+".")}}),o+=s,o===r)}static eventCallback(n,r,s){return o=>{t.matchEventFullKeyCode(o,n)&&s.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}};t.\u0275fac=function(r){return new(r||t)(R(Q))},t.\u0275prov=V({token:t,factory:t.\u0275fac});let i=t;return i})();function jk(i,t){return yg(O({rootComponent:i},xI(t)))}function xI(i){return{appProviders:[...NI,...i?.providers??[]],platformProviders:OI}}function DI(){Zl.makeCurrent()}function kI(){return new Nl}function PI(){return ng(document),document}var OI=[{provide:Xe,useValue:xg},{provide:ig,useValue:DI,multi:!0},{provide:Q,useFactory:PI,deps:[]}];var NI=[{provide:tg,useValue:"root"},{provide:Nl,useFactory:kI,deps:[]},{provide:Jl,useClass:AI,multi:!0,deps:[Q,H,Xe]},{provide:Jl,useClass:RI,multi:!0,deps:[Q]},Ng,Vg,Fg,{provide:hg,useExisting:Ng},{provide:Pg,useClass:_I,deps:[]},[]];var Bg=(()=>{let t=class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}};t.\u0275fac=function(r){return new(r||t)(R(Q))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var nu=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:function(r){let s=null;return r?s=new(r||t):s=R(MI),s},providedIn:"root"});let i=t;return i})(),MI=(()=>{let t=class t extends nu{constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case Ze.NONE:return r;case Ze.HTML:return Mi(r,"HTML")?Ni(r):ug(this._doc,String(r)).toString();case Ze.STYLE:return Mi(r,"Style")?Ni(r):r;case Ze.SCRIPT:if(Mi(r,"Script"))return Ni(r);throw new It(5200,!1);case Ze.URL:return Mi(r,"URL")?Ni(r):lg(String(r));case Ze.RESOURCE_URL:if(Mi(r,"ResourceURL"))return Ni(r);throw new It(5201,!1);default:throw new It(5202,!1)}}bypassSecurityTrustHtml(n){return rg(n)}bypassSecurityTrustStyle(n){return sg(n)}bypassSecurityTrustScript(n){return og(n)}bypassSecurityTrustUrl(n){return ag(n)}bypassSecurityTrustResourceUrl(n){return cg(n)}};t.\u0275fac=function(r){return new(r||t)(R(Q))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var K="primary",Rs=Symbol("RouteTitle"),au=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Wi(i){return new au(i)}function FI(i,t,e){let n=e.path.split("/");if(n.length>i.length||e.pathMatch==="full"&&(t.hasChildren()||n.length<i.length))return null;let r={};for(let s=0;s<n.length;s++){let o=n[s],c=i[s];if(o.startsWith(":"))r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function VI(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!Oe(i[e],t[e]))return!1;return!0}function Oe(i,t){let e=i?cu(i):void 0,n=t?cu(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!Jg(i[r],t[r]))return!1;return!0}function cu(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function Jg(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;let e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}else return i===t}function tb(i){return i.length>0?i[i.length-1]:null}function Dn(i){return Tl(i)?i:vg(i)?re(Promise.resolve(i)):B(i)}var UI={exact:nb,subset:ib},eb={exact:jI,subset:BI,ignored:()=>!0};function $g(i,t,e){return UI[e.paths](i.root,t.root,e.matrixParams)&&eb[e.queryParams](i.queryParams,t.queryParams)&&!(e.fragment==="exact"&&i.fragment!==t.fragment)}function jI(i,t){return Oe(i,t)}function nb(i,t,e){if(!Xn(i.segments,t.segments)||!ia(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(let n in t.children)if(!i.children[n]||!nb(i.children[n],t.children[n],e))return!1;return!0}function BI(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>Jg(i[e],t[e]))}function ib(i,t,e){return rb(i,t,t.segments,e)}function rb(i,t,e,n){if(i.segments.length>e.length){let r=i.segments.slice(0,e.length);return!(!Xn(r,e)||t.hasChildren()||!ia(r,e,n))}else if(i.segments.length===e.length){if(!Xn(i.segments,e)||!ia(i.segments,e,n))return!1;for(let r in t.children)if(!i.children[r]||!ib(i.children[r],t.children[r],n))return!1;return!0}else{let r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!Xn(i.segments,r)||!ia(i.segments,r,n)||!i.children[K]?!1:rb(i.children[K],t,s,n)}}function ia(i,t,e){return t.every((n,r)=>eb[e](i[r].parameters,n.parameters))}var Sn=class{constructor(t=new at([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=Wi(this.queryParams),this._queryParamMap}toString(){return qI.serialize(this)}},at=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ra(this)}},Qn=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Wi(this.parameters),this._parameterMap}toString(){return ob(this)}};function zI(i,t){return Xn(i,t)&&i.every((e,n)=>Oe(e.parameters,t[n].parameters))}function Xn(i,t){return i.length!==t.length?!1:i.every((e,n)=>e.path===t[n].path)}function $I(i,t){let e=[];return Object.entries(i.children).forEach(([n,r])=>{n===K&&(e=e.concat(t(r,n)))}),Object.entries(i.children).forEach(([n,r])=>{n!==K&&(e=e.concat(t(r,n)))}),e}var xs=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:()=>new vs,providedIn:"root"});let i=t;return i})(),vs=class{parse(t){let e=new uu(t);return new Sn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${fs(t.root,!0)}`,n=GI(t.queryParams),r=typeof t.fragment=="string"?`#${HI(t.fragment)}`:"";return`${e}${n}${r}`}},qI=new vs;function ra(i){return i.segments.map(t=>ob(t)).join("/")}function fs(i,t){if(!i.hasChildren())return ra(i);if(t){let e=i.children[K]?fs(i.children[K],!1):"",n=[];return Object.entries(i.children).forEach(([r,s])=>{r!==K&&n.push(`${r}:${fs(s,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}else{let e=$I(i,(n,r)=>r===K?[fs(i.children[K],!1)]:[`${r}:${fs(n,!1)}`]);return Object.keys(i.children).length===1&&i.children[K]!=null?`${ra(i)}/${e[0]}`:`${ra(i)}/(${e.join("//")})`}}function sb(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ea(i){return sb(i).replace(/%3B/gi,";")}function HI(i){return encodeURI(i)}function lu(i){return sb(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sa(i){return decodeURIComponent(i)}function qg(i){return sa(i.replace(/\+/g,"%20"))}function ob(i){return`${lu(i.path)}${WI(i.parameters)}`}function WI(i){return Object.entries(i).map(([t,e])=>`;${lu(t)}=${lu(e)}`).join("")}function GI(i){let t=Object.entries(i).map(([e,n])=>Array.isArray(n)?n.map(r=>`${ea(e)}=${ea(r)}`).join("&"):`${ea(e)}=${ea(n)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var KI=/^[^\/()?;#]+/;function iu(i){let t=i.match(KI);return t?t[0]:""}var YI=/^[^\/()?;=#]+/;function QI(i){let t=i.match(YI);return t?t[0]:""}var XI=/^[^=?&#]+/;function ZI(i){let t=i.match(XI);return t?t[0]:""}var JI=/^[^&#]+/;function t0(i){let t=i.match(JI);return t?t[0]:""}var uu=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new at([],{}):new at([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[K]=new at(t,e)),n}parseSegment(){let t=iu(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new It(4009,!1);return this.capture(t),new Qn(sa(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=QI(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let r=iu(this.remaining);r&&(n=r,this.capture(n))}t[sa(e)]=sa(n)}parseQueryParam(t){let e=ZI(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let o=t0(this.remaining);o&&(n=o,this.capture(n))}let r=qg(e),s=qg(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=iu(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new It(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=K);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[K]:new at([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new It(4011,!1)}};function ab(i){return i.segments.length>0?new at([],{[K]:i}):i}function cb(i){let t={};for(let[n,r]of Object.entries(i.children)){let s=cb(r);if(n===K&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))t[o]=c;else(s.segments.length>0||s.hasChildren())&&(t[n]=s)}let e=new at(i.segments,t);return e0(e)}function e0(i){if(i.numberOfChildren===1&&i.children[K]){let t=i.children[K];return new at(i.segments.concat(t.segments),t.children)}return i}function Gi(i){return i instanceof Sn}function n0(i,t,e=null,n=null){let r=lb(i);return ub(r,t,e,n)}function lb(i){let t;function e(s){let o={};for(let l of s.children){let d=e(l);o[l.outlet]=d}let c=new at(s.url,o);return s===i&&(t=c),c}let n=e(i.root),r=ab(n);return t??r}function ub(i,t,e,n){let r=i;for(;r.parent;)r=r.parent;if(t.length===0)return ru(r,r,r,e,n);let s=i0(t);if(s.toRoot())return ru(r,r,new at([],{}),e,n);let o=r0(s,r,i),c=o.processChildren?gs(o.segmentGroup,o.index,s.commands):hb(o.segmentGroup,o.index,s.commands);return ru(r,o.segmentGroup,c,e,n)}function oa(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function ys(i){return typeof i=="object"&&i!=null&&i.outlets}function ru(i,t,e,n,r){let s={};n&&Object.entries(n).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let o;i===t?o=e:o=db(i,t,e);let c=ab(cb(o));return new Sn(c,s,r)}function db(i,t,e){let n={};return Object.entries(i.children).forEach(([r,s])=>{s===t?n[r]=e:n[r]=db(s,t,e)}),new at(i.segments,n)}var aa=class{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&oa(n[0]))throw new It(4003,!1);let r=n.find(ys);if(r&&r!==tb(n))throw new It(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function i0(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new aa(!0,0,i);let t=0,e=!1,n=i.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?e=!0:c===".."?t++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new aa(e,t,n)}var qi=class{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}};function r0(i,t,e){if(i.isAbsolute)return new qi(t,!0,0);if(!e)return new qi(t,!1,NaN);if(e.parent===null)return new qi(e,!0,0);let n=oa(i.commands[0])?0:1,r=e.segments.length-1+n;return s0(e,r,i.numberOfDoubleDots)}function s0(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new It(4005,!1);r=n.segments.length}return new qi(n,!1,r-s)}function o0(i){return ys(i[0])?i[0].outlets:{[K]:i}}function hb(i,t,e){if(i??=new at([],{}),i.segments.length===0&&i.hasChildren())return gs(i,t,e);let n=a0(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){let s=new at(i.segments.slice(0,n.pathIndex),{});return s.children[K]=new at(i.segments.slice(n.pathIndex),i.children),gs(s,0,r)}else return n.match&&r.length===0?new at(i.segments,{}):n.match&&!i.hasChildren()?du(i,t,e):n.match?gs(i,0,r):du(i,t,e)}function gs(i,t,e){if(e.length===0)return new at(i.segments,{});{let n=o0(e),r={};if(Object.keys(n).some(s=>s!==K)&&i.children[K]&&i.numberOfChildren===1&&i.children[K].segments.length===0){let s=gs(i.children[K],t,e);return new at(i.segments,s.children)}return Object.entries(n).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=hb(i.children[s],t,o))}),Object.entries(i.children).forEach(([s,o])=>{n[s]===void 0&&(r[s]=o)}),new at(i.segments,r)}}function a0(i,t,e){let n=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;let o=i.segments[r],c=e[n];if(ys(c))break;let l=`${c}`,d=n<e.length-1?e[n+1]:null;if(r>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!Wg(l,d,o))return s;n+=2}else{if(!Wg(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function du(i,t,e){let n=i.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(ys(s)){let l=c0(s.outlets);return new at(n,l)}if(r===0&&oa(e[0])){let l=i.segments[t];n.push(new Qn(l.path,Hg(e[0]))),r++;continue}let o=ys(s)?s.outlets[K]:`${s}`,c=r<e.length-1?e[r+1]:null;o&&c&&oa(c)?(n.push(new Qn(o,Hg(c))),r+=2):(n.push(new Qn(o,{})),r++)}return new at(n,{})}function c0(i){let t={};return Object.entries(i).forEach(([e,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(t[e]=du(new at([],{}),0,n))}),t}function Hg(i){let t={};return Object.entries(i).forEach(([e,n])=>t[e]=`${n}`),t}function Wg(i,t,e){return i==e.path&&Oe(t,e.parameters)}var bs="imperative",Pt=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(Pt||{}),_e=class{constructor(t,e){this.id=t,this.url=e}},Ki=class extends _e{constructor(t,e,n="imperative",r=null){super(t,e),this.type=Pt.NavigationStart,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ne=class extends _e{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=Pt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},le=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(le||{}),ca=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(ca||{}),Cn=class extends _e{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=Pt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Rn=class extends _e{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=Pt.NavigationSkipped}},ws=class extends _e{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=Pt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},la=class extends _e{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Pt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hu=class extends _e{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Pt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fu=class extends _e{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=Pt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},mu=class extends _e{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Pt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pu=class extends _e{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Pt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gu=class{constructor(t){this.route=t,this.type=Pt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},bu=class{constructor(t){this.route=t,this.type=Pt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},_u=class{constructor(t){this.snapshot=t,this.type=Pt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vu=class{constructor(t){this.snapshot=t,this.type=Pt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yu=class{constructor(t){this.snapshot=t,this.type=Pt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wu=class{constructor(t){this.snapshot=t,this.type=Pt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ua=class{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=Pt.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Is=class{},Es=class{constructor(t){this.url=t}};var Iu=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ds,this.attachRef=null}},Ds=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){let s=this.getOrCreateContext(n);s.outlet=r,this.contexts.set(n,s)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Iu,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),da=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Eu(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){let e=Eu(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Tu(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Tu(t,this._root).map(e=>e.value)}};function Eu(i,t){if(i===t.value)return t;for(let e of t.children){let n=Eu(i,e);if(n)return n}return null}function Tu(i,t){if(i===t.value)return[t];for(let e of t.children){let n=Tu(i,e);if(n.length)return n.unshift(t),n}return[]}var ce=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function $i(i){let t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}var ha=class extends da{constructor(t,e){super(t),this.snapshot=e,Nu(this,t)}toString(){return this.snapshot.toString()}};function fb(i){let t=l0(i),e=new Mt([new Qn("",{})]),n=new Mt({}),r=new Mt({}),s=new Mt({}),o=new Mt(""),c=new xn(e,n,s,o,r,K,i,t.root);return c.snapshot=t.root,new ha(new ce(c,[]),t)}function l0(i){let t={},e={},n={},r="",s=new Ts([],t,n,r,e,K,i,null,{});return new fa("",new ce(s,[]))}var xn=class{constructor(t,e,n,r,s,o,c,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ot(d=>d[Rs]))??B(void 0),this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ot(t=>Wi(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ot(t=>Wi(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ou(i,t,e="emptyOnly"){let n,{routeConfig:r}=i;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?n={params:O(O({},t.params),i.params),data:O(O({},t.data),i.data),resolve:O(O(O(O({},i.data),t.data),r?.data),i._resolvedData)}:n={params:O({},i.params),data:O({},i.data),resolve:O(O({},i.data),i._resolvedData??{})},r&&pb(r)&&(n.resolve[Rs]=r.title),n}var Ts=class{get title(){return this.data?.[Rs]}constructor(t,e,n,r,s,o,c,l,d){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Wi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Wi(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(n=>n.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},fa=class extends da{constructor(t,e){super(e),this.url=t,Nu(this,e)}toString(){return mb(this._root)}};function Nu(i,t){t.value._routerState=i,t.children.forEach(e=>Nu(i,e))}function mb(i){let t=i.children.length>0?` { ${i.children.map(mb).join(", ")} } `:"";return`${i.value}${t}`}function su(i){if(i.snapshot){let t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,Oe(t.queryParams,e.queryParams)||i.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&i.fragmentSubject.next(e.fragment),Oe(t.params,e.params)||i.paramsSubject.next(e.params),VI(t.url,e.url)||i.urlSubject.next(e.url),Oe(t.data,e.data)||i.dataSubject.next(e.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function Au(i,t){let e=Oe(i.params,t.params)&&zI(i.url,t.url),n=!i.parent!=!t.parent;return e&&!n&&(!i.parent||Au(i.parent,t.parent))}function pb(i){return typeof i.title=="string"||i.title===null}var u0=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=K,this.activateEvents=new pe,this.deactivateEvents=new pe,this.attachEvents=new pe,this.detachEvents=new pe,this.parentContexts=L(Ds),this.location=L(Fi),this.changeDetector=L(cs),this.environmentInjector=L(ns),this.inputBinder=L(ba,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:s}=n.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new It(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new It(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new It(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new It(4013,!1);this._activatedRoute=n;let s=this.location,c=n.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new Su(n,l,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:d,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=Xt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Oi]});let i=t;return i})(),Su=class i{__ngOutletInjector(t){return new i(this.route,this.childContexts,t)}constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===xn?this.route:t===Ds?this.childContexts:this.parent.get(t,e)}},ba=new tt(""),Gg=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,s=Di([r.queryParams,r.params,r.data]).pipe(me(([o,c,l],d)=>(l=O(O(O({},o),c),l),d===0?B(l):Promise.resolve(l)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let c=Ig(r.component);if(!c){this.unsubscribeFromRouteData(n);return}for(let{templateName:l}of c.inputs)n.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(n,s)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:t.\u0275fac});let i=t;return i})();function d0(i,t,e){let n=As(i,t._root,e?e._root:void 0);return new ha(n,t)}function As(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){let n=e.value;n._futureSnapshot=t.value;let r=h0(i,t,e);return new ce(n,r)}else{if(i.shouldAttach(t.value)){let s=i.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(c=>As(i,c)),o}}let n=f0(t.value),r=t.children.map(s=>As(i,s));return new ce(n,r)}}function h0(i,t,e){return t.children.map(n=>{for(let r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return As(i,n,r);return As(i,n)})}function f0(i){return new xn(new Mt(i.url),new Mt(i.params),new Mt(i.queryParams),new Mt(i.fragment),new Mt(i.data),i.outlet,i.component,i)}var gb="ngNavigationCancelingError";function bb(i,t){let{redirectTo:e,navigationBehaviorOptions:n}=Gi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=_b(!1,le.Redirect);return r.url=e,r.navigationBehaviorOptions=n,r}function _b(i,t){let e=new Error(`NavigationCancelingError: ${i||""}`);return e[gb]=!0,e.cancellationCode=t,e}function m0(i){return vb(i)&&Gi(i.url)}function vb(i){return!!i&&i[gb]}var p0=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Qe({type:t,selectors:[["ng-component"]],standalone:!0,features:[tn],decls:1,vars:0,template:function(r,s){r&1&&ge(0,"router-outlet")},dependencies:[u0],encapsulation:2});let i=t;return i})();function g0(i,t){return i.providers&&!i._injector&&(i._injector=Vl(i.providers,t,`Route: ${i.path}`)),i._injector??t}function Mu(i){let t=i.children&&i.children.map(Mu),e=t?ut(O({},i),{children:t}):O({},i);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==K&&(e.component=p0),e}function Me(i){return i.outlet||K}function b0(i,t){let e=i.filter(n=>Me(n)===t);return e.push(...i.filter(n=>Me(n)!==t)),e}function ks(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var _0=(i,t,e,n)=>ot(r=>(new Cu(t,r.targetRouterState,r.currentRouterState,e,n).activate(i),r)),Cu=class{constructor(t,e,n,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),su(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){let r=$i(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=$i(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(n&&n.outlet){let o=n.outlet.detach(),c=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:c})}}deactivateRouteAndOutlet(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=$i(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,e,n){let r=$i(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new wu(s.value.snapshot))}),t.children.length&&this.forwardEvent(new vu(t.value.snapshot))}activateRoutes(t,e,n){let r=t.value,s=e?e.value:null;if(su(r),r===s)if(r.component){let o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){let o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),su(c.route.value),this.activateChildRoutes(t,null,o.children)}else{let c=ks(r.snapshot);o.attachRef=null,o.route=r,o.injector=c,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}},ma=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Hi=class{constructor(t,e){this.component=t,this.route=e}};function v0(i,t,e){let n=i._root,r=t?t._root:null;return ms(n,r,e,[n.value])}function y0(i){let t=i.routeConfig?i.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:i,guards:t}}function Qi(i,t){let e=Symbol(),n=t.get(i,e);return n===e?typeof i=="function"&&!Zp(i)?i:t.get(i):n}function ms(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=$i(t);return i.children.forEach(o=>{w0(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>_s(c,e.getContext(o),r)),r}function w0(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=i.value,o=t?t.value:null,c=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=I0(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new ma(n)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ms(i,t,c?c.children:null,n,r):ms(i,t,e,n,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new Hi(c.outlet.component,o))}else o&&_s(t,c,r),r.canActivateChecks.push(new ma(n)),s.component?ms(i,null,c?c.children:null,n,r):ms(i,null,e,n,r);return r}function I0(i,t,e){if(typeof e=="function")return e(i,t);switch(e){case"pathParamsChange":return!Xn(i.url,t.url);case"pathParamsOrQueryParamsChange":return!Xn(i.url,t.url)||!Oe(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Au(i,t)||!Oe(i.queryParams,t.queryParams);case"paramsChange":default:return!Au(i,t)}}function _s(i,t,e){let n=$i(i),r=i.value;Object.entries(n).forEach(([s,o])=>{r.component?t?_s(o,t.children.getContext(s),e):_s(o,null,e):_s(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Hi(t.outlet.component,r)):e.canDeactivateChecks.push(new Hi(null,r)):e.canDeactivateChecks.push(new Hi(null,r))}function Ps(i){return typeof i=="function"}function E0(i){return typeof i=="boolean"}function T0(i){return i&&Ps(i.canLoad)}function A0(i){return i&&Ps(i.canActivate)}function S0(i){return i&&Ps(i.canActivateChild)}function C0(i){return i&&Ps(i.canDeactivate)}function R0(i){return i&&Ps(i.canMatch)}function yb(i){return i instanceof Wp||i?.name==="EmptyError"}var na=Symbol("INITIAL_VALUE");function Yi(){return me(i=>Di(i.map(t=>t.pipe(fe(1),ts(na)))).pipe(ot(t=>{for(let e of t)if(e!==!0){if(e===na)return na;if(e===!1||e instanceof Sn)return e}return!0}),oe(t=>t!==na),fe(1)))}function x0(i,t){return se(e=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?B(ut(O({},e),{guardsResult:!0})):D0(o,n,r,i).pipe(se(c=>c&&E0(c)?k0(n,s,i,t):B(c)),ot(c=>ut(O({},e),{guardsResult:c})))})}function D0(i,t,e,n){return re(i).pipe(se(r=>L0(r.component,r.route,e,t,n)),In(r=>r!==!0,!0))}function k0(i,t,e,n){return re(t).pipe(Pi(r=>zo(O0(r.route.parent,n),P0(r.route,n),M0(i,r.path,e),N0(i,r.route,e))),In(r=>r!==!0,!0))}function P0(i,t){return i!==null&&t&&t(new yu(i)),B(!0)}function O0(i,t){return i!==null&&t&&t(new _u(i)),B(!0)}function N0(i,t,e){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return B(!0);let r=n.map(s=>Sl(()=>{let o=ks(t)??e,c=Qi(s,o),l=A0(c)?c.canActivate(t,i):En(o,()=>c(t,i));return Dn(l).pipe(In())}));return B(r).pipe(Yi())}function M0(i,t,e){let n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>y0(o)).filter(o=>o!==null).map(o=>Sl(()=>{let c=o.guards.map(l=>{let d=ks(o.node)??e,f=Qi(l,d),p=S0(f)?f.canActivateChild(n,i):En(d,()=>f(n,i));return Dn(p).pipe(In())});return B(c).pipe(Yi())}));return B(s).pipe(Yi())}function L0(i,t,e,n,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return B(!0);let o=s.map(c=>{let l=ks(t)??r,d=Qi(c,l),f=C0(d)?d.canDeactivate(i,t,e,n):En(l,()=>d(i,t,e,n));return Dn(f).pipe(In())});return B(o).pipe(Yi())}function F0(i,t,e,n){let r=t.canLoad;if(r===void 0||r.length===0)return B(!0);let s=r.map(o=>{let c=Qi(o,i),l=T0(c)?c.canLoad(t,e):En(i,()=>c(t,e));return Dn(l)});return B(s).pipe(Yi(),wb(n))}function wb(i){return $p(At(t=>{if(Gi(t))throw bb(i,t)}),ot(t=>t===!0))}function V0(i,t,e,n){let r=t.canMatch;if(!r||r.length===0)return B(!0);let s=r.map(o=>{let c=Qi(o,i),l=R0(c)?c.canMatch(t,e):En(i,()=>c(t,e));return Dn(l)});return B(s).pipe(Yi(),wb(n))}var Ss=class{constructor(t){this.segmentGroup=t||null}},pa=class extends Error{constructor(t){super(),this.urlTree=t}};function zi(i){return Jr(new Ss(i))}function U0(i){return Jr(new It(4e3,!1))}function j0(i){return Jr(_b(!1,le.GuardRejected))}var Ru=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return B(n);if(r.numberOfChildren>1||!r.children[K])return U0(t.redirectTo);r=r.children[K]}}applyRedirectCommands(t,e,n){let r=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n);if(e.startsWith("/"))throw new pa(r);return r}applyRedirectCreateUrlTree(t,e,n,r){let s=this.createSegmentGroup(t,e.root,n,r);return new Sn(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let n={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let c=s.substring(1);n[r]=e[c]}else n[r]=s}),n}createSegmentGroup(t,e,n,r){let s=this.createSegments(t,e.segments,n,r),o={};return Object.entries(e.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(t,l,n,r)}),new at(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){let r=n[e.path.substring(1)];if(!r)throw new It(4001,!1);return r}findOrReturn(t,e){let n=0;for(let r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}},xu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function B0(i,t,e,n,r){let s=Lu(i,t,e);return s.matched?(n=g0(t,n),V0(n,t,e,r).pipe(ot(o=>o===!0?s:O({},xu)))):B(s)}function Lu(i,t,e){if(t.path==="**")return z0(e);if(t.path==="")return t.pathMatch==="full"&&(i.hasChildren()||e.length>0)?O({},xu):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||FI)(e,i,t);if(!r)return O({},xu);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=r.consumed.length>0?O(O({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function z0(i){return{matched:!0,parameters:i.length>0?tb(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function Kg(i,t,e,n){return e.length>0&&H0(i,e,n)?{segmentGroup:new at(t,q0(n,new at(e,i.children))),slicedSegments:[]}:e.length===0&&W0(i,e,n)?{segmentGroup:new at(i.segments,$0(i,e,n,i.children)),slicedSegments:e}:{segmentGroup:new at(i.segments,i.children),slicedSegments:e}}function $0(i,t,e,n){let r={};for(let s of e)if(_a(i,t,s)&&!n[Me(s)]){let o=new at([],{});r[Me(s)]=o}return O(O({},n),r)}function q0(i,t){let e={};e[K]=t;for(let n of i)if(n.path===""&&Me(n)!==K){let r=new at([],{});e[Me(n)]=r}return e}function H0(i,t,e){return e.some(n=>_a(i,t,n)&&Me(n)!==K)}function W0(i,t,e){return e.some(n=>_a(i,t,n))}function _a(i,t,e){return(i.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function G0(i,t,e,n){return Me(i)!==n&&(n===K||!_a(t,e,i))?!1:Lu(t,i,e).matched}function K0(i,t,e){return t.length===0&&!i.children[e]}var Du=class{};function Y0(i,t,e,n,r,s,o="emptyOnly"){return new ku(i,t,e,n,r,o,s).recognize()}var Q0=31,ku=class{constructor(t,e,n,r,s,o,c){this.injector=t,this.configLoader=e,this.rootComponentType=n,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new Ru(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new It(4002,`'${t.segmentGroup}'`)}recognize(){let t=Kg(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ot(e=>{let n=new Ts([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,{},K,this.rootComponentType,null,{}),r=new ce(n,e),s=new fa("",r),o=n0(n,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,K).pipe(ki(n=>{if(n instanceof pa)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Ss?this.noMatchError(n):n}))}inheritParamsAndData(t,e){let n=t.value,r=Ou(n,e,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(s=>this.inheritParamsAndData(s,n))}processSegmentGroup(t,e,n,r){return n.segments.length===0&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,r,!0).pipe(ot(s=>s instanceof ce?[s]:[]))}processChildren(t,e,n){let r=[];for(let s of Object.keys(n.children))s==="primary"?r.unshift(s):r.push(s);return re(r).pipe(Pi(s=>{let o=n.children[s],c=b0(e,s);return this.processSegmentGroup(t,c,o,s)}),Xp((s,o)=>(s.push(...o),s)),Rl(null),Qp(),se(s=>{if(s===null)return zi(n);let o=Ib(s);return X0(o),B(o)}))}processSegment(t,e,n,r,s,o){return re(e).pipe(Pi(c=>this.processSegmentAgainstRoute(c._injector??t,e,c,n,r,s,o).pipe(ki(l=>{if(l instanceof Ss)return B(null);throw l}))),In(c=>!!c),ki(c=>{if(yb(c))return K0(n,r,s)?B(new Du):zi(n);throw c}))}processSegmentAgainstRoute(t,e,n,r,s,o,c){return G0(n,r,s,o)?n.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,n,s,o):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,n,s,o):zi(r):zi(r)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){let{matched:c,consumedSegments:l,positionalParamSegments:d,remainingSegments:f}=Lu(e,r,s);if(!c)return zi(e);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Q0&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,d);return this.applyRedirects.lineralizeSegments(r,p).pipe(se(v=>this.processSegment(t,n,e,v.concat(f),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){let o=B0(e,n,r,t,this.urlSerializer);return n.path==="**"&&(e.children={}),o.pipe(me(c=>c.matched?(t=n._injector??t,this.getChildConfig(t,n,r).pipe(me(({routes:l})=>{let d=n._loadedInjector??t,{consumedSegments:f,remainingSegments:p,parameters:v}=c,S=new Ts(f,v,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,J0(n),Me(n),n.component??n._loadedComponent??null,n,tE(n)),{segmentGroup:D,slicedSegments:P}=Kg(e,f,p,l);if(P.length===0&&D.hasChildren())return this.processChildren(d,l,D).pipe(ot($=>$===null?null:new ce(S,$)));if(l.length===0&&P.length===0)return B(new ce(S,[]));let k=Me(n)===s;return this.processSegment(d,l,D,P,k?K:s,!0).pipe(ot($=>new ce(S,$ instanceof ce?[$]:[])))}))):zi(e)))}getChildConfig(t,e,n){return e.children?B({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?B({routes:e._loadedRoutes,injector:e._loadedInjector}):F0(t,e,n,this.urlSerializer).pipe(se(r=>r?this.configLoader.loadChildren(t,e).pipe(At(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):j0(e))):B({routes:[],injector:t})}};function X0(i){i.sort((t,e)=>t.value.outlet===K?-1:e.value.outlet===K?1:t.value.outlet.localeCompare(e.value.outlet))}function Z0(i){let t=i.value.routeConfig;return t&&t.path===""}function Ib(i){let t=[],e=new Set;for(let n of i){if(!Z0(n)){t.push(n);continue}let r=t.find(s=>n.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...n.children),e.add(r)):t.push(n)}for(let n of e){let r=Ib(n.children);t.push(new ce(n.value,r))}return t.filter(n=>!e.has(n))}function J0(i){return i.data||{}}function tE(i){return i.resolve||{}}function eE(i,t,e,n,r,s){return se(o=>Y0(i,t,e,n,o.extractedUrl,r,s).pipe(ot(({state:c,tree:l})=>ut(O({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function nE(i,t){return se(e=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return B(e);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let d of Eb(l))o.add(d);let c=0;return re(o).pipe(Pi(l=>s.has(l)?iE(l,n,i,t):(l.data=Ou(l,l.parent,i).resolve,B(void 0))),At(()=>c++),Dl(1),se(l=>c===o.size?B(e):wn))})}function Eb(i){let t=i.children.map(e=>Eb(e)).flat();return[i,...t]}function iE(i,t,e,n){let r=i.routeConfig,s=i._resolve;return r?.title!==void 0&&!pb(r)&&(s[Rs]=r.title),rE(s,i,t,n).pipe(ot(o=>(i._resolvedData=o,i.data=Ou(i,i.parent,e).resolve,null)))}function rE(i,t,e,n){let r=cu(i);if(r.length===0)return B({});let s={};return re(r).pipe(se(o=>sE(i[o],t,e,n).pipe(In(),At(c=>{s[o]=c}))),Dl(1),Yp(s),ki(o=>yb(o)?wn:Jr(o)))}function sE(i,t,e,n){let r=ks(t)??n,s=Qi(i,r),o=s.resolve?s.resolve(t,e):En(r,()=>s(t,e));return Dn(o)}function ou(i){return me(t=>{let e=i(t);return e?re(e).pipe(ot(()=>t)):B(t)})}var Tb=(()=>{let t=class t{buildTitle(n){let r,s=n.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===K);return r}getResolvedTitleForRoute(n){return n.data[Rs]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:()=>L(oE),providedIn:"root"});let i=t;return i})(),oE=(()=>{let t=class t extends Tb{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}};t.\u0275fac=function(r){return new(r||t)(R(Bg))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),Os=new tt("",{providedIn:"root",factory:()=>({})}),Cs=new tt(""),Fu=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(Qo)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return B(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Dn(n.loadComponent()).pipe(ot(Ab),At(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),qo(()=>{this.componentLoaders.delete(n)})),s=new wl(r,()=>new X).pipe(yl());return this.componentLoaders.set(n,s),s}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return B({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=aE(r,this.compiler,n,this.onLoadEndListener).pipe(qo(()=>{this.childrenLoaders.delete(r)})),c=new wl(o,()=>new X).pipe(yl());return this.childrenLoaders.set(r,c),c}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function aE(i,t,e,n){return Dn(i.loadChildren()).pipe(ot(Ab),se(r=>r instanceof pg||Array.isArray(r)?B(r):re(t.compileModuleAsync(r))),ot(r=>{n&&n(i);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(e).injector,o=s.get(Cs,[],{optional:!0,self:!0}).flat()),{routes:o.map(Mu),injector:s}}))}function cE(i){return i&&typeof i=="object"&&"default"in i}function Ab(i){return cE(i)?i.default:i}var Vu=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:()=>L(lE),providedIn:"root"});let i=t;return i})(),lE=(()=>{let t=class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),Sb=new tt(""),Cb=new tt("");function uE(i,t,e){let n=i.get(Cb),r=i.get(Q);return i.get(H).runOutsideAngular(()=>{if(!r.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(d=>{s=d}),c=r.startViewTransition(()=>(s(),dE(i))),{onViewTransitionCreated:l}=n;return l&&En(i,()=>l({transition:c,from:t,to:e})),o})}function dE(i){return new Promise(t=>{mg(t,{injector:i})})}var Uu=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new X,this.transitionAbortSubject=new X,this.configLoader=L(Fu),this.environmentInjector=L(ns),this.urlSerializer=L(xs),this.rootContexts=L(Ds),this.location=L(Yn),this.inputBindingEnabled=L(ba,{optional:!0})!==null,this.titleStrategy=L(Tb),this.options=L(Os,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(Vu),this.createViewTransition=L(Sb,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>B(void 0),this.rootComponentType=null;let n=s=>this.events.next(new gu(s)),r=s=>this.events.next(new bu(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ut(O(O({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,s){return this.transitions=new Mt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:bs,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(oe(o=>o.id!==0),ot(o=>ut(O({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),me(o=>{let c=!1,l=!1;return B(o).pipe(me(d=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",le.SupersededByNewNavigation),wn;this.currentTransition=o,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?ut(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=d.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!f&&p!=="reload"){let v="";return this.events.next(new Rn(d.id,this.urlSerializer.serialize(d.rawUrl),v,ca.IgnoredSameUrlNavigation)),d.resolve(null),wn}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return B(d).pipe(me(v=>{let S=this.transitions?.getValue();return this.events.next(new Ki(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),S!==this.transitions?.getValue()?wn:Promise.resolve(v)}),eE(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),At(v=>{o.targetSnapshot=v.targetSnapshot,o.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation=ut(O({},this.currentNavigation),{finalUrl:v.urlAfterRedirects});let S=new la(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(S)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:v,extractedUrl:S,source:D,restoredState:P,extras:k}=d,$=new Ki(v,this.urlSerializer.serialize(S),D,P);this.events.next($);let Y=fb(this.rootComponentType).snapshot;return this.currentTransition=o=ut(O({},d),{targetSnapshot:Y,urlAfterRedirects:S,extras:ut(O({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=S,B(o)}else{let v="";return this.events.next(new Rn(d.id,this.urlSerializer.serialize(d.extractedUrl),v,ca.IgnoredByUrlHandlingStrategy)),d.resolve(null),wn}}),At(d=>{let f=new hu(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),ot(d=>(this.currentTransition=o=ut(O({},d),{guards:v0(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),o)),x0(this.environmentInjector,d=>this.events.next(d)),At(d=>{if(o.guardsResult=d.guardsResult,Gi(d.guardsResult))throw bb(this.urlSerializer,d.guardsResult);let f=new fu(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(f)}),oe(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",le.GuardRejected),!1)),ou(d=>{if(d.guards.canActivateChecks.length)return B(d).pipe(At(f=>{let p=new mu(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}),me(f=>{let p=!1;return B(f).pipe(nE(this.paramsInheritanceStrategy,this.environmentInjector),At({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(f,"",le.NoDataFromResolver)}}))}),At(f=>{let p=new pu(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}))}),ou(d=>{let f=p=>{let v=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(p.routeConfig).pipe(At(S=>{p.component=S}),ot(()=>{})));for(let S of p.children)v.push(...f(S));return v};return Di(f(d.targetSnapshot.root)).pipe(Rl(null),fe(1))}),ou(()=>this.afterPreactivation()),me(()=>{let{currentSnapshot:d,targetSnapshot:f}=o,p=this.createViewTransition?.(this.environmentInjector,d.root,f.root);return p?re(p).pipe(ot(()=>o)):B(o)}),ot(d=>{let f=d0(n.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=o=ut(O({},d),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),At(()=>{this.events.next(new Is)}),_0(this.rootContexts,n.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),fe(1),At({next:d=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ne(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{c=!0}}),Ye(this.transitionAbortSubject.pipe(At(d=>{throw d}))),qo(()=>{!c&&!l&&this.cancelNavigationTransition(o,"",le.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ki(d=>{if(l=!0,vb(d))this.events.next(new Cn(o.id,this.urlSerializer.serialize(o.extractedUrl),d.message,d.cancellationCode)),m0(d)?this.events.next(new Es(d.url)):o.resolve(!1);else{this.events.next(new ws(o.id,this.urlSerializer.serialize(o.extractedUrl),d,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(d))}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return wn}))}))}cancelNavigationTransition(n,r,s){let o=new Cn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,s);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function hE(i){return i!==bs}var fE=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:()=>L(mE),providedIn:"root"});let i=t;return i})(),Pu=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},mE=(()=>{let t=class t extends Pu{};t.\u0275fac=(()=>{let n;return function(s){return(n||(n=Wo(t)))(s||t)}})(),t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),Rb=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:()=>L(pE),providedIn:"root"});let i=t;return i})(),pE=(()=>{let t=class t extends Rb{constructor(){super(...arguments),this.location=L(Yn),this.urlSerializer=L(xs),this.options=L(Os,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(Vu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Sn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=fb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Ki)this.stateMemento=this.createStateMemento();else if(n instanceof Rn)this.rawUrlTree=r.initialUrl;else if(n instanceof la){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else n instanceof Is?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof Cn&&(n.code===le.GuardRejected||n.code===le.NoDataFromResolver)?this.restoreHistory(r):n instanceof ws?this.restoreHistory(r,!0):n instanceof Ne&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let s=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,c=O(O({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",c)}else{let o=O(O({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}};t.\u0275fac=(()=>{let n;return function(s){return(n||(n=Wo(t)))(s||t)}})(),t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),ps=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(ps||{});function xb(i,t){i.events.pipe(oe(e=>e instanceof Ne||e instanceof Cn||e instanceof ws||e instanceof Rn),ot(e=>e instanceof Ne||e instanceof Rn?ps.COMPLETE:(e instanceof Cn?e.code===le.Redirect||e.code===le.SupersededByNewNavigation:!1)?ps.REDIRECTING:ps.FAILED),oe(e=>e!==ps.REDIRECTING),fe(1)).subscribe(()=>{t()})}function gE(i){throw i}var bE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_E={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},nn=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=L(Yo),this.stateManager=L(Rb),this.options=L(Os,{optional:!0})||{},this.pendingTasks=L(gg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(Uu),this.urlSerializer=L(xs),this.location=L(Yn),this.urlHandlingStrategy=L(Vu),this._events=new X,this.errorHandler=this.options.errorHandler||gE,this.navigated=!1,this.routeReuseStrategy=L(fE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(Cs,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(ba,{optional:!0}),this.eventsSubscription=new yn,this.isNgZoneEnabled=L(H)instanceof H&&H.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Cn&&r.code!==le.Redirect&&r.code!==le.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ne)this.navigated=!0;else if(r instanceof Es){let c=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||hE(s.source)};this.scheduleNavigation(c,bs,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}yE(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),bs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,s){let o={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let d=O({},s);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(o.state=d)}let l=this.parseUrl(n);this.scheduleNavigation(l,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Mu),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:s,queryParams:o,fragment:c,queryParamsHandling:l,preserveFragment:d}=r,f=d?this.currentUrlTree.fragment:c,p=null;switch(l){case"merge":p=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let v;try{let S=s?s.snapshot:this.routerState.snapshot.root;v=lb(S)}catch{(typeof n[0]!="string"||!n[0].startsWith("/"))&&(n=[]),v=this.currentUrlTree.root}return ub(v,n,p,f??null)}navigateByUrl(n,r={skipLocationChange:!1}){let s=Gi(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,bs,null,r)}navigate(n,r={skipLocationChange:!1}){return vE(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let s;if(r===!0?s=O({},bE):r===!1?s=O({},_E):s=r,Gi(n))return $g(this.currentUrlTree,n,s);let o=this.parseUrl(n);return $g(this.currentUrlTree,o,s)}removeEmptyProps(n){return Object.entries(n).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(n,r,s,o,c){if(this.disposed)return Promise.resolve(!1);let l,d,f;c?(l=c.resolve,d=c.reject,f=c.promise):f=new Promise((v,S)=>{l=v,d=S});let p=this.pendingTasks.add();return xb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:l,reject:d,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(v=>Promise.reject(v))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function vE(i){for(let t=0;t<i.length;t++)if(i[t]==null)throw new It(4008,!1)}function yE(i){return!(i instanceof Is)&&!(i instanceof Es)}var oP=(()=>{let t=class t{constructor(n,r,s,o,c,l){this.router=n,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=c,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new X,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let d=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area",this.isAnchorElement?this.subscription=n.events.subscribe(f=>{f instanceof Ne&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n!=null?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,s,o,c){let l=this.urlTree;if(l===null||this.isAnchorElement&&(n!==0||r||s||o||c||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,d),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:dg(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,n,r):s.removeAttribute(o,n)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};t.\u0275fac=function(r){return new(r||t)(rt(nn),rt(xn),eg("tabindex"),rt(fg),rt(xt),rt(ls))},t.\u0275dir=Xt({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&Tn("click",function(c){return s.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),r&2&&Te("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[gt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",be],skipLocationChange:[gt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",be],replaceUrl:[gt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",be],routerLink:"routerLink"},standalone:!0,features:[Je,Oi]});let i=t;return i})();var ga=class{};var wE=(()=>{let t=class t{constructor(n,r,s,o,c){this.router=n,this.injector=s,this.preloadingStrategy=o,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(oe(n=>n instanceof Ne),Pi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let s=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Vl(o.providers,n,`Route: ${o.path}`));let c=o._injector??n,l=o._loadedInjector??c;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(c,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(l,o.children??o._loadedRoutes))}return re(s).pipe(Al())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(n,r):s=B(null);let o=s.pipe(se(c=>c===null?B(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??n,c.routes))));if(r.loadComponent&&!r._loadedComponent){let c=this.loader.loadComponent(r);return re([o,c]).pipe(Al())}else return o})}};t.\u0275fac=function(r){return new(r||t)(R(nn),R(Qo),R(ns),R(ga),R(Fu))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),Db=new tt(""),IE=(()=>{let t=class t{constructor(n,r,s,o,c={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration||="disabled",c.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Ki?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Ne?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Rn&&n.code===ca.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ua&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ua(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(r){Go()},t.\u0275prov=V({token:t,factory:t.\u0275fac});let i=t;return i})();function aP(i,...t){return Ee([{provide:Cs,multi:!0,useValue:i},[],{provide:xn,useFactory:kb,deps:[nn]},{provide:$l,multi:!0,useFactory:Pb},t.map(e=>e.\u0275providers)])}function kb(i){return i.routerState.root}function Ns(i,t){return{\u0275kind:i,\u0275providers:t}}function Pb(){let i=L(Lt);return t=>{let e=i.get(en);if(t!==e.components[0])return;let n=i.get(nn),r=i.get(Ob);i.get(ju)===1&&n.initialNavigation(),i.get(Nb,null,kl.Optional)?.setUpPreloading(),i.get(Db,null,kl.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Ob=new tt("",{factory:()=>new X}),ju=new tt("",{providedIn:"root",factory:()=>1});function EE(){return Ns(2,[{provide:ju,useValue:0},{provide:zl,multi:!0,deps:[Lt],useFactory:t=>{let e=t.get(Ag,Promise.resolve());return()=>e.then(()=>new Promise(n=>{let r=t.get(nn),s=t.get(Ob);xb(r,()=>{n(!0)}),t.get(Uu).afterPreactivation=()=>(n(!0),s.closed?B(void 0):s),r.initialNavigation()}))}}])}function TE(){return Ns(3,[{provide:zl,multi:!0,useFactory:()=>{let t=L(nn);return()=>{t.setUpLocationChangeListener()}}},{provide:ju,useValue:2}])}var Nb=new tt("");function AE(i){return Ns(0,[{provide:Nb,useExisting:wE},{provide:ga,useExisting:i}])}function SE(){return Ns(8,[Gg,{provide:ba,useExisting:Gg}])}function CE(i){let t=[{provide:Sb,useValue:uE},{provide:Cb,useValue:O({skipNextTransition:!!i?.skipInitialTransition},i)}];return Ns(9,t)}var Yg=new tt("ROUTER_FORROOT_GUARD"),RE=[Yn,{provide:xs,useClass:vs},nn,Ds,{provide:xn,useFactory:kb,deps:[nn]},Fu,[]],cP=(()=>{let t=class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[RE,[],{provide:Cs,multi:!0,useValue:n},{provide:Yg,useFactory:PE,deps:[[nn,new Qt,new Jp]]},{provide:Os,useValue:r||{}},r?.useHash?DE():kE(),xE(),r?.preloadingStrategy?AE(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?OE(r):[],r?.bindToComponentInputs?SE().\u0275providers:[],r?.enableViewTransitions?CE().\u0275providers:[],NE()]}}static forChild(n){return{ngModule:t,providers:[{provide:Cs,multi:!0,useValue:n}]}}};t.\u0275fac=function(r){return new(r||t)(R(Yg,8))},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({});let i=t;return i})();function xE(){return{provide:Db,useFactory:()=>{let i=L(kg),t=L(H),e=L(Os),n=L(Uu),r=L(xs);return e.scrollOffset&&i.setOffset(e.scrollOffset),new IE(r,n,i,t,e)}}}function DE(){return{provide:ls,useClass:Cg}}function kE(){return{provide:ls,useClass:Sg}}function PE(i){return"guarded"}function OE(i){return[i.initialNavigation==="disabled"?TE().\u0275providers:[],i.initialNavigation==="enabledBlocking"?EE().\u0275providers:[]]}var Qg=new tt("");function NE(){return[{provide:Qg,useFactory:Pb},{provide:$l,multi:!0,useExisting:Qg}]}var Mb=["toast-component",""];function ME(i,t){if(i&1){let e=Bl();Zt(0,"button",5),Tn("click",function(){Pl(e);let r=te();return Ol(r.remove())}),Zt(1,"span",6),Pe(2,"\xD7"),ae()()}}function LE(i,t){if(i&1&&(Ul(0),Pe(1),jl()),i&2){let e=te(2);Et(),An("[",e.duplicatesCount+1,"]")}}function FE(i,t){if(i&1&&(Zt(0,"div"),Pe(1),Vi(2,LE,2,1,"ng-container",4),ae()),i&2){let e=te();Ae(e.options.titleClass),Te("aria-label",e.title),Et(),An(" ",e.title," "),Et(),$t("ngIf",e.duplicatesCount)}}function VE(i,t){if(i&1&&ge(0,"div",7),i&2){let e=te();Ae(e.options.messageClass),$t("innerHTML",e.message,Ll)}}function UE(i,t){if(i&1&&(Zt(0,"div",8),Pe(1),ae()),i&2){let e=te();Ae(e.options.messageClass),Te("aria-label",e.message),Et(),An(" ",e.message," ")}}function jE(i,t){if(i&1&&(Zt(0,"div"),ge(1,"div",9),ae()),i&2){let e=te();Et(),Ui("width",e.width+"%")}}function BE(i,t){if(i&1){let e=Bl();Zt(0,"button",5),Tn("click",function(){Pl(e);let r=te();return Ol(r.remove())}),Zt(1,"span",6),Pe(2,"\xD7"),ae()()}}function zE(i,t){if(i&1&&(Ul(0),Pe(1),jl()),i&2){let e=te(2);Et(),An("[",e.duplicatesCount+1,"]")}}function $E(i,t){if(i&1&&(Zt(0,"div"),Pe(1),Vi(2,zE,2,1,"ng-container",4),ae()),i&2){let e=te();Ae(e.options.titleClass),Te("aria-label",e.title),Et(),An(" ",e.title," "),Et(),$t("ngIf",e.duplicatesCount)}}function qE(i,t){if(i&1&&ge(0,"div",7),i&2){let e=te();Ae(e.options.messageClass),$t("innerHTML",e.message,Ll)}}function HE(i,t){if(i&1&&(Zt(0,"div",8),Pe(1),ae()),i&2){let e=te();Ae(e.options.messageClass),Te("aria-label",e.message),Et(),An(" ",e.message," ")}}function WE(i,t){if(i&1&&(Zt(0,"div"),ge(1,"div",9),ae()),i&2){let e=te();Et(),Ui("width",e.width+"%")}}var Bu=class{_attachedHost;component;viewContainerRef;injector;constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){let t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},zu=class{_attachedPortal;_disposeFn;attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}},$u=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new X;_activate=new X;_manualClose=new X;_resetTimeout=new X;_countDuplicate=new X;constructor(t){this._overlayRef=t}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}},Xi=class{toastId;config;message;title;toastType;toastRef;_onTap=new X;_onAction=new X;constructor(t,e,n,r,s,o){this.toastId=t,this.config=e,this.message=n,this.title=r,this.toastType=s,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}},Lb={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},Fb=new tt("ToastConfig"),qu=class extends zu{_hostDomElement;_componentFactoryResolver;_appRef;constructor(t,e,n){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=n}attachComponentPortal(t,e){let n=this._componentFactoryResolver.resolveComponentFactory(t.component),r;return r=n.create(t.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(t){return t.hostView.rootNodes[0]}},GE=(()=>{class i{_document=L(Q);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}static \u0275fac=function(n){return new(n||i)};static \u0275prov=V({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Hu=class{_portalHost;constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}},KE=(()=>{class i{_overlayContainer=L(GE);_componentFactoryResolver=L(Li);_appRef=L(en);_document=L(Q);_paneElements=new Map;create(e,n){return this._createOverlayRef(this.getPaneElement(e,n))}getPaneElement(e="",n){return this._paneElements.get(n)||this._paneElements.set(n,{}),this._paneElements.get(n)[e]||(this._paneElements.get(n)[e]=this._createPaneElement(e,n)),this._paneElements.get(n)[e]}_createPaneElement(e,n){let r=this._document.createElement("div");return r.id="toast-container",r.classList.add(e),r.classList.add("toast-container"),n?n.getContainerElement().appendChild(r):this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalHost(e){return new qu(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new Hu(this._createPortalHost(e))}static \u0275fac=function(n){return new(n||i)};static \u0275prov=V({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Vb=(()=>{class i{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(e,n,r,s,o){this.overlay=n,this._injector=r,this.sanitizer=s,this.ngZone=o,this.toastrConfig=O(O({},e.default),e.config),e.config.iconClasses&&(this.toastrConfig.iconClasses=O(O({},e.default.iconClasses),e.config.iconClasses))}show(e,n,r={},s=""){return this._preBuildNotification(s,e,n,this.applyConfig(r))}success(e,n,r={}){let s=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(s,e,n,this.applyConfig(r))}error(e,n,r={}){let s=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(s,e,n,this.applyConfig(r))}info(e,n,r={}){let s=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(s,e,n,this.applyConfig(r))}warning(e,n,r={}){let s=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(s,e,n,this.applyConfig(r))}clear(e){for(let n of this.toasts)if(e!==void 0){if(n.toastId===e){n.toastRef.manualClose();return}}else n.toastRef.manualClose()}remove(e){let n=this._findToast(e);if(!n||(n.activeToast.toastRef.close(),this.toasts.splice(n.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let r=this.toasts[this.currentlyActive].toastRef;r.isInactive()||(this.currentlyActive=this.currentlyActive+1,r.activate())}return!0}findDuplicate(e="",n="",r,s){let{includeTitleDuplicates:o}=this.toastrConfig;for(let c of this.toasts){let l=o&&c.title===e;if((!o||l)&&c.message===n)return c.toastRef.onDuplicate(r,s),c}return null}applyConfig(e={}){return O(O({},this.toastrConfig),e)}_findToast(e){for(let n=0;n<this.toasts.length;n++)if(this.toasts[n].toastId===e)return{index:n,activeToast:this.toasts[n]};return null}_preBuildNotification(e,n,r,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,n,r,s)):this._buildNotification(e,n,r,s)}_buildNotification(e,n,r,s){if(!s.toastComponent)throw new Error("toastComponent required");let o=this.findDuplicate(r,n,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&r||n)&&this.toastrConfig.preventDuplicates&&o!==null)return o;this.previousToastMessage=n;let c=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(c=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let l=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let d=n;n&&s.enableHtml&&(d=this.sanitizer.sanitize(Ze.HTML,n));let f=new $u(l),p=new Xi(this.index,s,d,r,e,f),v=[{provide:Xi,useValue:p}],S=Lt.create({providers:v,parent:this._injector}),D=new Bu(s.toastComponent,S),P=l.attach(D,s.newestOnTop);f.componentInstance=P.instance;let k={toastId:this.index,title:r||"",message:n||"",toastRef:f,onShown:f.afterActivate(),onHidden:f.afterClosed(),onTap:p.onTap(),onAction:p.onAction(),portal:P};return c||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{k.toastRef.activate()})),this.toasts.push(k),k}static \u0275fac=function(n){return new(n||i)(R(Fb),R(KE),R(Lt),R(nu),R(H))};static \u0275prov=V({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),YE=(()=>{class i{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if(this.state.value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,n,r){this.toastrService=e,this.toastPackage=n,this.ngZone=r,this.message=n.message,this.title=n.title,this.options=n.config,this.originalTimeout=n.config.timeOut,this.toastClasses=`${n.toastType} ${n.config.toastClass}`,this.sub=n.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=n.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=n.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=n.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=ut(O({},this.state),{value:"active"}),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let e=new Date().getTime(),n=this.hideTime-e;this.width=n/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=ut(O({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state.value!=="removed"&&(clearTimeout(this.timeout),this.state=ut(O({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state.value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state.value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state.value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,n){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),n)):this.timeout=setTimeout(()=>e(),n)}outsideInterval(e,n){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),n)):this.intervalId=setInterval(()=>e(),n)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}static \u0275fac=function(n){return new(n||i)(rt(Vb),rt(Xi),rt(H))};static \u0275cmp=Qe({type:i,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(n,r){n&1&&Tn("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),n&2&&(bg("@flyInOut",r.state),Ae(r.toastClasses),Ui("display",r.displayStyle))},standalone:!0,features:[tn],attrs:Mb,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(n,r){n&1&&Vi(0,ME,3,0,"button",0)(1,FE,3,5,"div",1)(2,VE,1,3,"div",2)(3,UE,2,4,"div",3)(4,jE,2,2,"div",4),n&2&&($t("ngIf",r.options.closeButton),Et(),$t("ngIf",r.title),Et(),$t("ngIf",r.message&&r.options.enableHtml),Et(),$t("ngIf",r.message&&!r.options.enableHtml),Et(),$t("ngIf",r.options.progressBar))},dependencies:[Hl],encapsulation:2,data:{animation:[Og("flyInOut",[Zo("inactive",Xo({opacity:0})),Zo("active",Xo({opacity:1})),Zo("removed",Xo({opacity:0})),Kl("inactive => active",Gl("{{ easeTime }}ms {{ easing }}")),Kl("active => removed",Gl("{{ easeTime }}ms {{ easing }}"))])]}})}return i})(),QE=ut(O({},Lb),{toastComponent:YE}),XE=(i={})=>Ee([{provide:Fb,useValue:{default:QE,config:i}}]),IP=(()=>{class i{static forRoot(e={}){return{ngModule:i,providers:[XE(e)]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=ht({type:i});static \u0275inj=dt({})}return i})();var ZE=(()=>{class i{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";get displayStyle(){return this.state==="inactive"?"none":null}state="inactive";timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,n,r){this.toastrService=e,this.toastPackage=n,this.appRef=r,this.message=n.message,this.title=n.title,this.options=n.config,this.originalTimeout=n.config.timeOut,this.toastClasses=`${n.toastType} ${n.config.toastClass}`,this.sub=n.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=n.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=n.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=n.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let e=new Date().getTime(),n=this.hideTime-e;this.width=n/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state!=="removed"&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(n){return new(n||i)(rt(Vb),rt(Xi),rt(en))};static \u0275cmp=Qe({type:i,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(n,r){n&1&&Tn("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),n&2&&(Ae(r.toastClasses),Ui("display",r.displayStyle))},standalone:!0,features:[tn],attrs:Mb,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(n,r){n&1&&Vi(0,BE,3,0,"button",0)(1,$E,3,5,"div",1)(2,qE,1,3,"div",2)(3,HE,2,4,"div",3)(4,WE,2,2,"div",4),n&2&&($t("ngIf",r.options.closeButton),Et(),$t("ngIf",r.title),Et(),$t("ngIf",r.message&&r.options.enableHtml),Et(),$t("ngIf",r.message&&!r.options.enableHtml),Et(),$t("ngIf",r.options.progressBar))},dependencies:[Hl],encapsulation:2})}return i})(),EP=ut(O({},Lb),{toastComponent:ZE});var jb=function(i){let t=[],e=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},JE=function(i){let t=[],e=0,n=0;for(;e<i.length;){let r=i[e++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){let s=i[e++];t[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=i[e++],o=i[e++],c=i[e++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;t[n++]=String.fromCharCode(55296+(l>>10)),t[n++]=String.fromCharCode(56320+(l&1023))}else{let s=i[e++],o=i[e++];t[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Bb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){let s=i[r],o=r+1<i.length,c=o?i[r+1]:0,l=r+2<i.length,d=l?i[r+2]:0,f=s>>2,p=(s&3)<<4|c>>4,v=(c&15)<<2|d>>6,S=d&63;l||(S=64,o||(v=64)),n.push(e[f],e[p],e[v],e[S])}return n.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(jb(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):JE(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){let s=e[i.charAt(r++)],c=r<i.length?e[i.charAt(r)]:0;++r;let d=r<i.length?e[i.charAt(r)]:64;++r;let p=r<i.length?e[i.charAt(r)]:64;if(++r,s==null||c==null||d==null||p==null)throw new Gu;let v=s<<2|c>>4;if(n.push(v),d!==64){let S=c<<4&240|d>>2;if(n.push(S),p!==64){let D=d<<6&192|p;n.push(D)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},Gu=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},tT=function(i){let t=jb(i);return Bb.encodeByteArray(t,!0)},Ms=function(i){return tT(i).replace(/\./g,"")},Yu=function(i){try{return Bb.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function eT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var nT=()=>eT().__FIREBASE_DEFAULTS__,iT=()=>{if(typeof process>"u"||typeof process.env>"u")return;let i=process.env.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},rT=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=i&&Yu(i[1]);return t&&JSON.parse(t)},ya=()=>{try{return nT()||iT()||rT()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Qu=i=>{var t,e;return(e=(t=ya())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[i]},zb=i=>{let t=Qu(i);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},Xu=()=>{var i;return(i=ya())===null||i===void 0?void 0:i.config},Zu=i=>{var t;return(t=ya())===null||t===void 0?void 0:t[`_${i}`]};var va=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}};function $b(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},n=t||"demo-project",r=i.iat||0,s=i.sub||i.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Ms(JSON.stringify(e)),Ms(JSON.stringify(o)),""].join(".")}function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function sT(){var i;let t=(i=ya())===null||i===void 0?void 0:i.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Hb(){let i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Wb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Gb(){let i=Dt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Kb(){return!sT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ju(){try{return typeof indexedDB=="object"}catch{return!1}}function Yb(){return new Promise((i,t)=>{try{let e=!0,n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}var oT="FirebaseError",ue=class i extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=oT,Object.setPrototypeOf(this,i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rn.prototype.create)}},rn=class{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){let n=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?aT(s,n):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new ue(r,c,n)}};function aT(i,t){return i.replace(cT,(e,n)=>{let r=t[n];return r!=null?String(r):`<${n}?>`})}var cT=/\{\$([^}]+)}/g;function Qb(i){for(let t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function Zn(i,t){if(i===t)return!0;let e=Object.keys(i),n=Object.keys(t);for(let r of e){if(!n.includes(r))return!1;let s=i[r],o=t[r];if(Ub(s)&&Ub(o)){if(!Zn(s,o))return!1}else if(s!==o)return!1}for(let r of n)if(!e.includes(r))return!1;return!0}function Ub(i){return i!==null&&typeof i=="object"}function Zi(i){let t=[];for(let[e,n]of Object.entries(i))Array.isArray(n)?n.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Xb(i,t){let e=new Ku(i,t);return e.subscribe.bind(e)}var Ku=class{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,n){let r;if(t===void 0&&e===void 0&&n===void 0)throw new Error("Missing Observer.");lT(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:n},r.next===void 0&&(r.next=Wu),r.error===void 0&&(r.error=Wu),r.complete===void 0&&(r.complete=Wu);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function lT(i,t){if(typeof i!="object"||i===null)return!1;for(let e of t)if(e in i&&typeof i[e]=="function")return!0;return!1}function Wu(){}var SP=4*60*60*1e3;function Ft(i){return i&&i._delegate?i._delegate:i}var ve=class{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Jn="[DEFAULT]";var td=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let n=new va;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let n=this.normalizeInstanceIdentifier(t?.identifier),r=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(dT(t))try{this.getOrInitializeService({instanceIdentifier:Jn})}catch{}for(let[e,n]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(t=Jn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return y(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Jn){return this.instances.has(t)}getOptions(t=Jn){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);n===c&&o.resolve(r)}return r}onInit(t,e){var n;let r=this.normalizeInstanceIdentifier(e),s=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;s.add(t),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){let n=this.onInitCallbacks.get(e);if(n)for(let r of n)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:uT(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Jn){return this.component?this.component.multipleInstances?t:Jn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function uT(i){return i===Jn?void 0:i}function dT(i){return i.instantiationMode==="EAGER"}var wa=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new td(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var hT=[],Z=function(i){return i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT",i}(Z||{}),fT={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},mT=Z.INFO,pT={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},gT=(i,t,...e)=>{if(t<i.logLevel)return;let n=new Date().toISOString(),r=pT[t];if(r)console[r](`[${n}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},kn=class{constructor(t){this.name=t,this._logLevel=mT,this._logHandler=gT,this._userLogHandler=null,hT.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Z))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?fT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...t),this._logHandler(this,Z.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...t),this._logHandler(this,Z.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...t),this._logHandler(this,Z.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...t),this._logHandler(this,Z.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...t),this._logHandler(this,Z.ERROR,...t)}};var bT=(i,t)=>t.some(e=>i instanceof e),Zb,Jb;function _T(){return Zb||(Zb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vT(){return Jb||(Jb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var t_=new WeakMap,nd=new WeakMap,e_=new WeakMap,ed=new WeakMap,rd=new WeakMap;function yT(i){let t=new Promise((e,n)=>{let r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",o)},s=()=>{e(Le(i.result)),r()},o=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&t_.set(e,i)}).catch(()=>{}),rd.set(t,i),t}function wT(i){if(nd.has(i))return;let t=new Promise((e,n)=>{let r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",o),i.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",o),i.addEventListener("abort",o)});nd.set(i,t)}var id={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return nd.get(i);if(t==="objectStoreNames")return i.objectStoreNames||e_.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Le(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function n_(i){id=i(id)}function IT(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let n=i.call(Ia(this),t,...e);return e_.set(n,t.sort?t.sort():[t]),Le(n)}:vT().includes(i)?function(...t){return i.apply(Ia(this),t),Le(t_.get(this))}:function(...t){return Le(i.apply(Ia(this),t))}}function ET(i){return typeof i=="function"?IT(i):(i instanceof IDBTransaction&&wT(i),bT(i,_T())?new Proxy(i,id):i)}function Le(i){if(i instanceof IDBRequest)return yT(i);if(ed.has(i))return ed.get(i);let t=ET(i);return t!==i&&(ed.set(i,t),rd.set(t,i)),t}var Ia=i=>rd.get(i);function r_(i,t,{blocked:e,upgrade:n,blocking:r,terminated:s}={}){let o=indexedDB.open(i,t),c=Le(o);return n&&o.addEventListener("upgradeneeded",l=>{n(Le(o.result),l.oldVersion,l.newVersion,Le(o.transaction),l)}),e&&o.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var TT=["get","getKey","getAll","getAllKeys","count"],AT=["put","add","delete","clear"],sd=new Map;function i_(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(sd.get(t))return sd.get(t);let e=t.replace(/FromIndex$/,""),n=t!==e,r=AT.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(r||TT.includes(e)))return;let s=function(o,...c){return y(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),d=l.store;return n&&(d=d.index(c.shift())),(yield Promise.all([d[e](...c),r&&l.done]))[0]})};return sd.set(t,s),s}n_(i=>ut(O({},i),{get:(t,e,n)=>i_(t,e)||i.get(t,e,n),has:(t,e)=>!!i_(t,e)||i.has(t,e)}));var ad=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(ST(e)){let n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}};function ST(i){let t=i.getComponent();return t?.type==="VERSION"}var cd="@firebase/app",s_="0.10.6";var ti=new kn("@firebase/app"),CT="@firebase/app-compat",RT="@firebase/analytics-compat",xT="@firebase/analytics",DT="@firebase/app-check-compat",kT="@firebase/app-check",PT="@firebase/auth",OT="@firebase/auth-compat",NT="@firebase/database",MT="@firebase/database-compat",LT="@firebase/functions",FT="@firebase/functions-compat",VT="@firebase/installations",UT="@firebase/installations-compat",jT="@firebase/messaging",BT="@firebase/messaging-compat",zT="@firebase/performance",$T="@firebase/performance-compat",qT="@firebase/remote-config",HT="@firebase/remote-config-compat",WT="@firebase/storage",GT="@firebase/storage-compat",KT="@firebase/firestore",YT="@firebase/vertexai-preview",QT="@firebase/firestore-compat",XT="firebase",ZT="10.12.3";var ld="[DEFAULT]",JT={[cd]:"fire-core",[CT]:"fire-core-compat",[xT]:"fire-analytics",[RT]:"fire-analytics-compat",[kT]:"fire-app-check",[DT]:"fire-app-check-compat",[PT]:"fire-auth",[OT]:"fire-auth-compat",[NT]:"fire-rtdb",[MT]:"fire-rtdb-compat",[LT]:"fire-fn",[FT]:"fire-fn-compat",[VT]:"fire-iid",[UT]:"fire-iid-compat",[jT]:"fire-fcm",[BT]:"fire-fcm-compat",[zT]:"fire-perf",[$T]:"fire-perf-compat",[qT]:"fire-rc",[HT]:"fire-rc-compat",[WT]:"fire-gcs",[GT]:"fire-gcs-compat",[KT]:"fire-fst",[QT]:"fire-fst-compat",[YT]:"fire-vertex","fire-js":"fire-js",[XT]:"fire-js-all"};var Ls=new Map,tA=new Map,ud=new Map;function o_(i,t){try{i.container.addComponent(t)}catch(e){ti.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function On(i){let t=i.name;if(ud.has(t))return ti.debug(`There were multiple attempts to register component ${t}.`),!1;ud.set(t,i);for(let e of Ls.values())o_(e,i);for(let e of tA.values())o_(e,i);return!0}function Vs(i,t){let e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}function Fe(i){return i.settings!==void 0}var eA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pn=new rn("app","Firebase",eA);var dd=class{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ve("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Pn.create("app-deleted",{appName:this._name})}};var Nn=ZT;function md(i,t={}){let e=i;typeof t!="object"&&(t={name:t});let n=Object.assign({name:ld,automaticDataCollectionEnabled:!1},t),r=n.name;if(typeof r!="string"||!r)throw Pn.create("bad-app-name",{appName:String(r)});if(e||(e=Xu()),!e)throw Pn.create("no-options");let s=Ls.get(r);if(s){if(Zn(e,s.options)&&Zn(n,s.config))return s;throw Pn.create("duplicate-app",{appName:r})}let o=new wa(r);for(let l of ud.values())o.addComponent(l);let c=new dd(e,n,o);return Ls.set(r,c),c}function Ji(i=ld){let t=Ls.get(i);if(!t&&i===ld&&Xu())return md();if(!t)throw Pn.create("no-app",{appName:i});return t}function Ea(){return Array.from(Ls.values())}function kt(i,t,e){var n;let r=(n=JT[i])!==null&&n!==void 0?n:i;e&&(r+=`-${e}`);let s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${t}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ti.warn(c.join(" "));return}On(new ve(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var nA="firebase-heartbeat-database",iA=1,Fs="firebase-heartbeat-store",od=null;function u_(){return od||(od=r_(nA,iA,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(Fs)}catch(e){console.warn(e)}}}}).catch(i=>{throw Pn.create("idb-open",{originalErrorMessage:i.message})})),od}function rA(i){return y(this,null,function*(){try{let e=(yield u_()).transaction(Fs),n=yield e.objectStore(Fs).get(d_(i));return yield e.done,n}catch(t){if(t instanceof ue)ti.warn(t.message);else{let e=Pn.create("idb-get",{originalErrorMessage:t?.message});ti.warn(e.message)}}})}function a_(i,t){return y(this,null,function*(){try{let n=(yield u_()).transaction(Fs,"readwrite");yield n.objectStore(Fs).put(t,d_(i)),yield n.done}catch(e){if(e instanceof ue)ti.warn(e.message);else{let n=Pn.create("idb-set",{originalErrorMessage:e?.message});ti.warn(n.message)}}})}function d_(i){return`${i.name}!${i.options.appId}`}var sA=1024,oA=30*24*60*60*1e3,hd=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new fd(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}triggerHeartbeat(){return y(this,null,function*(){var t,e;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=c_();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=oA}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return y(this,null,function*(){var t;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=c_(),{heartbeatsToSend:n,unsentEntries:r}=aA(this._heartbeatsCache.heartbeats),s=Ms(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function c_(){return new Date().toISOString().substring(0,10)}function aA(i,t=sA){let e=[],n=i.slice();for(let r of i){let s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),l_(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),l_(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}var fd=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(this,null,function*(){return Ju()?Yb().then(()=>!0).catch(()=>!1):!1})}read(){return y(this,null,function*(){if(yield this._canUseIndexedDBPromise){let e=yield rA(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return y(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return a_(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return y(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return a_(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function l_(i){return Ms(JSON.stringify({version:2,heartbeats:i})).length}function cA(i){On(new ve("platform-logger",t=>new ad(t),"PRIVATE")),On(new ve("heartbeat",t=>new hd(t),"PRIVATE")),kt(cd,s_,i),kt(cd,s_,"esm2017"),kt("fire-js","")}cA("");var lA="firebase",uA="10.12.3";kt(lA,uA,"app");var ni=new as("ANGULARFIRE2_VERSION");function Aa(i,t,e){if(t){if(t.length===1)return t[0];let s=t.filter(o=>o.app===e);if(s.length===1)return s[0]}return e.container.getProvider(i).getImmediate({optional:!0})}var Us=(i,t)=>{let e=t?[t]:Ea(),n=[];return e.forEach(r=>{r.container.getProvider(i).instances.forEach(o=>{n.includes(o)||n.push(o)})}),n},er=class{constructor(){return Us(dA)}},dA="app-check";function tr(){}var Ta=class{zone;delegate;constructor(t,e=Hp){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){let r=this.zone,s=function(o){r.runGuarded(()=>{t.apply(this,[o])})};return this.delegate.schedule(s,e,n)}},pd=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",tr,{},tr,tr)),e.pipe(At({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},nr=(()=>{class i{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new Ta(Zone.current)),this.insideAngular=e.run(()=>new Ta(Zone.current,qp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(n){return new(n||i)(R(H))};static \u0275prov=V({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Sa(){let i=globalThis.\u0275AngularFireScheduler;if(!i)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return i}function hA(i){return Sa().ngZone.runOutsideAngular(()=>i())}function ei(i){return Sa().ngZone.run(()=>i())}function fA(i){return mA(Sa())(i)}function mA(i){return function(e){return e=e.lift(new pd(i.ngZone)),e.pipe(El(i.outsideAngular),Il(i.insideAngular))}}var pA=(i,t)=>function(){let n=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),ei(()=>i.apply(void 0,n))},qt=(i,t)=>function(){let e,n=arguments;for(let s=0;s<arguments.length;s++)typeof n[s]=="function"&&(t&&(e||=ei(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",tr,{},tr,tr))),n[s]=pA(n[s],e));let r=hA(()=>i.apply(this,n));if(!t)if(r instanceof Gn){let s=Sa();return r.pipe(El(s.outsideAngular),Il(s.insideAngular))}else return ei(()=>r);return r instanceof Gn?r.pipe(fA):r instanceof Promise?ei(()=>new Promise((s,o)=>r.then(c=>ei(()=>s(c)),c=>ei(()=>o(c))))):typeof r=="function"&&e?function(){return setTimeout(()=>{e&&e.state==="scheduled"&&e.invoke()},10),r.apply(this,arguments)}:ei(()=>r)};var Se=class{constructor(t){return t}},ii=class{constructor(){return Ea()}};function gA(i){return i&&i.length===1?i[0]:new Se(Ji())}var gd=new tt("angularfire2._apps"),bA={provide:Se,useFactory:gA,deps:[[new Qt,gd]]},_A={provide:ii,deps:[[new Qt,gd]]};function vA(i){return(t,e)=>{let n=e.get(Xe);kt("angularfire",ni.full,"core"),kt("angularfire",ni.full,"app"),kt("angular",_g.full,n.toString());let r=t.runOutsideAngular(()=>i(e));return new Se(r)}}function hO(i,...t){return Ee([bA,_A,{provide:gd,useFactory:vA(i),multi:!0,deps:[H,Lt,nr,...t]}])}var fO=qt(md,!0);function S_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var C_=S_,R_=new rn("auth","Firebase",S_());var Pa=new kn("@firebase/auth");function wA(i,...t){Pa.logLevel<=Z.WARN&&Pa.warn(`Auth (${Nn}): ${i}`,...t)}function Ra(i,...t){Pa.logLevel<=Z.ERROR&&Pa.error(`Auth (${Nn}): ${i}`,...t)}function Ue(i,...t){throw Nd(i,...t)}function Ce(i,...t){return Nd(i,...t)}function Od(i,t,e){let n=Object.assign(Object.assign({},C_()),{[t]:e});return new rn("auth","Firebase",n).create(t,{appName:i.name})}function ri(i){return Od(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function IA(i,t,e){let n=e;if(!(t instanceof n))throw n.name!==t.constructor.name&&Ue(i,"argument-error"),Od(i,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Nd(i,...t){if(typeof i!="string"){let e=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(e,...n)}return R_.create(i,...t)}function q(i,t,...e){if(!i)throw Nd(t,...e)}function sn(i){let t="INTERNAL ASSERTION FAILED: "+i;throw Ra(t),new Error(t)}function an(i,t){i||sn(t)}function vd(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function EA(){return h_()==="http:"||h_()==="https:"}function h_(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}function TA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EA()||Hb()||"connection"in navigator)?navigator.onLine:!0}function AA(){if(typeof navigator>"u")return null;let i=navigator;return i.languages&&i.languages[0]||i.language||null}var si=class{constructor(t,e){this.shortDelay=t,this.longDelay=e,an(e>t,"Short delay should be less than long delay!"),this.isMobile=qb()||Wb()}get(){return TA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Md(i,t){an(i.emulator,"Emulator should always be set here");let{url:e}=i.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}var Oa=class{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var SA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var CA=new si(3e4,6e4);function Ld(i,t){return i.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:i.tenantId}):t}function sr(s,o,c,l){return y(this,arguments,function*(i,t,e,n,r={}){return x_(i,r,()=>y(this,null,function*(){let d={},f={};n&&(t==="GET"?f=n:d={body:JSON.stringify(n)});let p=Zi(Object.assign({key:i.config.apiKey},f)).slice(1),v=yield i._getAdditionalHeaders();return v["Content-Type"]="application/json",i.languageCode&&(v["X-Firebase-Locale"]=i.languageCode),Oa.fetch()(D_(i,i.config.apiHost,e,p),Object.assign({method:t,headers:v,referrerPolicy:"no-referrer"},d))}))})}function x_(i,t,e){return y(this,null,function*(){i._canInitEmulator=!1;let n=Object.assign(Object.assign({},SA),t);try{let r=new yd(i),s=yield Promise.race([e(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ca(i,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ca(i,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ca(i,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ca(i,"user-disabled",o);let f=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Od(i,f,d);Ue(i,f)}}catch(r){if(r instanceof ue)throw r;Ue(i,"network-request-failed",{message:String(r)})}})}function RA(s,o,c,l){return y(this,arguments,function*(i,t,e,n,r={}){let d=yield sr(i,t,e,n,r);return"mfaPendingCredential"in d&&Ue(i,"multi-factor-auth-required",{_serverResponse:d}),d})}function D_(i,t,e,n){let r=`${t}${e}?${n}`;return i.config.emulator?Md(i.config,r):`${i.config.apiScheme}://${r}`}var yd=class{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,n)=>{this.timer=setTimeout(()=>n(Ce(this.auth,"network-request-failed")),CA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ca(i,t,e){let n={appName:i.name};e.email&&(n.email=e.email),e.phoneNumber&&(n.phoneNumber=e.phoneNumber);let r=Ce(i,t,n);return r.customData._tokenResponse=e,r}function xA(i,t){return y(this,null,function*(){return sr(i,"POST","/v1/accounts:delete",t)})}function k_(i,t){return y(this,null,function*(){return sr(i,"POST","/v1/accounts:lookup",t)})}function js(i){if(i)try{let t=new Date(Number(i));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function Fd(i,t=!1){return y(this,null,function*(){let e=Ft(i),n=yield e.getIdToken(t),r=Vd(n);q(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:n,authTime:js(bd(r.auth_time)),issuedAtTime:js(bd(r.iat)),expirationTime:js(bd(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function bd(i){return Number(i)*1e3}function Vd(i){let[t,e,n]=i.split(".");if(t===void 0||e===void 0||n===void 0)return Ra("JWT malformed, contained fewer than 3 sections"),null;try{let r=Yu(e);return r?JSON.parse(r):(Ra("Failed to decode base64 JWT payload"),null)}catch(r){return Ra("Caught error parsing JWT payload as JSON",r?.toString()),null}}function f_(i){let t=Vd(i);return q(t,"internal-error"),q(typeof t.exp<"u","internal-error"),q(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function zs(i,t,e=!1){return y(this,null,function*(){if(e)return t;try{return yield t}catch(n){throw n instanceof ue&&DA(n)&&i.auth.currentUser===i&&(yield i.auth.signOut()),n}})}function DA({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}var wd=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let e=this.getInterval(t);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),e)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var $s=class{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=js(this.lastLoginAt),this.creationTime=js(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Na(i){return y(this,null,function*(){var t;let e=i.auth,n=yield i.getIdToken(),r=yield zs(i,k_(e,{idToken:n}));q(r?.users.length,e,"internal-error");let s=r.users[0];i._notifyReloadListener(s);let o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?P_(s.providerUserInfo):[],c=kA(i.providerData,o),l=i.isAnonymous,d=!(i.email&&s.passwordHash)&&!c?.length,f=l?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new $s(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(i,p)})}function Ud(i){return y(this,null,function*(){let t=Ft(i);yield Na(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function kA(i,t){return[...i.filter(n=>!t.some(r=>r.providerId===n.providerId)),...t]}function P_(i){return i.map(t=>{var{providerId:e}=t,n=Bo(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function PA(i,t){return y(this,null,function*(){let e=yield x_(i,{},()=>y(this,null,function*(){let n=Zi({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=i.config,o=D_(i,r,"/v1/token",`key=${s}`),c=yield i._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Oa.fetch()(o,{method:"POST",headers:c,body:n})}));return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}})}function OA(i,t){return y(this,null,function*(){return sr(i,"POST","/v2/accounts:revokeToken",Ld(i,t))})}var Bs=class i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){q(t.idToken,"internal-error"),q(typeof t.idToken<"u","internal-error"),q(typeof t.refreshToken<"u","internal-error");let e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):f_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){q(t.length!==0,"internal-error");let e=f_(t);this.updateTokensAndExpiration(t,null,e)}getToken(t,e=!1){return y(this,null,function*(){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,e){return y(this,null,function*(){let{accessToken:n,refreshToken:r,expiresIn:s}=yield PA(t,e);this.updateTokensAndExpiration(n,r,Number(s))})}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,e){let{refreshToken:n,accessToken:r,expirationTime:s}=e,o=new i;return n&&(q(typeof n=="string","internal-error",{appName:t}),o.refreshToken=n),r&&(q(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),s&&(q(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new i,this.toJSON())}_performRefresh(){return sn("not implemented")}};function Mn(i,t){q(typeof i=="string"||typeof i>"u","internal-error",{appName:t})}var rr=class i{constructor(t){var{uid:e,auth:n,stsTokenManager:r}=t,s=Bo(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new $s(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(t){return y(this,null,function*(){let e=yield zs(this,this.stsTokenManager.getToken(this.auth,t));return q(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e})}getIdTokenResult(t){return Fd(this,t)}reload(){return Ud(this)}_assign(t){this!==t&&(q(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let e=new i(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,e=!1){return y(this,null,function*(){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&(yield Na(this)),yield this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(Fe(this.auth.app))return Promise.reject(ri(this.auth));let t=yield this.getIdToken();return yield zs(this,xA(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,r,s,o,c,l,d,f;let p=(n=e.displayName)!==null&&n!==void 0?n:void 0,v=(r=e.email)!==null&&r!==void 0?r:void 0,S=(s=e.phoneNumber)!==null&&s!==void 0?s:void 0,D=(o=e.photoURL)!==null&&o!==void 0?o:void 0,P=(c=e.tenantId)!==null&&c!==void 0?c:void 0,k=(l=e._redirectEventId)!==null&&l!==void 0?l:void 0,$=(d=e.createdAt)!==null&&d!==void 0?d:void 0,Y=(f=e.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:et,emailVerified:mt,isAnonymous:Gt,providerData:ct,stsTokenManager:I}=e;q(et&&I,t,"internal-error");let g=Bs.fromJSON(this.name,I);q(typeof et=="string",t,"internal-error"),Mn(p,t.name),Mn(v,t.name),q(typeof mt=="boolean",t,"internal-error"),q(typeof Gt=="boolean",t,"internal-error"),Mn(S,t.name),Mn(D,t.name),Mn(P,t.name),Mn(k,t.name),Mn($,t.name),Mn(Y,t.name);let _=new i({uid:et,auth:t,email:v,emailVerified:mt,displayName:p,isAnonymous:Gt,photoURL:D,phoneNumber:S,tenantId:P,stsTokenManager:g,createdAt:$,lastLoginAt:Y});return ct&&Array.isArray(ct)&&(_.providerData=ct.map(w=>Object.assign({},w))),k&&(_._redirectEventId=k),_}static _fromIdTokenResponse(t,e,n=!1){return y(this,null,function*(){let r=new Bs;r.updateFromServerResponse(e);let s=new i({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:n});return yield Na(s),s})}static _fromGetAccountInfoResponse(t,e,n){return y(this,null,function*(){let r=e.users[0];q(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?P_(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new Bs;c.updateFromIdToken(n);let l=new i({uid:r.localId,auth:t,stsTokenManager:c,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new $s(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,d),l})}};var m_=new Map;function on(i){an(i instanceof Function,"Expected a class definition");let t=m_.get(i);return t?(an(t instanceof i,"Instance stored in cache mismatched with class"),t):(t=new i,m_.set(i,t),t)}var NA=(()=>{class i{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(e,n){return y(this,null,function*(){this.storage[e]=n})}_get(e){return y(this,null,function*(){let n=this.storage[e];return n===void 0?null:n})}_remove(e){return y(this,null,function*(){delete this.storage[e]})}_addListener(e,n){}_removeListener(e,n){}}return i.type="NONE",i})(),Id=NA;function xa(i,t,e){return`firebase:${i}:${t}:${e}`}var Ma=class i{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;let{config:r,name:s}=this.auth;this.fullUserKey=xa(this.userKey,r.apiKey,s),this.fullPersistenceKey=xa("persistence",r.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return y(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);return t?rr._fromJSON(this.auth,t):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return y(this,null,function*(){if(this.persistence===t)return;let e=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,e,n="authUser"){return y(this,null,function*(){if(!e.length)return new i(on(Id),t,n);let r=(yield Promise.all(e.map(d=>y(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=r[0]||on(Id),o=xa(n,t.config.apiKey,t.name),c=null;for(let d of e)try{let f=yield d._get(o);if(f){let p=rr._fromJSON(t,f);d!==s&&(c=p),s=d;break}}catch{}let l=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new i(s,t,n):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(e.map(d=>y(this,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new i(s,t,n))})}};function p_(i){let t=i.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(M_(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(O_(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(F_(t))return"Blackberry";if(V_(t))return"Webos";if(jd(t))return"Safari";if((t.includes("chrome/")||N_(t))&&!t.includes("edge/"))return"Chrome";if(L_(t))return"Android";{let e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(e);if(n?.length===2)return n[1]}return"Other"}function O_(i=Dt()){return/firefox\//i.test(i)}function jd(i=Dt()){let t=i.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function N_(i=Dt()){return/crios\//i.test(i)}function M_(i=Dt()){return/iemobile/i.test(i)}function L_(i=Dt()){return/android/i.test(i)}function F_(i=Dt()){return/blackberry/i.test(i)}function V_(i=Dt()){return/webos/i.test(i)}function qa(i=Dt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function MA(i=Dt()){var t;return qa(i)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function LA(){return Gb()&&document.documentMode===10}function U_(i=Dt()){return qa(i)||L_(i)||V_(i)||F_(i)||/windows phone/i.test(i)||M_(i)}function FA(){try{return!!(window&&window!==window.top)}catch{return!1}}function j_(i,t=[]){let e;switch(i){case"Browser":e=p_(Dt());break;case"Worker":e=`${p_(Dt())}-${i}`;break;default:e=i}let n=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Nn}/${n}`}var Ed=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){let n=s=>new Promise((o,c)=>{try{let l=t(s);o(l)}catch(l){c(l)}});n.onAbort=e,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(t){return y(this,null,function*(){if(this.auth.currentUser===t)return;let e=[];try{for(let n of this.queue)yield n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(let r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}})}};function VA(e){return y(this,arguments,function*(i,t={}){return sr(i,"GET","/v2/passwordPolicy",Ld(i,t))})}var UA=6,Td=class{constructor(t){var e,n,r,s;let o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=o.minPasswordLength)!==null&&e!==void 0?e:UA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(n=t.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,r,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(e=l.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(t,e){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let n;for(let r=0;r<t.length;r++)n=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}};var Ad=class{constructor(t,e,n,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new La(this),this.idTokenSubscription=new La(this),this.beforeStateQueue=new Ed(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=on(e)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var n,r;if(!this._deleted&&(this.persistenceManager=yield Ma.create(this,t),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(e),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return y(this,null,function*(){try{let e=yield k_(this,{idToken:t}),n=yield rr._fromGetAccountInfoResponse(this,e,t);yield this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return y(this,null,function*(){var e;if(Fe(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,s=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(t);(!o||o===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return y(this,null,function*(){let e=null;try{e=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return e})}reloadAndSetCurrentUserOrClear(t){return y(this,null,function*(){try{yield Na(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=AA()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return y(this,null,function*(){if(Fe(this.app))return Promise.reject(ri(this));let e=t?Ft(t):null;return e&&q(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))})}_updateCurrentUser(t,e=!1){return y(this,null,function*(){if(!this._deleted)return t&&q(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return Fe(this.app)?Promise.reject(ri(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return Fe(this.app)?Promise.reject(ri(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(on(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let t=yield VA(this),e=new Td(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new rn("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{let n=this.onAuthStateChanged(()=>{n(),t()},e)}})}revokeAccessToken(t){return y(this,null,function*(){if(this.currentUser){let e=yield this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(n.tenantId=this.tenantId),yield OA(this,n)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,e){return y(this,null,function*(){let n=yield this.getOrInitRedirectPersistenceManager(e);return t===null?n.removeCurrentUser():n.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return y(this,null,function*(){if(!this.redirectPersistenceManager){let e=t&&on(t)||this._popupRedirectResolver;q(e,this,"argument-error"),this.redirectPersistenceManager=yield Ma.create(this,[on(e._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return y(this,null,function*(){var e,n;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return y(this,null,function*(){if(t===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let n=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,r){if(this._deleted)return()=>{};let s=typeof e=="function"?e:e.next.bind(e),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof e=="function"){let l=t.addObserver(e,n,r);return()=>{o=!0,l()}}else{let l=t.addObserver(e);return()=>{o=!0,l()}}}directlySetCurrentUser(t){return y(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=j_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var t;let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return y(this,null,function*(){var t;let e=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return e?.error&&wA(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function Ha(i){return Ft(i)}var La=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=Xb(e=>this.observer=e)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Bd={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jA(i){Bd=i}function BA(i){return Bd.loadJS(i)}function zA(){return Bd.gapiScript}function B_(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function zd(i,t){let e=Vs(i,"auth");if(e.isInitialized()){let r=e.getImmediate(),s=e.getOptions();if(Zn(s,t??{}))return r;Ue(r,"already-initialized")}return e.initialize({options:t})}function $A(i,t){let e=t?.persistence||[],n=(Array.isArray(e)?e:[e]).map(on);t?.errorMap&&i._updateErrorMap(t.errorMap),i._initializeWithPersistence(n,t?.popupRedirectResolver)}function $d(i,t,e){let n=Ha(i);q(n._canInitEmulator,n,"emulator-config-failed"),q(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");let r=!!e?.disableWarnings,s=z_(t),{host:o,port:c}=qA(t),l=c===null?"":`:${c}`;n.config.emulator={url:`${s}//${o}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||HA()}function z_(i){let t=i.indexOf(":");return t<0?"":i.substr(0,t+1)}function qA(i){let t=z_(i),e=/(\/\/)?([^?#/]+)/.exec(i.substr(t.length));if(!e)return{host:"",port:null};let n=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){let s=r[1];return{host:s,port:g_(n.substr(s.length+1))}}else{let[s,o]=n.split(":");return{host:s,port:g_(o)}}}function g_(i){if(!i)return null;let t=Number(i);return isNaN(t)?null:t}function HA(){function i(){let t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}var qs=class{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return sn("not implemented")}_getIdTokenResponse(t){return sn("not implemented")}_linkToIdToken(t,e){return sn("not implemented")}_getReauthenticationResolver(t){return sn("not implemented")}};function ir(i,t){return y(this,null,function*(){return RA(i,"POST","/v1/accounts:signInWithIdp",Ld(i,t))})}var WA="http://localhost",Fa=class i extends qs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let e=new i(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Ue("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let e=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:r}=e,s=Bo(e,["providerId","signInMethod"]);if(!n||!r)return null;let o=new i(n,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){let e=this.buildRequest();return ir(t,e)}_linkToIdToken(t,e){let n=this.buildRequest();return n.idToken=e,ir(t,n)}_getReauthenticationResolver(t){let e=this.buildRequest();return e.autoCreate=!1,ir(t,e)}buildRequest(){let t={requestUri:WA,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{let e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Zi(e)}return t}};var Hs=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var Va=class extends Hs{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};var GA=(()=>{class i extends Va{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fa._fromParams({providerId:i.PROVIDER_ID,signInMethod:i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return i.credentialFromTaggedObject(e)}static credentialFromError(e){return i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return i.credential(n,r)}catch{return null}}}i.GOOGLE_SIGN_IN_METHOD="google.com",i.PROVIDER_ID="google.com";return i})();var Ws=class i{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,e,n,r=!1){return y(this,null,function*(){let s=yield rr._fromIdTokenResponse(t,n,r),o=b_(n);return new i({user:s,providerId:o,_tokenResponse:n,operationType:e})})}static _forOperation(t,e,n){return y(this,null,function*(){yield t._updateTokensIfNecessary(n,!0);let r=b_(n);return new i({user:t,providerId:r,_tokenResponse:n,operationType:e})})}};function b_(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}var Sd=class i extends ue{constructor(t,e,n,r){var s;super(e.code,e.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,i.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,r){return new i(t,e,n,r)}};function $_(i,t,e,n){return(t==="reauthenticate"?e._getReauthenticationResolver(i):e._getIdTokenResponse(i)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Sd._fromErrorAndOperation(i,s,t,n):s})}function KA(i,t,e=!1){return y(this,null,function*(){let n=yield zs(i,t._linkToIdToken(i.auth,yield i.getIdToken()),e);return Ws._forOperation(i,"link",n)})}function YA(i,t,e=!1){return y(this,null,function*(){let{auth:n}=i;if(Fe(n.app))return Promise.reject(ri(n));let r="reauthenticate";try{let s=yield zs(i,$_(n,r,t,i),e);q(s.idToken,n,"internal-error");let o=Vd(s.idToken);q(o,n,"internal-error");let{sub:c}=o;return q(i.uid===c,n,"user-mismatch"),Ws._forOperation(i,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ue(n,"user-mismatch"),s}})}function QA(i,t,e=!1){return y(this,null,function*(){if(Fe(i.app))return Promise.reject(ri(i));let n="signIn",r=yield $_(i,n,t),s=yield Ws._fromIdTokenResponse(i,n,r);return e||(yield i._updateCurrentUser(s.user)),s})}function qd(i,t,e,n){return Ft(i).onIdTokenChanged(t,e,n)}function Hd(i,t,e){return Ft(i).beforeAuthStateChanged(t,e)}var Ua="__sak";var ja=class{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Ua,"1"),this.storage.removeItem(Ua),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){let e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};function XA(){let i=Dt();return jd(i)||qa(i)}var ZA=1e3,JA=10,tS=(()=>{class i extends ja{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=XA()&&FA(),this.fallbackToPolling=U_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let n of Object.keys(this.listeners)){let r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}let r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let c=this.storage.getItem(r);if(e.newValue!==c)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}let s=()=>{let c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);LA()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,JA):s()}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ZA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(e,n){return y(this,null,function*(){yield vn(i.prototype,this,"_set").call(this,e,n),this.localCache[e]=JSON.stringify(n)})}_get(e){return y(this,null,function*(){let n=yield vn(i.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(n),n})}_remove(e){return y(this,null,function*(){yield vn(i.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}}return i.type="LOCAL",i})(),q_=tS;var eS=(()=>{class i extends ja{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}return i.type="SESSION",i})(),Wd=eS;function nS(i){return Promise.all(i.map(t=>y(this,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(e){return{fulfilled:!1,reason:e}}})))}var iS=(()=>{class i{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;let r=new i(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){return y(this,null,function*(){let n=e,{eventId:r,eventType:s,data:o}=n.data,c=this.handlersMap[s];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(f=>y(this,null,function*(){return f(n.origin,o)})),d=yield nS(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}i.receivers=[];return i})();function Gd(i="",t=10){let e="";for(let n=0;n<t;n++)e+=Math.floor(Math.random()*10);return i+e}var Cd=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,e,n=50){return y(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let d=Gd("",20);r.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(p){let v=p;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(v.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:d,data:e},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Ve(){return window}function rS(i){Ve().location.href=i}function H_(){return typeof Ve().WorkerGlobalScope<"u"&&typeof Ve().importScripts=="function"}function sS(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function oS(){var i;return((i=navigator?.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function aS(){return H_()?self:null}var W_="firebaseLocalStorageDb",cS=1,Ba="firebaseLocalStorage",G_="fbase_key",oi=class{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}};function Wa(i,t){return i.transaction([Ba],t?"readwrite":"readonly").objectStore(Ba)}function lS(){let i=indexedDB.deleteDatabase(W_);return new oi(i).toPromise()}function Rd(){let i=indexedDB.open(W_,cS);return new Promise((t,e)=>{i.addEventListener("error",()=>{e(i.error)}),i.addEventListener("upgradeneeded",()=>{let n=i.result;try{n.createObjectStore(Ba,{keyPath:G_})}catch(r){e(r)}}),i.addEventListener("success",()=>y(this,null,function*(){let n=i.result;n.objectStoreNames.contains(Ba)?t(n):(n.close(),yield lS(),t(yield Rd()))}))})}function __(i,t,e){return y(this,null,function*(){let n=Wa(i,!0).put({[G_]:t,value:e});return new oi(n).toPromise()})}function uS(i,t){return y(this,null,function*(){let e=Wa(i,!1).get(t),n=yield new oi(e).toPromise();return n===void 0?null:n.value})}function v_(i,t){let e=Wa(i,!0).delete(t);return new oi(e).toPromise()}var dS=800,hS=3,fS=(()=>{class i{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield Rd(),this.db)})}_withRetries(e){return y(this,null,function*(){let n=0;for(;;)try{let r=yield this._openDb();return yield e(r)}catch(r){if(n++>hS)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return H_()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=iS._getInstance(aS()),this.receiver._subscribe("keyChanged",(e,n)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(n.key)}})),this.receiver._subscribe("ping",(e,n)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var e,n;if(this.activeServiceWorker=yield sS(),!this.activeServiceWorker)return;this.sender=new Cd(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||oS()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let e=yield Rd();return yield __(e,Ua,"1"),yield v_(e,Ua),!0}catch{}return!1})}_withPendingWrite(e){return y(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,n){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>__(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)}))})}_get(e){return y(this,null,function*(){let n=yield this._withRetries(r=>uS(r,e));return this.localCache[e]=n,n})}_remove(e){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(n=>v_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return y(this,null,function*(){let e=yield this._withRetries(s=>{let o=Wa(s,!1).getAll();return new oi(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let n=[],r=new Set;if(e.length!==0)for(let{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n})}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),dS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return i.type="LOCAL",i})(),K_=fS;var IO=B_("rcb"),EO=new si(3e4,6e4);function Y_(i,t){return t?on(t):(q(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}var Gs=class extends qs{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ir(t,this._buildIdpRequest())}_linkToIdToken(t,e){return ir(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return ir(t,this._buildIdpRequest())}_buildIdpRequest(t){let e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}};function mS(i){return QA(i.auth,new Gs(i),i.bypassAuthState)}function pS(i){let{auth:t,user:e}=i;return q(e,t,"internal-error"),YA(e,new Gs(i),i.bypassAuthState)}function gS(i){return y(this,null,function*(){let{auth:t,user:e}=i;return q(e,t,"internal-error"),KA(e,new Gs(i),i.bypassAuthState)})}var za=class{constructor(t,e,n,r,s=!1){this.auth=t,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((t,e)=>y(this,null,function*(){this.pendingPromise={resolve:t,reject:e};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}onAuthEvent(t){return y(this,null,function*(){let{urlResponse:e,sessionId:n,postBody:r,tenantId:s,error:o,type:c}=t;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:e,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(d){this.reject(d)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return mS;case"linkViaPopup":case"linkViaRedirect":return gS;case"reauthViaPopup":case"reauthViaRedirect":return pS;default:Ue(this.auth,"internal-error")}}resolve(t){an(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){an(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var bS=new si(2e3,1e4);function Kd(i,t,e){return y(this,null,function*(){if(Fe(i.app))return Promise.reject(Ce(i,"operation-not-supported-in-this-environment"));let n=Ha(i);IA(i,t,Hs);let r=Y_(n,e);return new _S(n,"signInViaPopup",t,r).executeNotNull()})}var _S=(()=>{class i extends za{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,i.currentPopupAction&&i.currentPopupAction.cancel(),i.currentPopupAction=this}executeNotNull(){return y(this,null,function*(){let e=yield this.execute();return q(e,this.auth,"internal-error"),e})}onExecution(){return y(this,null,function*(){an(this.filter.length===1,"Popup operations only handle one event");let e=Gd();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ce(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,i.currentPopupAction=null}pollUserCancellation(){let e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bS.get())};e()}}i.currentPopupAction=null;return i})(),vS="pendingRedirect",Da=new Map,xd=class i extends za{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}execute(){return y(this,null,function*(){let t=Da.get(this.auth._key());if(!t){try{let n=(yield yS(this.resolver,this.auth))?yield vn(i.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}Da.set(this.auth._key(),t)}return this.bypassAuthState||Da.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return y(this,null,function*(){if(t.type==="signInViaRedirect")return vn(i.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let e=yield this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,vn(i.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function yS(i,t){return y(this,null,function*(){let e=ES(t),n=IS(i);if(!(yield n._isAvailable()))return!1;let r=(yield n._get(e))==="true";return yield n._remove(e),r})}function wS(i,t){Da.set(i._key(),t)}function IS(i){return on(i._redirectPersistence)}function ES(i){return xa(vS,i.config.apiKey,i.name)}function TS(i,t,e=!1){return y(this,null,function*(){if(Fe(i.app))return Promise.reject(ri(i));let n=Ha(i),r=Y_(n,t),o=yield new xd(n,r,e).execute();return o&&!e&&(delete o.user._redirectEventId,yield n._persistUserIfCurrent(o.user),yield n._setRedirectUser(null,t)),o})}var AS=10*60*1e3,Dd=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!SS(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Q_(t)){let r=((n=t.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";e.onError(Ce(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){let n=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=AS&&this.cachedEventUids.clear(),this.cachedEventUids.has(y_(t))}saveEventToCache(t){this.cachedEventUids.add(y_(t)),this.lastProcessedEventTime=Date.now()}};function y_(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(t=>t).join("-")}function Q_({type:i,error:t}){return i==="unknown"&&t?.code==="auth/no-auth-event"}function SS(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q_(i);default:return!1}}function CS(e){return y(this,arguments,function*(i,t={}){return sr(i,"GET","/v1/projects",t)})}var RS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xS=/^https?/;function DS(i){return y(this,null,function*(){if(i.config.emulator)return;let{authorizedDomains:t}=yield CS(i);for(let e of t)try{if(kS(e))return}catch{}Ue(i,"unauthorized-domain")})}function kS(i){let t=vd(),{protocol:e,hostname:n}=new URL(t);if(i.startsWith("chrome-extension://")){let o=new URL(i);return o.hostname===""&&n===""?e==="chrome-extension:"&&i.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&o.hostname===n}if(!xS.test(e))return!1;if(RS.test(i))return n===i;let r=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}var PS=new si(3e4,6e4);function w_(){let i=Ve().___jsl;if(i?.H){for(let t of Object.keys(i.H))if(i.H[t].r=i.H[t].r||[],i.H[t].L=i.H[t].L||[],i.H[t].r=[...i.H[t].L],i.CP)for(let e=0;e<i.CP.length;e++)i.CP[e]=null}}function OS(i){return new Promise((t,e)=>{var n,r,s;function o(){w_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{w_(),e(Ce(i,"network-request-failed"))},timeout:PS.get()})}if(!((r=(n=Ve().gapi)===null||n===void 0?void 0:n.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=Ve().gapi)===null||s===void 0)&&s.load)o();else{let c=B_("iframefcb");return Ve()[c]=()=>{gapi.load?o():e(Ce(i,"network-request-failed"))},BA(`${zA()}?onload=${c}`).catch(l=>e(l))}}).catch(t=>{throw ka=null,t})}var ka=null;function NS(i){return ka=ka||OS(i),ka}var MS=new si(5e3,15e3),LS="__/auth/iframe",FS="emulator/auth/iframe",VS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},US=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jS(i){let t=i.config;q(t.authDomain,i,"auth-domain-config-required");let e=t.emulator?Md(t,FS):`https://${i.config.authDomain}/${LS}`,n={apiKey:t.apiKey,appName:i.name,v:Nn},r=US.get(i.config.apiHost);r&&(n.eid=r);let s=i._getFrameworks();return s.length&&(n.fw=s.join(",")),`${e}?${Zi(n).slice(1)}`}function BS(i){return y(this,null,function*(){let t=yield NS(i),e=Ve().gapi;return q(e,i,"internal-error"),t.open({where:document.body,url:jS(i),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VS,dontclear:!0},n=>new Promise((r,s)=>y(this,null,function*(){yield n.restyle({setHideOnLeave:!1});let o=Ce(i,"network-request-failed"),c=Ve().setTimeout(()=>{s(o)},MS.get());function l(){Ve().clearTimeout(c),r(n)}n.ping(l).then(l,()=>{s(o)})})))})}var zS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$S=500,qS=600,HS="_blank",WS="http://localhost",$a=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function GS(i,t,e,n=$S,r=qS){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString(),c="",l=Object.assign(Object.assign({},zS),{width:n.toString(),height:r.toString(),top:s,left:o}),d=Dt().toLowerCase();e&&(c=N_(d)?HS:e),O_(d)&&(t=t||WS,l.scrollbars="yes");let f=Object.entries(l).reduce((v,[S,D])=>`${v}${S}=${D},`,"");if(MA(d)&&c!=="_self")return KS(t||"",c),new $a(null);let p=window.open(t||"",c,f);q(p,i,"popup-blocked");try{p.focus()}catch{}return new $a(p)}function KS(i,t){let e=document.createElement("a");e.href=i,e.target=t;let n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(n)}var YS="__/auth/handler",QS="emulator/auth/handler",XS=encodeURIComponent("fac");function I_(i,t,e,n,r,s){return y(this,null,function*(){q(i.config.authDomain,i,"auth-domain-config-required"),q(i.config.apiKey,i,"invalid-api-key");let o={apiKey:i.config.apiKey,appName:i.name,authType:e,redirectUrl:n,v:Nn,eventId:r};if(t instanceof Hs){t.setDefaultLanguage(i.languageCode),o.providerId=t.providerId||"",Qb(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[f,p]of Object.entries(s||{}))o[f]=p}if(t instanceof Va){let f=t.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}i.tenantId&&(o.tid=i.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield i._getAppCheckToken(),d=l?`#${XS}=${encodeURIComponent(l)}`:"";return`${ZS(i)}?${Zi(c).slice(1)}${d}`})}function ZS({config:i}){return i.emulator?Md(i,QS):`https://${i.authDomain}/${YS}`}var _d="webStorageSupport",kd=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wd,this._completeRedirectFn=TS,this._overrideRedirectResult=wS}_openPopup(t,e,n,r){return y(this,null,function*(){var s;an((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield I_(t,e,n,vd(),r);return GS(t,o,Gd())})}_openRedirect(t,e,n,r){return y(this,null,function*(){yield this._originValidation(t);let s=yield I_(t,e,n,vd(),r);return rS(s),new Promise(()=>{})})}_initialize(t){let e=t._key();if(this.eventManagers[e]){let{manager:r,promise:s}=this.eventManagers[e];return r?Promise.resolve(r):(an(s,"If manager is not set, promise should be"),s)}let n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch(()=>{delete this.eventManagers[e]}),n}initAndGetManager(t){return y(this,null,function*(){let e=yield BS(t),n=new Dd(t);return e.register("authEvent",r=>(q(r?.authEvent,t,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n})}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(_d,{type:_d},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[_d];o!==void 0&&e(!!o),Ue(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=DS(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return U_()||jd()||qa()}},X_=kd;var E_="@firebase/auth",T_="1.7.5";var Pd=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let e=this.auth.onIdTokenChanged(n=>{t(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function JS(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tC(i){On(new ve("auth",(t,{options:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;q(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});let l={apiKey:o,authDomain:c,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:j_(i)},d=new Ad(n,r,s,l);return $A(d,e),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider("auth-internal").initialize()})),On(new ve("auth-internal",t=>{let e=Ha(t.getProvider("auth").getImmediate());return(n=>new Pd(n))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),kt(E_,T_,JS(i)),kt(E_,T_,"esm2017")}var eC=5*60,nC=Zu("authIdTokenMaxAge")||eC,A_=null,iC=i=>t=>y(void 0,null,function*(){let e=t&&(yield t.getIdTokenResult()),n=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>nC)return;let r=e?.token;A_!==r&&(A_=r,yield fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Yd(i=Ji()){let t=Vs(i,"auth");if(t.isInitialized())return t.getImmediate();let e=zd(i,{popupRedirectResolver:X_,persistence:[K_,q_,Wd]}),n=Zu("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(n,location.origin);if(location.origin===s.origin){let o=iC(s.toString());Hd(e,o,()=>o(e.currentUser)),qd(e,c=>o(c))}}let r=Qu("auth");return r&&$d(e,`http://${r}`),e}function rC(){var i,t;return(t=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&t!==void 0?t:document}jA({loadJS(i){return new Promise((t,e)=>{let n=document.createElement("script");n.setAttribute("src",i),n.onload=t,n.onerror=r=>{let s=Ce("internal-error");s.customData=r,e(s)},n.type="text/javascript",n.charset="UTF-8",rC().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tC("Browser");var Z_="auth",ai=class{constructor(t){return t}},Ks=class{constructor(){return Us(Z_)}};var Qd=new tt("angularfire2.auth-instances");function XC(i,t){let e=Aa(Z_,i,t);return e&&new ai(e)}function ZC(i){return(t,e)=>{let n=t.runOutsideAngular(()=>i(e));return new ai(n)}}var JC={provide:Ks,deps:[[new Qt,Qd]]},tR={provide:ai,useFactory:XC,deps:[[new Qt,Qd],Se]};function aN(i,...t){return kt("angularfire",ni.full,"auth"),Ee([tR,JC,{provide:Qd,useFactory:ZC(i),multi:!0,deps:[H,Lt,nr,ii,[new Qt,er],...t]}])}var cN=qt(Yd,!0);var lN=qt(Kd,!0);var J_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tv={};var Ln,Xd;(function(){var i;function t(I,g){function _(){}_.prototype=g.prototype,I.D=g.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(w,E,A){for(var b=Array(arguments.length-2),We=2;We<arguments.length;We++)b[We-2]=arguments[We];return g.prototype[E].apply(w,b)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,e),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,g,_){_||(_=0);var w=Array(16);if(typeof g=="string")for(var E=0;16>E;++E)w[E]=g.charCodeAt(_++)|g.charCodeAt(_++)<<8|g.charCodeAt(_++)<<16|g.charCodeAt(_++)<<24;else for(E=0;16>E;++E)w[E]=g[_++]|g[_++]<<8|g[_++]<<16|g[_++]<<24;g=I.g[0],_=I.g[1],E=I.g[2];var A=I.g[3],b=g+(A^_&(E^A))+w[0]+3614090360&4294967295;g=_+(b<<7&4294967295|b>>>25),b=A+(E^g&(_^E))+w[1]+3905402710&4294967295,A=g+(b<<12&4294967295|b>>>20),b=E+(_^A&(g^_))+w[2]+606105819&4294967295,E=A+(b<<17&4294967295|b>>>15),b=_+(g^E&(A^g))+w[3]+3250441966&4294967295,_=E+(b<<22&4294967295|b>>>10),b=g+(A^_&(E^A))+w[4]+4118548399&4294967295,g=_+(b<<7&4294967295|b>>>25),b=A+(E^g&(_^E))+w[5]+1200080426&4294967295,A=g+(b<<12&4294967295|b>>>20),b=E+(_^A&(g^_))+w[6]+2821735955&4294967295,E=A+(b<<17&4294967295|b>>>15),b=_+(g^E&(A^g))+w[7]+4249261313&4294967295,_=E+(b<<22&4294967295|b>>>10),b=g+(A^_&(E^A))+w[8]+1770035416&4294967295,g=_+(b<<7&4294967295|b>>>25),b=A+(E^g&(_^E))+w[9]+2336552879&4294967295,A=g+(b<<12&4294967295|b>>>20),b=E+(_^A&(g^_))+w[10]+4294925233&4294967295,E=A+(b<<17&4294967295|b>>>15),b=_+(g^E&(A^g))+w[11]+2304563134&4294967295,_=E+(b<<22&4294967295|b>>>10),b=g+(A^_&(E^A))+w[12]+1804603682&4294967295,g=_+(b<<7&4294967295|b>>>25),b=A+(E^g&(_^E))+w[13]+4254626195&4294967295,A=g+(b<<12&4294967295|b>>>20),b=E+(_^A&(g^_))+w[14]+2792965006&4294967295,E=A+(b<<17&4294967295|b>>>15),b=_+(g^E&(A^g))+w[15]+1236535329&4294967295,_=E+(b<<22&4294967295|b>>>10),b=g+(E^A&(_^E))+w[1]+4129170786&4294967295,g=_+(b<<5&4294967295|b>>>27),b=A+(_^E&(g^_))+w[6]+3225465664&4294967295,A=g+(b<<9&4294967295|b>>>23),b=E+(g^_&(A^g))+w[11]+643717713&4294967295,E=A+(b<<14&4294967295|b>>>18),b=_+(A^g&(E^A))+w[0]+3921069994&4294967295,_=E+(b<<20&4294967295|b>>>12),b=g+(E^A&(_^E))+w[5]+3593408605&4294967295,g=_+(b<<5&4294967295|b>>>27),b=A+(_^E&(g^_))+w[10]+38016083&4294967295,A=g+(b<<9&4294967295|b>>>23),b=E+(g^_&(A^g))+w[15]+3634488961&4294967295,E=A+(b<<14&4294967295|b>>>18),b=_+(A^g&(E^A))+w[4]+3889429448&4294967295,_=E+(b<<20&4294967295|b>>>12),b=g+(E^A&(_^E))+w[9]+568446438&4294967295,g=_+(b<<5&4294967295|b>>>27),b=A+(_^E&(g^_))+w[14]+3275163606&4294967295,A=g+(b<<9&4294967295|b>>>23),b=E+(g^_&(A^g))+w[3]+4107603335&4294967295,E=A+(b<<14&4294967295|b>>>18),b=_+(A^g&(E^A))+w[8]+1163531501&4294967295,_=E+(b<<20&4294967295|b>>>12),b=g+(E^A&(_^E))+w[13]+2850285829&4294967295,g=_+(b<<5&4294967295|b>>>27),b=A+(_^E&(g^_))+w[2]+4243563512&4294967295,A=g+(b<<9&4294967295|b>>>23),b=E+(g^_&(A^g))+w[7]+1735328473&4294967295,E=A+(b<<14&4294967295|b>>>18),b=_+(A^g&(E^A))+w[12]+2368359562&4294967295,_=E+(b<<20&4294967295|b>>>12),b=g+(_^E^A)+w[5]+4294588738&4294967295,g=_+(b<<4&4294967295|b>>>28),b=A+(g^_^E)+w[8]+2272392833&4294967295,A=g+(b<<11&4294967295|b>>>21),b=E+(A^g^_)+w[11]+1839030562&4294967295,E=A+(b<<16&4294967295|b>>>16),b=_+(E^A^g)+w[14]+4259657740&4294967295,_=E+(b<<23&4294967295|b>>>9),b=g+(_^E^A)+w[1]+2763975236&4294967295,g=_+(b<<4&4294967295|b>>>28),b=A+(g^_^E)+w[4]+1272893353&4294967295,A=g+(b<<11&4294967295|b>>>21),b=E+(A^g^_)+w[7]+4139469664&4294967295,E=A+(b<<16&4294967295|b>>>16),b=_+(E^A^g)+w[10]+3200236656&4294967295,_=E+(b<<23&4294967295|b>>>9),b=g+(_^E^A)+w[13]+681279174&4294967295,g=_+(b<<4&4294967295|b>>>28),b=A+(g^_^E)+w[0]+3936430074&4294967295,A=g+(b<<11&4294967295|b>>>21),b=E+(A^g^_)+w[3]+3572445317&4294967295,E=A+(b<<16&4294967295|b>>>16),b=_+(E^A^g)+w[6]+76029189&4294967295,_=E+(b<<23&4294967295|b>>>9),b=g+(_^E^A)+w[9]+3654602809&4294967295,g=_+(b<<4&4294967295|b>>>28),b=A+(g^_^E)+w[12]+3873151461&4294967295,A=g+(b<<11&4294967295|b>>>21),b=E+(A^g^_)+w[15]+530742520&4294967295,E=A+(b<<16&4294967295|b>>>16),b=_+(E^A^g)+w[2]+3299628645&4294967295,_=E+(b<<23&4294967295|b>>>9),b=g+(E^(_|~A))+w[0]+4096336452&4294967295,g=_+(b<<6&4294967295|b>>>26),b=A+(_^(g|~E))+w[7]+1126891415&4294967295,A=g+(b<<10&4294967295|b>>>22),b=E+(g^(A|~_))+w[14]+2878612391&4294967295,E=A+(b<<15&4294967295|b>>>17),b=_+(A^(E|~g))+w[5]+4237533241&4294967295,_=E+(b<<21&4294967295|b>>>11),b=g+(E^(_|~A))+w[12]+1700485571&4294967295,g=_+(b<<6&4294967295|b>>>26),b=A+(_^(g|~E))+w[3]+2399980690&4294967295,A=g+(b<<10&4294967295|b>>>22),b=E+(g^(A|~_))+w[10]+4293915773&4294967295,E=A+(b<<15&4294967295|b>>>17),b=_+(A^(E|~g))+w[1]+2240044497&4294967295,_=E+(b<<21&4294967295|b>>>11),b=g+(E^(_|~A))+w[8]+1873313359&4294967295,g=_+(b<<6&4294967295|b>>>26),b=A+(_^(g|~E))+w[15]+4264355552&4294967295,A=g+(b<<10&4294967295|b>>>22),b=E+(g^(A|~_))+w[6]+2734768916&4294967295,E=A+(b<<15&4294967295|b>>>17),b=_+(A^(E|~g))+w[13]+1309151649&4294967295,_=E+(b<<21&4294967295|b>>>11),b=g+(E^(_|~A))+w[4]+4149444226&4294967295,g=_+(b<<6&4294967295|b>>>26),b=A+(_^(g|~E))+w[11]+3174756917&4294967295,A=g+(b<<10&4294967295|b>>>22),b=E+(g^(A|~_))+w[2]+718787259&4294967295,E=A+(b<<15&4294967295|b>>>17),b=_+(A^(E|~g))+w[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(E+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+A&4294967295}n.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var _=g-this.blockSize,w=this.B,E=this.h,A=0;A<g;){if(E==0)for(;A<=_;)r(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<g;)if(w[E++]=I.charCodeAt(A++),E==this.blockSize){r(this,w),E=0;break}}else for(;A<g;)if(w[E++]=I[A++],E==this.blockSize){r(this,w),E=0;break}}this.h=E,this.o+=g},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var _=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=_&255,_/=256;for(this.u(I),I=Array(16),g=_=0;4>g;++g)for(var w=0;32>w;w+=8)I[_++]=this.g[g]>>>w&255;return I};function s(I,g){var _=c;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=g(I)}function o(I,g){this.h=g;for(var _=[],w=!0,E=I.length-1;0<=E;E--){var A=I[E]|0;w&&A==g||(_[E]=A,w=!1)}this.g=_}var c={};function l(I){return-128<=I&&128>I?s(I,function(g){return new o([g|0],0>g?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return k(d(-I));for(var g=[],_=1,w=0;I>=_;w++)g[w]=I/_|0,_*=4294967296;return new o(g,0)}function f(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return k(f(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=d(Math.pow(g,8)),w=p,E=0;E<I.length;E+=8){var A=Math.min(8,I.length-E),b=parseInt(I.substring(E,E+A),g);8>A?(A=d(Math.pow(g,A)),w=w.j(A).add(d(b))):(w=w.j(_),w=w.add(d(b)))}return w}var p=l(0),v=l(1),S=l(16777216);i=o.prototype,i.m=function(){if(P(this))return-k(this).m();for(var I=0,g=1,_=0;_<this.g.length;_++){var w=this.i(_);I+=(0<=w?w:4294967296+w)*g,g*=4294967296}return I},i.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(D(this))return"0";if(P(this))return"-"+k(this).toString(I);for(var g=d(Math.pow(I,6)),_=this,w="";;){var E=mt(_,g).g;_=$(_,E.j(g));var A=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=E,D(_))return A+w;for(;6>A.length;)A="0"+A;w=A+w}},i.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function D(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function P(I){return I.h==-1}i.l=function(I){return I=$(this,I),P(I)?-1:D(I)?0:1};function k(I){for(var g=I.g.length,_=[],w=0;w<g;w++)_[w]=~I.g[w];return new o(_,~I.h).add(v)}i.abs=function(){return P(this)?k(this):this},i.add=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],w=0,E=0;E<=g;E++){var A=w+(this.i(E)&65535)+(I.i(E)&65535),b=(A>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);w=b>>>16,A&=65535,b&=65535,_[E]=b<<16|A}return new o(_,_[_.length-1]&-2147483648?-1:0)};function $(I,g){return I.add(k(g))}i.j=function(I){if(D(this)||D(I))return p;if(P(this))return P(I)?k(this).j(k(I)):k(k(this).j(I));if(P(I))return k(this.j(k(I)));if(0>this.l(S)&&0>I.l(S))return d(this.m()*I.m());for(var g=this.g.length+I.g.length,_=[],w=0;w<2*g;w++)_[w]=0;for(w=0;w<this.g.length;w++)for(var E=0;E<I.g.length;E++){var A=this.i(w)>>>16,b=this.i(w)&65535,We=I.i(E)>>>16,Nr=I.i(E)&65535;_[2*w+2*E]+=b*Nr,Y(_,2*w+2*E),_[2*w+2*E+1]+=A*Nr,Y(_,2*w+2*E+1),_[2*w+2*E+1]+=b*We,Y(_,2*w+2*E+1),_[2*w+2*E+2]+=A*We,Y(_,2*w+2*E+2)}for(w=0;w<g;w++)_[w]=_[2*w+1]<<16|_[2*w];for(w=g;w<2*g;w++)_[w]=0;return new o(_,0)};function Y(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function et(I,g){this.g=I,this.h=g}function mt(I,g){if(D(g))throw Error("division by zero");if(D(I))return new et(p,p);if(P(I))return g=mt(k(I),g),new et(k(g.g),k(g.h));if(P(g))return g=mt(I,k(g)),new et(k(g.g),g.h);if(30<I.g.length){if(P(I)||P(g))throw Error("slowDivide_ only works with positive integers.");for(var _=v,w=g;0>=w.l(I);)_=Gt(_),w=Gt(w);var E=ct(_,1),A=ct(w,1);for(w=ct(w,2),_=ct(_,2);!D(w);){var b=A.add(w);0>=b.l(I)&&(E=E.add(_),A=b),w=ct(w,1),_=ct(_,1)}return g=$(I,E.j(g)),new et(E,g)}for(E=p;0<=I.l(g);){for(_=Math.max(1,Math.floor(I.m()/g.m())),w=Math.ceil(Math.log(_)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),A=d(_),b=A.j(g);P(b)||0<b.l(I);)_-=w,A=d(_),b=A.j(g);D(A)&&(A=v),E=E.add(A),I=$(I,b)}return new et(E,I)}i.A=function(I){return mt(this,I).h},i.and=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],w=0;w<g;w++)_[w]=this.i(w)&I.i(w);return new o(_,this.h&I.h)},i.or=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],w=0;w<g;w++)_[w]=this.i(w)|I.i(w);return new o(_,this.h|I.h)},i.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],w=0;w<g;w++)_[w]=this.i(w)^I.i(w);return new o(_,this.h^I.h)};function Gt(I){for(var g=I.g.length+1,_=[],w=0;w<g;w++)_[w]=I.i(w)<<1|I.i(w-1)>>>31;return new o(_,I.h)}function ct(I,g){var _=g>>5;g%=32;for(var w=I.g.length-_,E=[],A=0;A<w;A++)E[A]=0<g?I.i(A+_)>>>g|I.i(A+_+1)<<32-g:I.i(A+_);return new o(E,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Xd=tv.Md5=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Ln=tv.Integer=o}).apply(typeof J_<"u"?J_:typeof self<"u"?self:typeof window<"u"?window:{});var Ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cn={};var Zd,Jd,or,th,Ys,Ka,eh,nh,ih;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,h){return a==Array.prototype||a==Object.prototype||(a[u]=h.value),a};function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ga=="object"&&Ga];for(var u=0;u<a.length;++u){var h=a[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var n=e(this);function r(a,u){if(u)t:{var h=n;a=a.split(".");for(var m=0;m<a.length-1;m++){var T=a[m];if(!(T in h))break t;h=h[T]}a=a[a.length-1],m=h[a],u=u(m),u!=m&&u!=null&&t(h,a,{configurable:!0,writable:!0,value:u})}}function s(a,u){a instanceof String&&(a+="");var h=0,m=!1,T={next:function(){if(!m&&h<a.length){var C=h++;return{value:u(C,a[C]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}r("Array.prototype.values",function(a){return a||function(){return s(this,function(u,h){return h})}});var o=o||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function d(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function f(a,u,h){return a.call.apply(a.bind,arguments)}function p(a,u,h){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),a.apply(u,T)}}return function(){return a.apply(u,arguments)}}function v(a,u,h){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,v.apply(null,arguments)}function S(a,u){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function D(a,u){function h(){}h.prototype=u.prototype,a.aa=u.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(m,T,C){for(var M=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)M[lt-2]=arguments[lt];return u.prototype[T].apply(m,M)}}function P(a){let u=a.length;if(0<u){let h=Array(u);for(let m=0;m<u;m++)h[m]=a[m];return h}return[]}function k(a,u){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(l(m)){let T=a.length||0,C=m.length||0;a.length=T+C;for(let M=0;M<C;M++)a[T+M]=m[M]}else a.push(m)}}class ${constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function Y(a){return/^[\s\xa0]*$/.test(a)}function et(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function mt(a){return mt[" "](a),a}mt[" "]=function(){};var Gt=et().indexOf("Gecko")!=-1&&!(et().toLowerCase().indexOf("webkit")!=-1&&et().indexOf("Edge")==-1)&&!(et().indexOf("Trident")!=-1||et().indexOf("MSIE")!=-1)&&et().indexOf("Edge")==-1;function ct(a,u,h){for(let m in a)u.call(h,a[m],m,a)}function I(a,u){for(let h in a)u.call(void 0,a[h],h,a)}function g(a){let u={};for(let h in a)u[h]=a[h];return u}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,u){let h,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(h in m)a[h]=m[h];for(let C=0;C<_.length;C++)h=_[C],Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])}}function E(a){var u=1;a=a.split(":");let h=[];for(;0<u&&a.length;)h.push(a.shift()),u--;return a.length&&h.push(a.join(":")),h}function A(a){c.setTimeout(()=>{throw a},0)}function b(){var a=Yc;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class We{constructor(){this.h=this.g=null}add(u,h){let m=Nr.get();m.set(u,h),this.h?this.h.next=m:this.g=m,this.h=m}}var Nr=new $(()=>new Mw,a=>a.reset());class Mw{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Mr,Lr=!1,Yc=new We,zm=()=>{let a=c.Promise.resolve(void 0);Mr=()=>{a.then(Lw)}};var Lw=()=>{for(var a;a=b();){try{a.h.call(a.g)}catch(h){A(h)}var u=Nr;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}Lr=!1};function pn(){this.s=this.s,this.C=this.C}pn.prototype.s=!1,pn.prototype.ma=function(){this.s||(this.s=!0,this.N())},pn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ut(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}Ut.prototype.h=function(){this.defaultPrevented=!0};var Fw=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,u),c.removeEventListener("test",h,u)}catch{}return a}();function Fr(a,u){if(Ut.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(Gt){t:{try{mt(u.nodeName);var T=!0;break t}catch{}T=!1}T||(u=null)}}else h=="mouseover"?u=a.fromElement:h=="mouseout"&&(u=a.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Vw[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Fr.aa.h.call(this)}}D(Fr,Ut);var Vw={2:"touch",3:"pen",4:"mouse"};Fr.prototype.h=function(){Fr.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Vr="closure_listenable_"+(1e6*Math.random()|0),Uw=0;function jw(a,u,h,m,T){this.listener=a,this.proxy=null,this.src=u,this.type=h,this.capture=!!m,this.ha=T,this.key=++Uw,this.da=this.fa=!1}function To(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ao(a){this.src=a,this.g={},this.h=0}Ao.prototype.add=function(a,u,h,m,T){var C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);var M=Xc(a,u,m,T);return-1<M?(u=a[M],h||(u.fa=!1)):(u=new jw(u,this.src,C,!!m,T),u.fa=h,a.push(u)),u};function Qc(a,u){var h=u.type;if(h in a.g){var m=a.g[h],T=Array.prototype.indexOf.call(m,u,void 0),C;(C=0<=T)&&Array.prototype.splice.call(m,T,1),C&&(To(u),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Xc(a,u,h,m){for(var T=0;T<a.length;++T){var C=a[T];if(!C.da&&C.listener==u&&C.capture==!!h&&C.ha==m)return T}return-1}var Zc="closure_lm_"+(1e6*Math.random()|0),Jc={};function $m(a,u,h,m,T){if(m&&m.once)return Hm(a,u,h,m,T);if(Array.isArray(u)){for(var C=0;C<u.length;C++)$m(a,u[C],h,m,T);return null}return h=il(h),a&&a[Vr]?a.K(u,h,d(m)?!!m.capture:!!m,T):qm(a,u,h,!1,m,T)}function qm(a,u,h,m,T,C){if(!u)throw Error("Invalid event type");var M=d(T)?!!T.capture:!!T,lt=el(a);if(lt||(a[Zc]=lt=new Ao(a)),h=lt.add(u,h,m,M,C),h.proxy)return h;if(m=Bw(),h.proxy=m,m.src=a,m.listener=h,a.addEventListener)Fw||(T=M),T===void 0&&(T=!1),a.addEventListener(u.toString(),m,T);else if(a.attachEvent)a.attachEvent(Gm(u.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function Bw(){function a(h){return u.call(a.src,a.listener,h)}let u=zw;return a}function Hm(a,u,h,m,T){if(Array.isArray(u)){for(var C=0;C<u.length;C++)Hm(a,u[C],h,m,T);return null}return h=il(h),a&&a[Vr]?a.L(u,h,d(m)?!!m.capture:!!m,T):qm(a,u,h,!0,m,T)}function Wm(a,u,h,m,T){if(Array.isArray(u))for(var C=0;C<u.length;C++)Wm(a,u[C],h,m,T);else m=d(m)?!!m.capture:!!m,h=il(h),a&&a[Vr]?(a=a.i,u=String(u).toString(),u in a.g&&(C=a.g[u],h=Xc(C,h,m,T),-1<h&&(To(C[h]),Array.prototype.splice.call(C,h,1),C.length==0&&(delete a.g[u],a.h--)))):a&&(a=el(a))&&(u=a.g[u.toString()],a=-1,u&&(a=Xc(u,h,m,T)),(h=-1<a?u[a]:null)&&tl(h))}function tl(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[Vr])Qc(u.i,a);else{var h=a.type,m=a.proxy;u.removeEventListener?u.removeEventListener(h,m,a.capture):u.detachEvent?u.detachEvent(Gm(h),m):u.addListener&&u.removeListener&&u.removeListener(m),(h=el(u))?(Qc(h,a),h.h==0&&(h.src=null,u[Zc]=null)):To(a)}}}function Gm(a){return a in Jc?Jc[a]:Jc[a]="on"+a}function zw(a,u){if(a.da)a=!0;else{u=new Fr(u,this);var h=a.listener,m=a.ha||a.src;a.fa&&tl(a),a=h.call(m,u)}return a}function el(a){return a=a[Zc],a instanceof Ao?a:null}var nl="__closure_events_fn_"+(1e9*Math.random()>>>0);function il(a){return typeof a=="function"?a:(a[nl]||(a[nl]=function(u){return a.handleEvent(u)}),a[nl])}function jt(){pn.call(this),this.i=new Ao(this),this.M=this,this.F=null}D(jt,pn),jt.prototype[Vr]=!0,jt.prototype.removeEventListener=function(a,u,h,m){Wm(this,a,u,h,m)};function Kt(a,u){var h,m=a.F;if(m)for(h=[];m;m=m.F)h.push(m);if(a=a.M,m=u.type||u,typeof u=="string")u=new Ut(u,a);else if(u instanceof Ut)u.target=u.target||a;else{var T=u;u=new Ut(m,a),w(u,T)}if(T=!0,h)for(var C=h.length-1;0<=C;C--){var M=u.g=h[C];T=So(M,m,!0,u)&&T}if(M=u.g=a,T=So(M,m,!0,u)&&T,T=So(M,m,!1,u)&&T,h)for(C=0;C<h.length;C++)M=u.g=h[C],T=So(M,m,!1,u)&&T}jt.prototype.N=function(){if(jt.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var h=a.g[u],m=0;m<h.length;m++)To(h[m]);delete a.g[u],a.h--}}this.F=null},jt.prototype.K=function(a,u,h,m){return this.i.add(String(a),u,!1,h,m)},jt.prototype.L=function(a,u,h,m){return this.i.add(String(a),u,!0,h,m)};function So(a,u,h,m){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var T=!0,C=0;C<u.length;++C){var M=u[C];if(M&&!M.da&&M.capture==h){var lt=M.listener,Nt=M.ha||M.src;M.fa&&Qc(a.i,M),T=lt.call(Nt,m)!==!1&&T}}return T&&!m.defaultPrevented}function Km(a,u,h){if(typeof a=="function")h&&(a=v(a,h));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function Ym(a){a.g=Km(()=>{a.g=null,a.i&&(a.i=!1,Ym(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class $w extends pn{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Ym(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ur(a){pn.call(this),this.h=a,this.g={}}D(Ur,pn);var Qm=[];function Xm(a){ct(a.g,function(u,h){this.g.hasOwnProperty(h)&&tl(u)},a),a.g={}}Ur.prototype.N=function(){Ur.aa.N.call(this),Xm(this)},Ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rl=c.JSON.stringify,qw=c.JSON.parse,Hw=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function sl(){}sl.prototype.h=null;function Zm(a){return a.h||(a.h=a.i())}function Jm(){}var jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ol(){Ut.call(this,"d")}D(ol,Ut);function al(){Ut.call(this,"c")}D(al,Ut);var $n={},tp=null;function Co(){return tp=tp||new jt}$n.La="serverreachability";function ep(a){Ut.call(this,$n.La,a)}D(ep,Ut);function Br(a){let u=Co();Kt(u,new ep(u))}$n.STAT_EVENT="statevent";function np(a,u){Ut.call(this,$n.STAT_EVENT,a),this.stat=u}D(np,Ut);function Yt(a){let u=Co();Kt(u,new np(u,a))}$n.Ma="timingevent";function ip(a,u){Ut.call(this,$n.Ma,a),this.size=u}D(ip,Ut);function zr(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function $r(){this.g=!0}$r.prototype.xa=function(){this.g=!1};function Ww(a,u,h,m,T,C){a.info(function(){if(a.g)if(C)for(var M="",lt=C.split("&"),Nt=0;Nt<lt.length;Nt++){var it=lt[Nt].split("=");if(1<it.length){var Bt=it[0];it=it[1];var zt=Bt.split("_");M=2<=zt.length&&zt[1]=="type"?M+(Bt+"="+it+"&"):M+(Bt+"=redacted&")}}else M=null;else M=C;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+u+`
`+h+`
`+M})}function Gw(a,u,h,m,T,C,M){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+u+`
`+h+`
`+C+" "+M})}function Si(a,u,h,m){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+Yw(a,h)+(m?" "+m:"")})}function Kw(a,u){a.info(function(){return"TIMEOUT: "+u})}$r.prototype.info=function(){};function Yw(a,u){if(!a.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var m=h[a];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var C=T[0];if(C!="noop"&&C!="stop"&&C!="close")for(var M=1;M<T.length;M++)T[M]=""}}}}return rl(h)}catch{return u}}var Ro={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cl;function xo(){}D(xo,sl),xo.prototype.g=function(){return new XMLHttpRequest},xo.prototype.i=function(){return{}},cl=new xo;function gn(a,u,h,m){this.j=a,this.i=u,this.l=h,this.R=m||1,this.U=new Ur(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sp}function sp(){this.i=null,this.g="",this.h=!1}var op={},ll={};function ul(a,u,h){a.L=1,a.v=Oo(Ge(u)),a.m=h,a.P=!0,ap(a,null)}function ap(a,u){a.F=Date.now(),Do(a),a.A=Ge(a.v);var h=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),wp(h.i,"t",m),a.C=0,h=a.j.J,a.h=new sp,a.g=Up(a.j,h?u:null,!a.m),0<a.O&&(a.M=new $w(v(a.Y,a,a.g),a.O)),u=a.U,h=a.g,m=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(Qm[0]=T.toString()),T=Qm);for(var C=0;C<T.length;C++){var M=$m(h,T[C],m||u.handleEvent,!1,u.h||u);if(!M)break;u.g[M.key]=M}u=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),Br(),Ww(a.i,a.u,a.A,a.l,a.R,a.m)}gn.prototype.ca=function(a){a=a.target;let u=this.M;u&&Ke(a)==3?u.j():this.Y(a)},gn.prototype.Y=function(a){try{if(a==this.g)t:{let zt=Ke(this.g);var u=this.g.Ba();let xi=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||Rp(this.g)))){this.J||zt!=4||u==7||(u==8||0>=xi?Br(3):Br(2)),dl(this);var h=this.g.Z();this.X=h;e:if(cp(this)){var m=Rp(this.g);a="";var T=m.length,C=Ke(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qn(this),qr(this);var M="";break e}this.h.i=new c.TextDecoder}for(u=0;u<T;u++)this.h.h=!0,a+=this.h.i.decode(m[u],{stream:!(C&&u==T-1)});m.length=0,this.h.g+=a,this.C=0,M=this.h.g}else M=this.g.oa();if(this.o=h==200,Gw(this.i,this.u,this.A,this.l,this.R,zt,h),this.o){if(this.T&&!this.K){e:{if(this.g){var lt,Nt=this.g;if((lt=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(lt)){var it=lt;break e}}it=null}if(h=it)Si(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hl(this,h);else{this.o=!1,this.s=3,Yt(12),qn(this),qr(this);break t}}if(this.P){h=!0;let Ie;for(;!this.J&&this.C<M.length;)if(Ie=Qw(this,M),Ie==ll){zt==4&&(this.s=4,Yt(14),h=!1),Si(this.i,this.l,null,"[Incomplete Response]");break}else if(Ie==op){this.s=4,Yt(15),Si(this.i,this.l,M,"[Invalid Chunk]"),h=!1;break}else Si(this.i,this.l,Ie,null),hl(this,Ie);if(cp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||M.length!=0||this.h.h||(this.s=1,Yt(16),h=!1),this.o=this.o&&h,!h)Si(this.i,this.l,M,"[Invalid Chunked Response]"),qn(this),qr(this);else if(0<M.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),_l(Bt),Bt.M=!0,Yt(11))}}else Si(this.i,this.l,M,null),hl(this,M);zt==4&&qn(this),this.o&&!this.J&&(zt==4?Mp(this.j,this):(this.o=!1,Do(this)))}else fI(this.g),h==400&&0<M.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),qn(this),qr(this)}}}catch{}finally{}};function cp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Qw(a,u){var h=a.C,m=u.indexOf(`
`,h);return m==-1?ll:(h=Number(u.substring(h,m)),isNaN(h)?op:(m+=1,m+h>u.length?ll:(u=u.slice(m,m+h),a.C=m+h,u)))}gn.prototype.cancel=function(){this.J=!0,qn(this)};function Do(a){a.S=Date.now()+a.I,lp(a,a.I)}function lp(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=zr(v(a.ba,a),u)}function dl(a){a.B&&(c.clearTimeout(a.B),a.B=null)}gn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(Kw(this.i,this.A),this.L!=2&&(Br(),Yt(17)),qn(this),this.s=2,qr(this)):lp(this,this.S-a)};function qr(a){a.j.G==0||a.J||Mp(a.j,a)}function qn(a){dl(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,Xm(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function hl(a,u){try{var h=a.j;if(h.G!=0&&(h.g==a||fl(h.h,a))){if(!a.K&&fl(h.h,a)&&h.G==3){try{var m=h.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){t:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Vo(h),Lo(h);else break t;bl(h),Yt(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=zr(v(h.Za,h),6e3));if(1>=hp(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Wn(h,11)}else if((a.K||h.g==a)&&Vo(h),!Y(u))for(T=h.Da.g.parse(u),u=0;u<T.length;u++){let it=T[u];if(h.T=it[0],it=it[1],h.G==2)if(it[0]=="c"){h.K=it[1],h.ia=it[2];let Bt=it[3];Bt!=null&&(h.la=Bt,h.j.info("VER="+h.la));let zt=it[4];zt!=null&&(h.Aa=zt,h.j.info("SVER="+h.Aa));let xi=it[5];xi!=null&&typeof xi=="number"&&0<xi&&(m=1.5*xi,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let Ie=a.g;if(Ie){let jo=Ie.g?Ie.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jo){var C=m.h;C.g||jo.indexOf("spdy")==-1&&jo.indexOf("quic")==-1&&jo.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(ml(C,C.h),C.h=null))}if(m.D){let vl=Ie.g?Ie.g.getResponseHeader("X-HTTP-Session-Id"):null;vl&&(m.ya=vl,pt(m.I,m.D,vl))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var M=a;if(m.qa=Vp(m,m.J?m.ia:null,m.W),M.K){fp(m.h,M);var lt=M,Nt=m.L;Nt&&(lt.I=Nt),lt.B&&(dl(lt),Do(lt)),m.g=M}else Op(m);0<h.i.length&&Fo(h)}else it[0]!="stop"&&it[0]!="close"||Wn(h,7);else h.G==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?Wn(h,7):gl(h):it[0]!="noop"&&h.l&&h.l.ta(it),h.v=0)}}Br(4)}catch{}}var Xw=class{constructor(a,u){this.g=a,this.map=u}};function up(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function hp(a){return a.h?1:a.g?a.g.size:0}function fl(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function ml(a,u){a.g?a.g.add(u):a.h=u}function fp(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}up.prototype.cancel=function(){if(this.i=mp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function mp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let h of a.g.values())u=u.concat(h.D);return u}return P(a.i)}function Zw(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],h=a.length,m=0;m<h;m++)u.push(a[m]);return u}u=[],h=0;for(m in a)u[h++]=a[m];return u}function Jw(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var h=0;h<a;h++)u.push(h);return u}u=[],h=0;for(let m in a)u[h++]=m;return u}}}function pp(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var h=Jw(a),m=Zw(a),T=m.length,C=0;C<T;C++)u.call(void 0,m[C],h&&h[C],a)}var gp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tI(a,u){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var m=a[h].indexOf("="),T=null;if(0<=m){var C=a[h].substring(0,m);T=a[h].substring(m+1)}else C=a[h];u(C,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Hn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Hn){this.h=a.h,ko(this,a.j),this.o=a.o,this.g=a.g,Po(this,a.s),this.l=a.l;var u=a.i,h=new Gr;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),bp(this,h),this.m=a.m}else a&&(u=String(a).match(gp))?(this.h=!1,ko(this,u[1]||"",!0),this.o=Hr(u[2]||""),this.g=Hr(u[3]||"",!0),Po(this,u[4]),this.l=Hr(u[5]||"",!0),bp(this,u[6]||"",!0),this.m=Hr(u[7]||"")):(this.h=!1,this.i=new Gr(null,this.h))}Hn.prototype.toString=function(){var a=[],u=this.j;u&&a.push(Wr(u,_p,!0),":");var h=this.g;return(h||u=="file")&&(a.push("//"),(u=this.o)&&a.push(Wr(u,_p,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Wr(h,h.charAt(0)=="/"?iI:nI,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Wr(h,sI)),a.join("")};function Ge(a){return new Hn(a)}function ko(a,u,h){a.j=h?Hr(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function Po(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function bp(a,u,h){u instanceof Gr?(a.i=u,oI(a.i,a.h)):(h||(u=Wr(u,rI)),a.i=new Gr(u,a.h))}function pt(a,u,h){a.i.set(u,h)}function Oo(a){return pt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Hr(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Wr(a,u,h){return typeof a=="string"?(a=encodeURI(a).replace(u,eI),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function eI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var _p=/[#\/\?@]/g,nI=/[#\?:]/g,iI=/[#\?]/g,rI=/[#\?@]/g,sI=/#/g;function Gr(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function bn(a){a.g||(a.g=new Map,a.h=0,a.i&&tI(a.i,function(u,h){a.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}i=Gr.prototype,i.add=function(a,u){bn(this),this.i=null,a=Ci(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(u),this.h+=1,this};function vp(a,u){bn(a),u=Ci(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function yp(a,u){return bn(a),u=Ci(a,u),a.g.has(u)}i.forEach=function(a,u){bn(this),this.g.forEach(function(h,m){h.forEach(function(T){a.call(u,T,m,this)},this)},this)},i.na=function(){bn(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let m=0;m<u.length;m++){let T=a[m];for(let C=0;C<T.length;C++)h.push(u[m])}return h},i.V=function(a){bn(this);let u=[];if(typeof a=="string")yp(this,a)&&(u=u.concat(this.g.get(Ci(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)u=u.concat(a[h])}return u},i.set=function(a,u){return bn(this),this.i=null,a=Ci(this,a),yp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},i.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function wp(a,u,h){vp(a,u),0<h.length&&(a.i=null,a.g.set(Ci(a,u),P(h)),a.h+=h.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var m=u[h];let C=encodeURIComponent(String(m)),M=this.V(m);for(m=0;m<M.length;m++){var T=C;M[m]!==""&&(T+="="+encodeURIComponent(String(M[m]))),a.push(T)}}return this.i=a.join("&")};function Ci(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function oI(a,u){u&&!a.j&&(bn(a),a.i=null,a.g.forEach(function(h,m){var T=m.toLowerCase();m!=T&&(vp(this,m),wp(this,T,h))},a)),a.j=u}function aI(a,u){let h=new $r;if(c.Image){let m=new Image;m.onload=S(_n,h,"TestLoadImage: loaded",!0,u,m),m.onerror=S(_n,h,"TestLoadImage: error",!1,u,m),m.onabort=S(_n,h,"TestLoadImage: abort",!1,u,m),m.ontimeout=S(_n,h,"TestLoadImage: timeout",!1,u,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else u(!1)}function cI(a,u){let h=new $r,m=new AbortController,T=setTimeout(()=>{m.abort(),_n(h,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:m.signal}).then(C=>{clearTimeout(T),C.ok?_n(h,"TestPingServer: ok",!0,u):_n(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(T),_n(h,"TestPingServer: error",!1,u)})}function _n(a,u,h,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(h)}catch{}}function lI(){this.g=new Hw}function uI(a,u,h){let m=h||"";try{pp(a,function(T,C){let M=T;d(T)&&(M=rl(T)),u.push(m+C+"="+encodeURIComponent(M))})}catch(T){throw u.push(m+"type="+encodeURIComponent("_badmap")),T}}function Kr(a){this.l=a.Ub||null,this.j=a.eb||!1}D(Kr,sl),Kr.prototype.g=function(){return new No(this.l,this.j)},Kr.prototype.i=function(a){return function(){return a}}({});function No(a,u){jt.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(No,jt),i=No.prototype,i.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,Qr(this)},i.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yr(this)),this.readyState=0},i.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Qr(this)),this.g&&(this.readyState=3,Qr(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ip(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ip(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}i.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?Yr(this):Qr(this),this.readyState==3&&Ip(this)}},i.Ra=function(a){this.g&&(this.response=this.responseText=a,Yr(this))},i.Qa=function(a){this.g&&(this.response=a,Yr(this))},i.ga=function(){this.g&&Yr(this)};function Yr(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Qr(a)}i.setRequestHeader=function(a,u){this.u.append(a,u)},i.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=u.next();return a.join(`\r
`)};function Qr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(No.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ep(a){let u="";return ct(a,function(h,m){u+=m,u+=":",u+=h,u+=`\r
`}),u}function pl(a,u,h){t:{for(m in h){var m=!1;break t}m=!0}m||(h=Ep(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):pt(a,u,h))}function _t(a){jt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(_t,jt);var dI=/^https?$/i,hI=["POST","PUT"];i=_t.prototype,i.Ha=function(a){this.J=a},i.ea=function(a,u,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cl.g(),this.v=this.o?Zm(this.o):Zm(cl),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(C){Tp(this,C);return}if(a=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)h.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let C of m.keys())h.set(C,m.get(C));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(hI,u,void 0))||m||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,M]of h)this.g.setRequestHeader(C,M);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cp(this),this.u=!0,this.g.send(a),this.u=!1}catch(C){Tp(this,C)}};function Tp(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,Ap(a),Mo(a)}function Ap(a){a.A||(a.A=!0,Kt(a,"complete"),Kt(a,"error"))}i.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Kt(this,"complete"),Kt(this,"abort"),Mo(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mo(this,!0)),_t.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Sp(this):this.bb())},i.bb=function(){Sp(this)};function Sp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Ke(a)!=4||a.Z()!=2)){if(a.u&&Ke(a)==4)Km(a.Ea,0,a);else if(Kt(a,"readystatechange"),Ke(a)==4){a.h=!1;try{let M=a.Z();t:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var h;if(!(h=u)){var m;if(m=M===0){var T=String(a.D).match(gp)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),m=!dI.test(T?T.toLowerCase():"")}h=m}if(h)Kt(a,"complete"),Kt(a,"success");else{a.m=6;try{var C=2<Ke(a)?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.Z()+"]",Ap(a)}}finally{Mo(a)}}}}function Mo(a,u){if(a.g){Cp(a);let h=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||Kt(a,"ready");try{h.onreadystatechange=m}catch{}}}function Cp(a){a.I&&(c.clearTimeout(a.I),a.I=null)}i.isActive=function(){return!!this.g};function Ke(a){return a.g?a.g.readyState:0}i.Z=function(){try{return 2<Ke(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),qw(u)}};function Rp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function fI(a){let u={};a=(a.g&&2<=Ke(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(Y(a[m]))continue;var h=E(a[m]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let C=u[T]||[];u[T]=C,C.push(h)}I(u,function(m){return m.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xr(a,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||u}function xp(a){this.Aa=0,this.i=[],this.j=new $r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xr("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xr("baseRetryDelayMs",5e3,a),this.cb=Xr("retryDelaySeedMs",1e4,a),this.Wa=Xr("forwardChannelMaxRetries",2,a),this.wa=Xr("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new up(a&&a.concurrentRequestLimit),this.Da=new lI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=xp.prototype,i.la=8,i.G=1,i.connect=function(a,u,h,m){Yt(0),this.W=a,this.H=u||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=Vp(this,null,this.W),Fo(this)};function gl(a){if(Dp(a),a.G==3){var u=a.U++,h=Ge(a.I);if(pt(h,"SID",a.K),pt(h,"RID",u),pt(h,"TYPE","terminate"),Zr(a,h),u=new gn(a,a.j,u),u.L=2,u.v=Oo(Ge(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=u.v,h=!0),h||(u.g=Up(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Do(u)}Fp(a)}function Lo(a){a.g&&(_l(a),a.g.cancel(),a.g=null)}function Dp(a){Lo(a),a.u&&(c.clearTimeout(a.u),a.u=null),Vo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Fo(a){if(!dp(a.h)&&!a.s){a.s=!0;var u=a.Ga;Mr||zm(),Lr||(Mr(),Lr=!0),Yc.add(u,a),a.B=0}}function mI(a,u){return hp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=zr(v(a.Ga,a,u),Lp(a,a.B)),a.B++,!0)}i.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new gn(this,this.j,a),C=this.o;if(this.S&&(C?(C=g(C),w(C,this.S)):C=this.S),this.m!==null||this.O||(T.H=C,C=null),this.P)t:{for(var u=0,h=0;h<this.i.length;h++){e:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break e}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=h;break t}if(u===4096||h===this.i.length-1){u=h+1;break t}}u=1e3}else u=1e3;u=Pp(this,T,u),h=Ge(this.I),pt(h,"RID",a),pt(h,"CVER",22),this.D&&pt(h,"X-HTTP-Session-Id",this.D),Zr(this,h),C&&(this.O?u="headers="+encodeURIComponent(String(Ep(C)))+"&"+u:this.m&&pl(h,this.m,C)),ml(this.h,T),this.Ua&&pt(h,"TYPE","init"),this.P?(pt(h,"$req",u),pt(h,"SID","null"),T.T=!0,ul(T,h,null)):ul(T,h,u),this.G=2}}else this.G==3&&(a?kp(this,a):this.i.length==0||dp(this.h)||kp(this))};function kp(a,u){var h;u?h=u.l:h=a.U++;let m=Ge(a.I);pt(m,"SID",a.K),pt(m,"RID",h),pt(m,"AID",a.T),Zr(a,m),a.m&&a.o&&pl(m,a.m,a.o),h=new gn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),u&&(a.i=u.D.concat(a.i)),u=Pp(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ml(a.h,h),ul(h,m,u)}function Zr(a,u){a.H&&ct(a.H,function(h,m){pt(u,m,h)}),a.l&&pp({},function(h,m){pt(u,m,h)})}function Pp(a,u,h){h=Math.min(a.i.length,h);var m=a.l?v(a.l.Na,a.l,a):null;t:{var T=a.i;let C=-1;for(;;){let M=["count="+h];C==-1?0<h?(C=T[0].g,M.push("ofs="+C)):C=0:M.push("ofs="+C);let lt=!0;for(let Nt=0;Nt<h;Nt++){let it=T[Nt].g,Bt=T[Nt].map;if(it-=C,0>it)C=Math.max(0,T[Nt].g-100),lt=!1;else try{uI(Bt,M,"req"+it+"_")}catch{m&&m(Bt)}}if(lt){m=M.join("&");break t}}}return a=a.i.splice(0,h),u.D=a,m}function Op(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;Mr||zm(),Lr||(Mr(),Lr=!0),Yc.add(u,a),a.v=0}}function bl(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=zr(v(a.Fa,a),Lp(a,a.v)),a.v++,!0)}i.Fa=function(){if(this.u=null,Np(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=zr(v(this.ab,this),a)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),Lo(this),Np(this))};function _l(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Np(a){a.g=new gn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=Ge(a.qa);pt(u,"RID","rpc"),pt(u,"SID",a.K),pt(u,"AID",a.T),pt(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&pt(u,"TO",a.ja),pt(u,"TYPE","xmlhttp"),Zr(a,u),a.m&&a.o&&pl(u,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Oo(Ge(u)),h.m=null,h.P=!0,ap(h,a)}i.Za=function(){this.C!=null&&(this.C=null,Lo(this),bl(this),Yt(19))};function Vo(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Mp(a,u){var h=null;if(a.g==u){Vo(a),_l(a),a.g=null;var m=2}else if(fl(a.h,u))h=u.D,fp(a.h,u),m=1;else return;if(a.G!=0){if(u.o)if(m==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var T=a.B;m=Co(),Kt(m,new ip(m,h)),Fo(a)}else Op(a);else if(T=u.s,T==3||T==0&&0<u.X||!(m==1&&mI(a,u)||m==2&&bl(a)))switch(h&&0<h.length&&(u=a.h,u.i=u.i.concat(h)),T){case 1:Wn(a,5);break;case 4:Wn(a,10);break;case 3:Wn(a,6);break;default:Wn(a,2)}}}function Lp(a,u){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*u}function Wn(a,u){if(a.j.info("Error code "+u),u==2){var h=v(a.fb,a),m=a.Xa;let T=!m;m=new Hn(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ko(m,"https"),Oo(m),T?aI(m.toString(),h):cI(m.toString(),h)}else Yt(2);a.G=0,a.l&&a.l.sa(u),Fp(a),Dp(a)}i.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function Fp(a){if(a.G=0,a.ka=[],a.l){let u=mp(a.h);(u.length!=0||a.i.length!=0)&&(k(a.ka,u),k(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Vp(a,u,h){var m=h instanceof Hn?Ge(h):new Hn(h);if(m.g!="")u&&(m.g=u+"."+m.g),Po(m,m.s);else{var T=c.location;m=T.protocol,u=u?u+"."+T.hostname:T.hostname,T=+T.port;var C=new Hn(null);m&&ko(C,m),u&&(C.g=u),T&&Po(C,T),h&&(C.l=h),m=C}return h=a.D,u=a.ya,h&&u&&pt(m,h,u),pt(m,"VER",a.la),Zr(a,m),m}function Up(a,u,h){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new _t(new Kr({eb:h})):new _t(a.pa),u.Ha(a.J),u}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function jp(){}i=jp.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Uo(){}Uo.prototype.g=function(a,u){return new ie(a,u)};function ie(a,u){jt.call(this),this.g=new xp(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!Y(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!Y(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new Ri(this)}D(ie,jt),ie.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ie.prototype.close=function(){gl(this.g)},ie.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=rl(a),a=h);u.i.push(new Xw(u.Ya++,a)),u.G==3&&Fo(u)},ie.prototype.N=function(){this.g.l=null,delete this.j,gl(this.g),delete this.g,ie.aa.N.call(this)};function Bp(a){ol.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){t:{for(let h in u){a=h;break t}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}D(Bp,ol);function zp(){al.call(this),this.status=1}D(zp,al);function Ri(a){this.g=a}D(Ri,jp),Ri.prototype.ua=function(){Kt(this.g,"a")},Ri.prototype.ta=function(a){Kt(this.g,new Bp(a))},Ri.prototype.sa=function(a){Kt(this.g,new zp)},Ri.prototype.ra=function(){Kt(this.g,"b")},Uo.prototype.createWebChannel=Uo.prototype.g,ie.prototype.send=ie.prototype.o,ie.prototype.open=ie.prototype.m,ie.prototype.close=ie.prototype.close,ih=cn.createWebChannelTransport=function(){return new Uo},nh=cn.getStatEventTarget=function(){return Co()},eh=cn.Event=$n,Ka=cn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,Ys=cn.ErrorCode=Ro,rp.COMPLETE="complete",th=cn.EventType=rp,Jm.EventType=jr,jr.OPEN="a",jr.CLOSE="b",jr.ERROR="c",jr.MESSAGE="d",jt.prototype.listen=jt.prototype.K,or=cn.WebChannel=Jm,Jd=cn.FetchXmlHttpFactory=Kr,_t.prototype.listenOnce=_t.prototype.L,_t.prototype.getLastError=_t.prototype.Ka,_t.prototype.getLastErrorCode=_t.prototype.Ba,_t.prototype.getStatus=_t.prototype.Z,_t.prototype.getResponseJson=_t.prototype.Oa,_t.prototype.getResponseText=_t.prototype.oa,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Ha,Zd=cn.XhrIo=_t}).apply(typeof Ga<"u"?Ga:typeof self<"u"?self:typeof window<"u"?window:{});var ev="@firebase/firestore";var Ot=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");var Cr="10.12.3";var di=new kn("@firebase/firestore");function Qs(){return di.logLevel}function U(i,...t){if(di.logLevel<=Z.DEBUG){let e=t.map(zf);di.debug(`Firestore (${Cr}): ${i}`,...e)}}function un(i,...t){if(di.logLevel<=Z.ERROR){let e=t.map(zf);di.error(`Firestore (${Cr}): ${i}`,...e)}}function fr(i,...t){if(di.logLevel<=Z.WARN){let e=t.map(zf);di.warn(`Firestore (${Cr}): ${i}`,...e)}}function zf(i){if(typeof i=="string")return i;try{return function(e){return JSON.stringify(e)}(i)}catch{return i}}function z(i="Unexpected state"){let t=`FIRESTORE (${Cr}) INTERNAL ASSERTION FAILED: `+i;throw un(t),new Error(t)}function ft(i,t){i||z()}function W(i,t){return i}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends ue{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Re=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var Ja=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},ch=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Ot.UNAUTHENTICATED))}shutdown(){}},lh=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},uh=class{constructor(t){this.t=t,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i,r=l=>this.i!==n?(n=this.i,e(l)):Promise.resolve(),s=new Re;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Re,t.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;t.enqueueRetryable(()=>y(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Re)}},0),o()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(n=>this.i!==t?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ft(typeof n.accessToken=="string"),new Ja(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return ft(t===null||typeof t=="string"),new Ot(t)}},dh=class{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},hh=class{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new dh(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}},fh=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},mh=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let n=s=>{s.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};let r=s=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ft(typeof e.token=="string"),this.R=e.token,new fh(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function nR(i){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<i;n++)e[n]=Math.floor(256*Math.random());return e}var tc=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";for(;n.length<20;){let r=nR(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<e&&(n+=t.charAt(r[s]%t.length))}return n}};function st(i,t){return i<t?-1:i>t?1:0}function mr(i,t,e){return i.length===t.length&&i.every((n,r)=>e(n,t[r]))}var Vt=class i{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new F(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new F(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new F(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new F(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return i.fromMillis(Date.now())}static fromDate(t){return i.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new i(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?st(this.nanoseconds,t.nanoseconds):st(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var G=class i{constructor(t){this.timestamp=t}static fromTimestamp(t){return new i(t)}static min(){return new i(new Vt(0,0))}static max(){return new i(new Vt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ec=class i{constructor(t,e,n){e===void 0?e=0:e>t.length&&z(),n===void 0?n=t.length-e:n>t.length-e&&z(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return i.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof i?t.forEach(n=>{e.push(n)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},bt=class i extends ec{construct(t,e,n){return new i(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let n of t){if(n.indexOf("//")>=0)throw new F(x.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(r=>r.length>0))}return new i(e)}static emptyPath(){return new i([])}},iR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,he=class i extends ec{construct(t,e,n){return new i(t,e,n)}static isValidIdentifier(t){return iR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),i.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new i(["__name__"])}static fromServerFormat(t){let e=[],n="",r=0,s=()=>{if(n.length===0)throw new F(x.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""},o=!1;for(;r<t.length;){let c=t[r];if(c==="\\"){if(r+1===t.length)throw new F(x.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(n+=c,r++):(s(),r++)}if(s(),o)throw new F(x.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new i(e)}static emptyPath(){return new i([])}};var j=class i{constructor(t){this.path=t}static fromPath(t){return new i(bt.fromString(t))}static fromName(t){return new i(bt.fromString(t).popFirst(5))}static empty(){return new i(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&bt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return bt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new i(new bt(t.slice()))}};var ph=class{constructor(t,e,n,r){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=r}};ph.UNKNOWN_ID=-1;function rR(i,t){let e=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=G.fromTimestamp(n===1e9?new Vt(e+1,0):new Vt(e,n));return new hi(r,j.empty(),t)}function sR(i){return new hi(i.readTime,i.key,-1)}var hi=class i{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new i(G.min(),j.empty(),-1)}static max(){return new i(G.max(),j.empty(),-1)}};function oR(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=j.comparator(i.documentKey,t.documentKey),e!==0?e:st(i.largestBatchId,t.largestBatchId))}var aR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",gh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function po(i){return y(this,null,function*(){if(i.code!==x.FAILED_PRECONDITION||i.message!==aR)throw i;U("LocalStore","Unexpectedly lost primary lease")})}var N=class i{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new i((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(n,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof i?e:i.resolve(e)}catch(e){return i.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):i.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):i.reject(e)}static resolve(t){return new i((e,n)=>{e(t)})}static reject(t){return new i((e,n)=>{n(t)})}static waitFor(t){return new i((e,n)=>{let r=0,s=0,o=!1;t.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&e()},l=>n(l))}),o=!0,s===r&&e()})}static or(t){let e=i.resolve(!1);for(let n of t)e=e.next(r=>r?i.resolve(r):n());return e}static forEach(t,e){let n=[];return t.forEach((r,s)=>{n.push(e.call(this,r,s))}),this.waitFor(n)}static mapArray(t,e){return new i((n,r)=>{let s=t.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let d=l;e(t[d]).next(f=>{o[d]=f,++c,c===s&&n(o)},f=>r(f))}})}static doWhile(t,e){return new i((n,r)=>{let s=()=>{t()===!0?e().next(()=>{s()},r):n()};s()})}};function cR(i){let t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function go(i){return i.name==="IndexedDbTransactionError"}var Pv=(()=>{class i{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return i.oe=-1,i})();function Pc(i){return i==null}function no(i){return i===0&&1/i==-1/0}function lR(i){return typeof i=="number"&&Number.isInteger(i)&&!no(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}var uR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],IN=[...uR,"documentOverlays"],dR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],hR=dR,EN=[...hR,"indexConfiguration","indexState","indexEntries"];function nv(i){let t=0;for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function _i(i,t){for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function Ov(i){for(let t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}var yt=class i{constructor(t,e){this.comparator=t,this.root=e||Be.EMPTY}insert(t,e){return new i(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(t){return new i(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Be.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(t,n.key);if(r===0)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){let t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ur(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ur(this.root,t,this.comparator,!1)}getReverseIterator(){return new ur(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ur(this.root,t,this.comparator,!0)}},ur=class{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Be=class i{constructor(t,e,n,r,s){this.key=t,this.value=e,this.color=n??i.RED,this.left=r??i.EMPTY,this.right=s??i.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,s){return new i(t??this.key,e??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this,s=n(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,n),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return i.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return i.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let t=this.left.check();if(t!==this.right.check())throw z();return t+(this.isRed()?0:1)}};Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(t,e,n,r,s){return this}insert(t,e,n){return new Be(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Wt=class i{constructor(t){this.comparator=t,this.data=new yt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){let n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new nc(this.data.getIterator())}getIteratorFrom(t){return new nc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(n=>{e=e.add(n)}),e}isEqual(t){if(!(t instanceof i)||this.size!==t.size)return!1;let e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new i(this.comparator);return e.data=t,e}},nc=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ye=class i{constructor(t){this.fields=t,t.sort(he.comparator)}static empty(){return new i([])}unionWith(t){let e=new Wt(he.comparator);for(let n of this.fields)e=e.add(n);for(let n of t)e=e.add(n);return new i(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return mr(this.fields,t.fields,(e,n)=>e.isEqual(n))}};var ic=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Jt=class i{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ic("Invalid base64 string: "+s):s}}(t);return new i(e)}static fromUint8Array(t){let e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new i(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return st(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Jt.EMPTY_BYTE_STRING=new Jt("");var fR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dn(i){if(ft(!!i),typeof i=="string"){let t=0,e=fR.exec(i);if(ft(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:vt(i.seconds),nanos:vt(i.nanos)}}function vt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Vn(i){return typeof i=="string"?Jt.fromBase64String(i):Jt.fromUint8Array(i)}function $f(i){var t,e;return((e=(((t=i?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function qf(i){let t=i.mapValue.fields.__previous_value__;return $f(t)?qf(t):t}function io(i){let t=dn(i.mapValue.fields.__local_write_time__.timestampValue);return new Vt(t.seconds,t.nanos)}var bh=class{constructor(t,e,n,r,s,o,c,l,d){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d}},rc=class i{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new i("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof i&&t.projectId===this.projectId&&t.database===this.database}};var Ya={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function fi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?$f(i)?4:Nv(i)?9007199254740991:10:z()}function qe(i,t){if(i===t)return!0;let e=fi(i);if(e!==fi(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return io(i).isEqual(io(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=dn(r.timestampValue),c=dn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(r,s){return Vn(r.bytesValue).isEqual(Vn(s.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(r,s){return vt(r.geoPointValue.latitude)===vt(s.geoPointValue.latitude)&&vt(r.geoPointValue.longitude)===vt(s.geoPointValue.longitude)}(i,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return vt(r.integerValue)===vt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=vt(r.doubleValue),c=vt(s.doubleValue);return o===c?no(o)===no(c):isNaN(o)&&isNaN(c)}return!1}(i,t);case 9:return mr(i.arrayValue.values||[],t.arrayValue.values||[],qe);case 10:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(nv(o)!==nv(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!qe(o[l],c[l])))return!1;return!0}(i,t);default:return z()}}function ro(i,t){return(i.values||[]).find(e=>qe(e,t))!==void 0}function pr(i,t){if(i===t)return 0;let e=fi(i),n=fi(t);if(e!==n)return st(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return st(i.booleanValue,t.booleanValue);case 2:return function(s,o){let c=vt(s.integerValue||s.doubleValue),l=vt(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(i,t);case 3:return iv(i.timestampValue,t.timestampValue);case 4:return iv(io(i),io(t));case 5:return st(i.stringValue,t.stringValue);case 6:return function(s,o){let c=Vn(s),l=Vn(o);return c.compareTo(l)}(i.bytesValue,t.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let d=0;d<c.length&&d<l.length;d++){let f=st(c[d],l[d]);if(f!==0)return f}return st(c.length,l.length)}(i.referenceValue,t.referenceValue);case 8:return function(s,o){let c=st(vt(s.latitude),vt(o.latitude));return c!==0?c:st(vt(s.longitude),vt(o.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return function(s,o){let c=s.values||[],l=o.values||[];for(let d=0;d<c.length&&d<l.length;++d){let f=pr(c[d],l[d]);if(f)return f}return st(c.length,l.length)}(i.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Ya.mapValue&&o===Ya.mapValue)return 0;if(s===Ya.mapValue)return 1;if(o===Ya.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),d=o.fields||{},f=Object.keys(d);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){let v=st(l[p],f[p]);if(v!==0)return v;let S=pr(c[l[p]],d[f[p]]);if(S!==0)return S}return st(l.length,f.length)}(i.mapValue,t.mapValue);default:throw z()}}function iv(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return st(i,t);let e=dn(i),n=dn(t),r=st(e.seconds,n.seconds);return r!==0?r:st(e.nanos,n.nanos)}function gr(i){return _h(i)}function _h(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(e){let n=dn(e);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(e){return Vn(e).toBase64()}(i.bytesValue):"referenceValue"in i?function(e){return j.fromName(e).toString()}(i.referenceValue):"geoPointValue"in i?function(e){return`geo(${e.latitude},${e.longitude})`}(i.geoPointValue):"arrayValue"in i?function(e){let n="[",r=!0;for(let s of e.values||[])r?r=!1:n+=",",n+=_h(s);return n+"]"}(i.arrayValue):"mapValue"in i?function(e){let n=Object.keys(e.fields||{}).sort(),r="{",s=!0;for(let o of n)s?s=!1:r+=",",r+=`${o}:${_h(e.fields[o])}`;return r+"}"}(i.mapValue):z()}function rv(i,t){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${t.path.canonicalString()}`}}function vh(i){return!!i&&"integerValue"in i}function Hf(i){return!!i&&"arrayValue"in i}function sv(i){return!!i&&"nullValue"in i}function ov(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Xa(i){return!!i&&"mapValue"in i}function Zs(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){let t={mapValue:{fields:{}}};return _i(i.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Zs(n)),t}if(i.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Zs(i.arrayValue.values[e]);return t}return Object.assign({},i)}function Nv(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var de=class i{constructor(t){this.value=t}static empty(){return new i({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Xa(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Zs(e)}setAll(t){let e=he.emptyPath(),n={},r=[];t.forEach((o,c)=>{if(!e.isImmediateParentOf(c)){let l=this.getFieldsMap(e);this.applyChanges(l,n,r),n={},r=[],e=c.popLast()}o?n[c.lastSegment()]=Zs(o):r.push(c.lastSegment())});let s=this.getFieldsMap(e);this.applyChanges(s,n,r)}delete(t){let e=this.field(t.popLast());Xa(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return qe(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];Xa(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){_i(e,(r,s)=>t[r]=s);for(let r of n)delete t[r]}clone(){return new i(Zs(this.value))}};function Mv(i){let t=[];return _i(i.fields,(e,n)=>{let r=new he([e]);if(Xa(n)){let s=Mv(n.mapValue).fields;if(s.length===0)t.push(r);else for(let o of s)t.push(r.child(o))}else t.push(r)}),new ye(t)}var xe=class i{constructor(t,e,n,r,s,o,c){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(t){return new i(t,0,G.min(),G.min(),G.min(),de.empty(),0)}static newFoundDocument(t,e,n,r){return new i(t,1,e,G.min(),n,r,0)}static newNoDocument(t,e){return new i(t,2,e,G.min(),G.min(),de.empty(),0)}static newUnknownDocument(t,e){return new i(t,3,e,G.min(),G.min(),de.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=de.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=de.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof i&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new i(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var br=class{constructor(t,e){this.position=t,this.inclusive=e}};function av(i,t,e){let n=0;for(let r=0;r<i.position.length;r++){let s=t[r],o=i.position[r];if(s.field.isKeyField()?n=j.comparator(j.fromName(o.referenceValue),e.key):n=pr(o,e.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function cv(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!qe(i.position[e],t.position[e]))return!1;return!0}var _r=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function mR(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}var sc=class{},Rt=class i extends sc{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new wh(t,e,n):e==="array-contains"?new Th(t,n):e==="in"?new Ah(t,n):e==="not-in"?new Sh(t,n):e==="array-contains-any"?new Ch(t,n):new i(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new Ih(t,n):new Eh(t,n)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(pr(e,this.value)):e!==null&&fi(this.value)===fi(e)&&this.matchesComparison(pr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},De=class i extends sc{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new i(t,e)}matches(t){return Lv(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Lv(i){return i.op==="and"}function Fv(i){return pR(i)&&Lv(i)}function pR(i){for(let t of i.filters)if(t instanceof De)return!1;return!0}function yh(i){if(i instanceof Rt)return i.field.canonicalString()+i.op.toString()+gr(i.value);if(Fv(i))return i.filters.map(t=>yh(t)).join(",");{let t=i.filters.map(e=>yh(e)).join(",");return`${i.op}(${t})`}}function Vv(i,t){return i instanceof Rt?function(n,r){return r instanceof Rt&&n.op===r.op&&n.field.isEqual(r.field)&&qe(n.value,r.value)}(i,t):i instanceof De?function(n,r){return r instanceof De&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,o,c)=>s&&Vv(o,r.filters[c]),!0):!1}(i,t):void z()}function Uv(i){return i instanceof Rt?function(e){return`${e.field.canonicalString()} ${e.op} ${gr(e.value)}`}(i):i instanceof De?function(e){return e.op.toString()+" {"+e.getFilters().map(Uv).join(" ,")+"}"}(i):"Filter"}var wh=class extends Rt{constructor(t,e,n){super(t,e,n),this.key=j.fromName(n.referenceValue)}matches(t){let e=j.comparator(t.key,this.key);return this.matchesComparison(e)}},Ih=class extends Rt{constructor(t,e){super(t,"in",e),this.keys=jv("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},Eh=class extends Rt{constructor(t,e){super(t,"not-in",e),this.keys=jv("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function jv(i,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(n=>j.fromName(n.referenceValue))}var Th=class extends Rt{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return Hf(e)&&ro(e.arrayValue,this.value)}},Ah=class extends Rt{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&ro(this.value.arrayValue,e)}},Sh=class extends Rt{constructor(t,e){super(t,"not-in",e)}matches(t){if(ro(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!ro(this.value.arrayValue,e)}},Ch=class extends Rt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!Hf(e)||!e.arrayValue.values)&&e.arrayValue.values.some(n=>ro(this.value.arrayValue,n))}};var Rh=class{constructor(t,e=null,n=[],r=[],s=null,o=null,c=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function lv(i,t=null,e=[],n=[],r=null,s=null,o=null){return new Rh(i,t,e,n,r,s,o)}function Wf(i){let t=W(i);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(n=>yh(n)).join(","),e+="|ob:",e+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Pc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>gr(n)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>gr(n)).join(",")),t.ue=e}return t.ue}function Gf(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!mR(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!Vv(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!cv(i.startAt,t.startAt)&&cv(i.endAt,t.endAt)}function xh(i){return j.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}var mi=class{constructor(t,e=null,n=[],r=[],s=null,o="F",c=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function gR(i,t,e,n,r,s,o,c){return new mi(i,t,e,n,r,s,o,c)}function Kf(i){return new mi(i)}function uv(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Bv(i){return i.collectionGroup!==null}function Js(i){let t=W(i);if(t.ce===null){t.ce=[];let e=new Set;for(let s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Wt(he.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new _r(s,n))}),e.has(he.keyField().canonicalString())||t.ce.push(new _r(he.keyField(),n))}return t.ce}function ze(i){let t=W(i);return t.le||(t.le=bR(t,Js(i))),t.le}function bR(i,t){if(i.limitType==="F")return lv(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new _r(r.field,s)});let e=i.endAt?new br(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new br(i.startAt.position,i.startAt.inclusive):null;return lv(i.path,i.collectionGroup,t,i.filters,i.limit,e,n)}}function Dh(i,t){let e=i.filters.concat([t]);return new mi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),e,i.limit,i.limitType,i.startAt,i.endAt)}function kh(i,t,e){return new mi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function Oc(i,t){return Gf(ze(i),ze(t))&&i.limitType===t.limitType}function zv(i){return`${Wf(ze(i))}|lt:${i.limitType}`}function ar(i){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>Uv(r)).join(", ")}]`),Pc(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gr(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gr(r)).join(",")),`Target(${n})`}(ze(i))}; limitType=${i.limitType})`}function Nc(i,t){return t.isFoundDocument()&&function(n,r){let s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):j.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(i,t)&&function(n,r){for(let s of Js(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(i,t)&&function(n,r){for(let s of n.filters)if(!s.matches(r))return!1;return!0}(i,t)&&function(n,r){return!(n.startAt&&!function(o,c,l){let d=av(o,c,l);return o.inclusive?d<=0:d<0}(n.startAt,Js(n),r)||n.endAt&&!function(o,c,l){let d=av(o,c,l);return o.inclusive?d>=0:d>0}(n.endAt,Js(n),r))}(i,t)}function _R(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function $v(i){return(t,e)=>{let n=!1;for(let r of Js(i)){let s=vR(r,t,e);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function vR(i,t,e){let n=i.field.isKeyField()?j.comparator(t.key,e.key):function(s,o,c){let l=o.data.field(s),d=c.data.field(s);return l!==null&&d!==null?pr(l,d):z()}(i.field,t,e);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return z()}}var Un=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(let[r,s]of n)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){let n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return n.length===1?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){_i(this.inner,(e,n)=>{for(let[r,s]of n)t(r,s)})}isEmpty(){return Ov(this.inner)}size(){return this.innerSize}};var yR=new yt(j.comparator);function hn(){return yR}var qv=new yt(j.comparator);function Xs(...i){let t=qv;for(let e of i)t=t.insert(e.key,e);return t}function Hv(i){let t=qv;return i.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ci(){return to()}function Wv(){return to()}function to(){return new Un(i=>i.toString(),(i,t)=>i.isEqual(t))}var wR=new yt(j.comparator),IR=new Wt(j.comparator);function J(...i){let t=IR;for(let e of i)t=t.add(e);return t}var ER=new Wt(st);function TR(){return ER}function Gv(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:no(t)?"-0":t}}function Kv(i){return{integerValue:""+i}}function AR(i,t){return lR(t)?Kv(t):Gv(i,t)}var vr=class{constructor(){this._=void 0}};function SR(i,t,e){return i instanceof yr?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&$f(s)&&(s=qf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):i instanceof pi?Qv(i,t):i instanceof gi?Xv(i,t):function(r,s){let o=Yv(r,s),c=dv(o)+dv(r.Pe);return vh(o)&&vh(r.Pe)?Kv(c):Gv(r.serializer,c)}(i,t)}function CR(i,t,e){return i instanceof pi?Qv(i,t):i instanceof gi?Xv(i,t):e}function Yv(i,t){return i instanceof wr?function(n){return vh(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}var yr=class extends vr{},pi=class extends vr{constructor(t){super(),this.elements=t}};function Qv(i,t){let e=Zv(t);for(let n of i.elements)e.some(r=>qe(r,n))||e.push(n);return{arrayValue:{values:e}}}var gi=class extends vr{constructor(t){super(),this.elements=t}};function Xv(i,t){let e=Zv(t);for(let n of i.elements)e=e.filter(r=>!qe(r,n));return{arrayValue:{values:e}}}var wr=class extends vr{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function dv(i){return vt(i.integerValue||i.doubleValue)}function Zv(i){return Hf(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function RR(i,t){return i.field.isEqual(t.field)&&function(n,r){return n instanceof pi&&r instanceof pi||n instanceof gi&&r instanceof gi?mr(n.elements,r.elements,qe):n instanceof wr&&r instanceof wr?qe(n.Pe,r.Pe):n instanceof yr&&r instanceof yr}(i.transform,t.transform)}var Ph=class{constructor(t,e){this.version=t,this.transformResults=e}},ln=class i{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new i}static exists(t){return new i(void 0,t)}static updateTime(t){return new i(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Za(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}var Ir=class{};function Jv(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new so(i.key,ln.none()):new bi(i.key,i.data,ln.none());{let e=i.data,n=de.empty(),r=new Wt(he.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new He(i.key,n,new ye(r.toArray()),ln.none())}}function xR(i,t,e){i instanceof bi?function(r,s,o){let c=r.value.clone(),l=fv(r.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(i,t,e):i instanceof He?function(r,s,o){if(!Za(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=fv(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(ty(r)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(i,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function eo(i,t,e,n){return i instanceof bi?function(s,o,c,l){if(!Za(s.precondition,o))return c;let d=s.value.clone(),f=mv(s.fieldTransforms,l,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(i,t,e,n):i instanceof He?function(s,o,c,l){if(!Za(s.precondition,o))return c;let d=mv(s.fieldTransforms,l,o),f=o.data;return f.setAll(ty(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(i,t,e,n):function(s,o,c){return Za(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(i,t,e)}function DR(i,t){let e=null;for(let n of i.fieldTransforms){let r=t.data.field(n.field),s=Yv(n.transform,r||null);s!=null&&(e===null&&(e=de.empty()),e.set(n.field,s))}return e||null}function hv(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&mr(n,r,(s,o)=>RR(s,o))}(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}var bi=class extends Ir{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},He=class extends Ir{constructor(t,e,n,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function ty(i){let t=new Map;return i.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let n=i.data.field(e);t.set(e,n)}}),t}function fv(i,t,e){let n=new Map;ft(i.length===e.length);for(let r=0;r<e.length;r++){let s=i[r],o=s.transform,c=t.data.field(s.field);n.set(s.field,CR(o,c,e[r]))}return n}function mv(i,t,e){let n=new Map;for(let r of i){let s=r.transform,o=e.data.field(r.field);n.set(r.field,SR(s,o,t))}return n}var so=class extends Ir{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Oh=class extends Ir{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Nh=class{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){let n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(t.key)&&xR(s,t,n[r])}}applyToLocalView(t,e){for(let n of this.baseMutations)n.key.isEqual(t.key)&&(e=eo(n,t,e,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(t.key)&&(e=eo(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let n=Wv();return this.mutations.forEach(r=>{let s=t.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=e.has(r.key)?null:c;let l=Jv(o,c);l!==null&&n.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(G.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),J())}isEqual(t){return this.batchId===t.batchId&&mr(this.mutations,t.mutations,(e,n)=>hv(e,n))&&mr(this.baseMutations,t.baseMutations,(e,n)=>hv(e,n))}},Mh=class i{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){ft(t.mutations.length===n.length);let r=function(){return wR}(),s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new i(t,e,n,r)}};var Lh=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Fh=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var St,nt;function kR(i){switch(i){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function ey(i){if(i===void 0)return un("GRPC error has no .code"),x.UNKNOWN;switch(i){case St.OK:return x.OK;case St.CANCELLED:return x.CANCELLED;case St.UNKNOWN:return x.UNKNOWN;case St.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case St.INTERNAL:return x.INTERNAL;case St.UNAVAILABLE:return x.UNAVAILABLE;case St.UNAUTHENTICATED:return x.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case St.NOT_FOUND:return x.NOT_FOUND;case St.ALREADY_EXISTS:return x.ALREADY_EXISTS;case St.PERMISSION_DENIED:return x.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case St.ABORTED:return x.ABORTED;case St.OUT_OF_RANGE:return x.OUT_OF_RANGE;case St.UNIMPLEMENTED:return x.UNIMPLEMENTED;case St.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(nt=St||(St={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";var pv=null;function PR(){return new TextEncoder}var OR=new Ln([4294967295,4294967295],0);function gv(i){let t=PR().encode(i),e=new Xd;return e.update(t),new Uint8Array(e.digest())}function bv(i){let t=new DataView(i.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ln([e,n],0),new Ln([r,s],0)]}var Vh=class i{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new li(`Invalid padding: ${e}`);if(n<0)throw new li(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new li(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new li(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Ln.fromNumber(this.Ie)}Ee(t,e,n){let r=t.add(e.multiply(Ln.fromNumber(n)));return r.compare(OR)===1&&(r=new Ln([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let e=gv(t),[n,r]=bv(e);for(let s=0;s<this.hashCount;s++){let o=this.Ee(n,r,s);if(!this.de(o))return!1}return!0}static create(t,e,n){let r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new i(s,r,e);return n.forEach(c=>o.insert(c)),o}insert(t){if(this.Ie===0)return;let e=gv(t),[n,r]=bv(e);for(let s=0;s<this.hashCount;s++){let o=this.Ee(n,r,s);this.Ae(o)}}Ae(t){let e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}},li=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var oc=class i{constructor(t,e,n,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,n){let r=new Map;return r.set(t,oo.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new i(G.min(),r,new yt(st),hn(),J())}},oo=class i{constructor(t,e,n,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new i(n,e,J(),J(),J())}};var dr=class{constructor(t,e,n,r){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=r}},ac=class{constructor(t,e){this.targetId=t,this.me=e}},cc=class{constructor(t,e,n=Jt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}},lc=class{constructor(){this.fe=0,this.ge=vv(),this.pe=Jt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=J(),e=J(),n=J();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:z()}}),new oo(this.pe,this.ye,t,e,n)}ve(){this.we=!1,this.ge=vv()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ft(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Uh=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=hn(),this.qe=_v(),this.Qe=new yt(st)}Ke(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{let n=this.Ge(e);switch(t.state){case 0:this.ze(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),n.De(t.resumeToken));break;default:z()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((n,r)=>{this.ze(r)&&e(r)})}He(t){let e=t.targetId,n=t.me.count,r=this.Je(e);if(r){let s=r.target;if(xh(s))if(n===0){let o=new j(s.path);this.Ue(e,o,xe.newNoDocument(o,G.min()))}else ft(n===1);else{let o=this.Ye(e);if(o!==n){let c=this.Ze(t),l=c?this.Xe(c,t,o):1;if(l!==0){this.je(e);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,d)}pv?.et(function(f,p,v,S,D){var P,k,$,Y,et,mt;let Gt={localCacheCount:f,existenceFilterCount:p.count,databaseId:v.database,projectId:v.projectId},ct=p.unchangedNames;return ct&&(Gt.bloomFilter={applied:D===0,hashCount:(P=ct?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(Y=($=(k=ct?.bits)===null||k===void 0?void 0:k.bitmap)===null||$===void 0?void 0:$.length)!==null&&Y!==void 0?Y:0,padding:(mt=(et=ct?.bits)===null||et===void 0?void 0:et.padding)!==null&&mt!==void 0?mt:0,mightContain:I=>{var g;return(g=S?.mightContain(I))!==null&&g!==void 0&&g}}),Gt}(o,t.me,this.Le.tt(),c,l))}}}}Ze(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=e,o,c;try{o=Vn(n).toUint8Array()}catch(l){if(l instanceof ic)return fr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Vh(o,r,s)}catch(l){return fr(l instanceof li?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(t,e,n){return e.me.count===n-this.nt(t,e.targetId)?0:2}nt(t,e){let n=this.Le.getRemoteKeysForTarget(e),r=0;return n.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(c)||(this.Ue(e,s,null),r++)}),r}rt(t){let e=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&xh(c.target)){let l=new j(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,xe.newNoDocument(l,t))}s.be&&(e.set(o,s.Ce()),s.ve())}});let n=J();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let d=this.Je(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));let r=new oc(t,e,this.Qe,this.ke,n);return this.ke=hn(),this.qe=_v(),this.Qe=new yt(st),r}$e(t,e){if(!this.ze(t))return;let n=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,n){if(!this.ze(t))return;let r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ye(t){let e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new lc,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Wt(st),this.qe=this.qe.insert(t,e)),e}ze(t){let e=this.Je(t)!==null;return e||U("WatchChangeAggregator","Detected inactive target",t),e}Je(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new lc),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function _v(){return new yt(j.comparator)}function vv(){return new yt(j.comparator)}var NR={asc:"ASCENDING",desc:"DESCENDING"},MR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LR={and:"AND",or:"OR"},jh=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function Bh(i,t){return i.useProto3Json||Pc(t)?t:{value:t}}function uc(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ny(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function FR(i,t){return uc(i,t.toTimestamp())}function $e(i){return ft(!!i),G.fromTimestamp(function(e){let n=dn(e);return new Vt(n.seconds,n.nanos)}(i))}function Yf(i,t){return zh(i,t).canonicalString()}function zh(i,t){let e=function(r){return new bt(["projects",r.projectId,"databases",r.database])}(i).child("documents");return t===void 0?e:e.child(t)}function iy(i){let t=bt.fromString(i);return ft(cy(t)),t}function $h(i,t){return Yf(i.databaseId,t.path)}function rh(i,t){let e=iy(t);if(e.get(1)!==i.databaseId.projectId)throw new F(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new F(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new j(sy(e))}function ry(i,t){return Yf(i.databaseId,t)}function VR(i){let t=iy(i);return t.length===4?bt.emptyPath():sy(t)}function qh(i){return new bt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function sy(i){return ft(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function yv(i,t,e){return{name:$h(i,t),fields:e.value.mapValue.fields}}function UR(i,t){let e;if("targetChange"in t){t.targetChange;let n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:z()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(ft(f===void 0||typeof f=="string"),Jt.fromBase64String(f||"")):(ft(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Jt.fromUint8Array(f||new Uint8Array))}(i,t.targetChange.resumeToken),o=t.targetChange.cause,c=o&&function(d){let f=d.code===void 0?x.UNKNOWN:ey(d.code);return new F(f,d.message||"")}(o);e=new cc(n,r,s,c||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let r=rh(i,n.document.name),s=$e(n.document.updateTime),o=n.document.createTime?$e(n.document.createTime):G.min(),c=new de({mapValue:{fields:n.document.fields}}),l=xe.newFoundDocument(r,s,o,c),d=n.targetIds||[],f=n.removedTargetIds||[];e=new dr(d,f,l.key,l)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let r=rh(i,n.document),s=n.readTime?$e(n.readTime):G.min(),o=xe.newNoDocument(r,s),c=n.removedTargetIds||[];e=new dr([],c,o.key,o)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let r=rh(i,n.document),s=n.removedTargetIds||[];e=new dr([],s,r,null)}else{if(!("filter"in t))return z();{t.filter;let n=t.filter;n.targetId;let{count:r=0,unchangedNames:s}=n,o=new Fh(r,s),c=n.targetId;e=new ac(c,o)}}return e}function jR(i,t){let e;if(t instanceof bi)e={update:yv(i,t.key,t.value)};else if(t instanceof so)e={delete:$h(i,t.key)};else if(t instanceof He)e={update:yv(i,t.key,t.data),updateMask:YR(t.fieldMask)};else{if(!(t instanceof Oh))return z();e={verify:$h(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(n=>function(s,o){let c=o.transform;if(c instanceof yr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof pi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof gi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof wr)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw z()}(0,n))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:FR(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:z()}(i,t.precondition)),e}function BR(i,t){return i&&i.length>0?(ft(t!==void 0),i.map(e=>function(r,s){let o=r.updateTime?$e(r.updateTime):$e(s);return o.isEqual(G.min())&&(o=$e(s)),new Ph(o,r.transformResults||[])}(e,t))):[]}function zR(i,t){return{documents:[ry(i,t.path)]}}function $R(i,t){let e={structuredQuery:{}},n=t.path,r;t.collectionGroup!==null?(r=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=ry(i,r);let s=function(d){if(d.length!==0)return ay(De.create(d,"and"))}(t.filters);s&&(e.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(v){return{field:cr(v.field),direction:WR(v.dir)}}(f))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);let c=Bh(i,t.limit);return c!==null&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(t.endAt)),{_t:e,parent:r}}function qR(i){let t=VR(i.parent),e=i.structuredQuery,n=e.from?e.from.length:0,r=null;if(n>0){ft(n===1);let f=e.from[0];f.allDescendants?r=f.collectionId:t=t.child(f.collectionId)}let s=[];e.where&&(s=function(p){let v=oy(p);return v instanceof De&&Fv(v)?v.getFilters():[v]}(e.where));let o=[];e.orderBy&&(o=function(p){return p.map(v=>function(D){return new _r(lr(D.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(v))}(e.orderBy));let c=null;e.limit&&(c=function(p){let v;return v=typeof p=="object"?p.value:p,Pc(v)?null:v}(e.limit));let l=null;e.startAt&&(l=function(p){let v=!!p.before,S=p.values||[];return new br(S,v)}(e.startAt));let d=null;return e.endAt&&(d=function(p){let v=!p.before,S=p.values||[];return new br(S,v)}(e.endAt)),gR(t,r,o,s,c,"F",l,d)}function HR(i,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function oy(i){return i.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let n=lr(e.unaryFilter.field);return Rt.create(n,"==",{doubleValue:NaN});case"IS_NULL":let r=lr(e.unaryFilter.field);return Rt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=lr(e.unaryFilter.field);return Rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=lr(e.unaryFilter.field);return Rt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(i):i.fieldFilter!==void 0?function(e){return Rt.create(lr(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(e.fieldFilter.op),e.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(e){return De.create(e.compositeFilter.filters.map(n=>oy(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return z()}}(e.compositeFilter.op))}(i):z()}function WR(i){return NR[i]}function GR(i){return MR[i]}function KR(i){return LR[i]}function cr(i){return{fieldPath:i.canonicalString()}}function lr(i){return he.fromServerFormat(i.fieldPath)}function ay(i){return i instanceof Rt?function(e){if(e.op==="=="){if(ov(e.value))return{unaryFilter:{field:cr(e.field),op:"IS_NAN"}};if(sv(e.value))return{unaryFilter:{field:cr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ov(e.value))return{unaryFilter:{field:cr(e.field),op:"IS_NOT_NAN"}};if(sv(e.value))return{unaryFilter:{field:cr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cr(e.field),op:GR(e.op),value:e.value}}}(i):i instanceof De?function(e){let n=e.getFilters().map(r=>ay(r));return n.length===1?n[0]:{compositeFilter:{op:KR(e.op),filters:n}}}(i):z()}function YR(i){let t=[];return i.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function cy(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}var ao=class i{constructor(t,e,n,r,s=G.min(),o=G.min(),c=Jt.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(t){return new i(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var Hh=class{constructor(t){this.ct=t}};function QR(i){let t=qR({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?kh(t,t.limit,"L"):t}var dc=class{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(vt(t.integerValue));else if("doubleValue"in t){let n=vt(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),no(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){let n=t.timestampValue;this.Et(e,20),typeof n=="string"&&(n=dn(n)),e.At(`${n.seconds||""}`),e.dt(n.nanos||0)}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(Vn(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){let n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?Nv(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):z()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){let n=t.fields||{};this.Et(e,55);for(let r of Object.keys(n))this.Rt(r,e),this.It(n[r],e)}wt(t,e){let n=t.values||[];this.Et(e,50);for(let r of n)this.It(r,e)}gt(t,e){this.Et(e,37),j.fromName(t).path.forEach(n=>{this.Et(e,60),this.St(n,e)})}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}};dc.bt=new dc;var Wh=class{constructor(){this._n=new Gh}addToCollectionParentIndex(t,e){return this._n.add(e),N.resolve()}getCollectionParents(t,e){return N.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return N.resolve()}deleteFieldIndex(t,e){return N.resolve()}deleteAllFieldIndexes(t){return N.resolve()}createTargetIndexes(t,e){return N.resolve()}getDocumentsMatchingTarget(t,e){return N.resolve(null)}getIndexType(t,e){return N.resolve(0)}getFieldIndexes(t,e){return N.resolve([])}getNextCollectionGroupToUpdate(t){return N.resolve(null)}getMinOffset(t,e){return N.resolve(hi.min())}getMinOffsetFromCollectionGroup(t,e){return N.resolve(hi.min())}updateCollectionGroup(t,e,n){return N.resolve()}updateIndexEntries(t,e){return N.resolve()}},Gh=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Wt(bt.comparator),s=!r.has(n);return this.index[e]=r.add(n),s}has(t){let e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new Wt(bt.comparator)).toArray()}};var AN=new Uint8Array(0);var je=class i{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new i(t,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};je.DEFAULT_COLLECTION_PERCENTILE=10,je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,je.DEFAULT=new je(41943040,je.DEFAULT_COLLECTION_PERCENTILE,je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),je.DISABLED=new je(-1,0,0);var co=class i{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new i(0)}static Ln(){return new i(-1)}};var Kh=class{constructor(){this.changes=new Un(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,xe.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let n=this.changes.get(e);return n!==void 0?N.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var Yh=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var Qh=class{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(n=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(n!==null&&eo(n.mutation,r,ye.empty(),Vt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.getLocalViewOfDocuments(t,n,J()).next(()=>n))}getLocalViewOfDocuments(t,e,n=J()){let r=ci();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,n).next(s=>{let o=Xs();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){let n=ci();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,J()))}populateOverlays(t,e,n){let r=[];return n.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,c)=>{e.set(o,c)})})}computeViews(t,e,n,r){let s=hn(),o=to(),c=function(){return to()}();return e.forEach((l,d)=>{let f=n.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof He)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),eo(f.mutation,d,f.mutation.getFieldMask(),Vt.now())):o.set(d.key,ye.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((d,f)=>o.set(d,f)),e.forEach((d,f)=>{var p;return c.set(d,new Yh(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(t,e){let n=to(),r=new yt((o,c)=>o-c),s=J();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(let c of o)c.keys().forEach(l=>{let d=e.get(l);if(d===null)return;let f=n.get(l)||ye.empty();f=c.applyToLocalView(d,f),n.set(l,f);let p=(r.get(c.batchId)||J()).add(l);r=r.insert(c.batchId,p)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,f=l.value,p=Wv();f.forEach(v=>{if(!s.has(v)){let S=Jv(e.get(v),n.get(v));S!==null&&p.set(v,S),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(t,d,p))}return N.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,e,n,r){return function(o){return j.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Bv(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-s.size):N.resolve(ci()),c=-1,l=s;return o.next(d=>N.forEach(d,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(f)?N.resolve():this.remoteDocumentCache.getEntry(t,f).next(v=>{l=l.insert(f,v)}))).next(()=>this.populateOverlays(t,d,s)).next(()=>this.computeViews(t,l,d,J())).next(f=>({batchId:c,changes:Hv(f)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new j(e)).next(n=>{let r=Xs();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){let s=e.collectionGroup,o=Xs();return this.indexManager.getCollectionParents(t,s).next(c=>N.forEach(c,l=>{let d=function(p,v){return new mi(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(e,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,d,n,r).next(f=>{f.forEach((p,v)=>{o=o.insert(p,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s,r))).next(o=>{s.forEach((l,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,xe.newInvalidDocument(f)))});let c=Xs();return o.forEach((l,d)=>{let f=s.get(l);f!==void 0&&eo(f.mutation,d,ye.empty(),Vt.now()),Nc(e,d)&&(c=c.insert(l,d))}),c})}};var Xh=class{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return N.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:$e(r.createTime)}}(e)),N.resolve()}getNamedQuery(t,e){return N.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(r){return{name:r.name,query:QR(r.bundledQuery),readTime:$e(r.readTime)}}(e)),N.resolve()}};var Zh=class{constructor(){this.overlays=new yt(j.comparator),this.hr=new Map}getOverlay(t,e){return N.resolve(this.overlays.get(e))}getOverlays(t,e){let n=ci();return N.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((r,s)=>{this.ht(t,e,s)}),N.resolve()}removeOverlaysForBatchId(t,e,n){let r=this.hr.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(n)),N.resolve()}getOverlaysForCollection(t,e,n){let r=ci(),s=e.length+1,o=new j(e.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!e.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>n&&r.set(l.getKey(),l)}return N.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let s=new yt((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===e&&d.largestBatchId>n){let f=s.get(d.largestBatchId);f===null&&(f=ci(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=ci(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=r)););return N.resolve(c)}ht(t,e,n){let r=this.overlays.get(n.key);if(r!==null){let o=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new Lh(e,n));let s=this.hr.get(e);s===void 0&&(s=J(),this.hr.set(e,s)),this.hr.set(e,s.add(n.key))}};var lo=class{constructor(){this.Pr=new Wt(Ct.Ir),this.Tr=new Wt(Ct.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){let n=new Ct(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach(n=>this.addReference(n,e))}removeReference(t,e){this.Ar(new Ct(t,e))}Rr(t,e){t.forEach(n=>this.removeReference(n,e))}Vr(t){let e=new j(new bt([])),n=new Ct(e,t),r=new Ct(e,t+1),s=[];return this.Tr.forEachInRange([n,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){let e=new j(new bt([])),n=new Ct(e,t),r=new Ct(e,t+1),s=J();return this.Tr.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(t){let e=new Ct(t,0),n=this.Pr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}},Ct=class{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return j.comparator(t.key,e.key)||st(t.pr,e.pr)}static Er(t,e){return st(t.pr,e.pr)||j.comparator(t.key,e.key)}};var Jh=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new Wt(Ct.Ir)}checkEmpty(t){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,r){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Nh(s,e,n,r);this.mutationQueue.push(o);for(let c of r)this.wr=this.wr.add(new Ct(c.key,s)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return N.resolve(o)}lookupMutationBatch(t,e){return N.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){let n=e+1,r=this.br(n),s=r<0?0:r;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let n=new Ct(e,0),r=new Ct(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([n,r],o=>{let c=this.Sr(o.pr);s.push(c)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Wt(st);return e.forEach(r=>{let s=new Ct(r,0),o=new Ct(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],c=>{n=n.add(c.pr)})}),N.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){let n=e.path,r=n.length+1,s=n;j.isDocumentKey(s)||(s=s.child(""));let o=new Ct(new j(s),0),c=new Wt(st);return this.wr.forEachWhile(l=>{let d=l.key.path;return!!n.isPrefixOf(d)&&(d.length===r&&(c=c.add(l.pr)),!0)},o),N.resolve(this.Dr(c))}Dr(t){let e=[];return t.forEach(n=>{let r=this.Sr(n);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){ft(this.Cr(e.batchId,"removed")===0),this.mutationQueue.shift();let n=this.wr;return N.forEach(e.mutations,r=>{let s=new Ct(r.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=n})}Mn(t){}containsKey(t,e){let n=new Ct(e,0),r=this.wr.firstAfterOrEqual(n);return N.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,N.resolve()}Cr(t,e){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){let e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var tf=class{constructor(t){this.vr=t,this.docs=function(){return new yt(j.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let n=e.key,r=this.docs.get(n),s=r?r.size:0,o=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let n=this.docs.get(e);return N.resolve(n?n.document.mutableCopy():xe.newInvalidDocument(e))}getEntries(t,e){let n=hn();return e.forEach(r=>{let s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():xe.newInvalidDocument(r))}),N.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let s=hn(),o=e.path,c=new j(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:f}}=l.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||oR(sR(f),n)<=0||(r.has(f.key)||Nc(e,f))&&(s=s.insert(f.key,f.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(t,e,n,r){z()}Fr(t,e){return N.forEach(this.docs,n=>e(n))}newChangeBuffer(t){return new ef(this)}getSize(t){return N.resolve(this.size)}},ef=class extends Kh{constructor(t){super(),this.ar=t}applyChanges(t){let e=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(n)}),N.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}};var nf=class{constructor(t){this.persistence=t,this.Mr=new Un(e=>Wf(e),Gf),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Or=0,this.Nr=new lo,this.targetCount=0,this.Lr=co.Nn()}forEachTarget(t,e){return this.Mr.forEach((n,r)=>e(r)),N.resolve()}getLastRemoteSnapshotVersion(t){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return N.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),N.resolve()}qn(t){this.Mr.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.Lr=new co(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,N.resolve()}updateTargetData(t,e){return this.qn(e),N.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,N.resolve()}removeTargets(t,e,n){let r=0,s=[];return this.Mr.forEach((o,c)=>{c.sequenceNumber<=e&&n.get(c.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,c.targetId)),r++)}),N.waitFor(s).next(()=>r)}getTargetCount(t){return N.resolve(this.targetCount)}getTargetData(t,e){let n=this.Mr.get(e)||null;return N.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),N.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);let r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),N.resolve()}getMatchingKeysForTargetId(t,e){let n=this.Nr.gr(e);return N.resolve(n)}containsKey(t,e){return N.resolve(this.Nr.containsKey(e))}};var rf=class{constructor(t,e){this.Br={},this.overlays={},this.kr=new Pv(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new nf(this),this.indexManager=new Wh,this.remoteDocumentCache=function(r){return new tf(r)}(n=>this.referenceDelegate.Kr(n)),this.serializer=new Hh(e),this.$r=new Xh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Zh,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Br[t.toKey()];return n||(n=new Jh(e,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){U("MemoryPersistence","Starting transaction:",t);let r=new sf(this.kr.next());return this.referenceDelegate.Ur(),n(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(t,e){return N.or(Object.values(this.Br).map(n=>()=>n.containsKey(t,e)))}},sf=class extends gh{constructor(t){super(),this.currentSequenceNumber=t}},of=class i{constructor(t){this.persistence=t,this.zr=new lo,this.jr=null}static Hr(t){return new i(t)}get Jr(){if(this.jr)return this.jr;throw z()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),N.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),N.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),N.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>n.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Jr,n=>{let r=j.fromPath(n);return this.Yr(t,r).next(s=>{s||e.removeEntry(r,G.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(n=>{n?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return N.or([()=>N.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}};var af=class i{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=r}static Ki(t,e){let n=J(),r=J();for(let s of e.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new i(t,e.fromCache,n,r)}};var cf=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var lf=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Kb()?8:cR(Dt())>0?6:4}()}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,r){let s={result:null};return this.ji(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,e,r,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new cf;return this.Ji(t,e,o).next(c=>{if(s.result=c,this.Ui)return this.Yi(t,e,o,c.size)})}).next(()=>s.result)}Yi(t,e,n,r){return n.documentReadCount<this.Wi?(Qs()<=Z.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",ar(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),N.resolve()):(Qs()<=Z.DEBUG&&U("QueryEngine","Query:",ar(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Qs()<=Z.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",ar(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ze(e))):N.resolve())}ji(t,e){if(uv(e))return N.resolve(null);let n=ze(e);return this.indexManager.getIndexType(t,n).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=kh(e,null,"F"),n=ze(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{let o=J(...s);return this.zi.getDocuments(t,o).next(c=>this.indexManager.getMinOffset(t,n).next(l=>{let d=this.Zi(e,c);return this.Xi(e,d,o,l.readTime)?this.ji(t,kh(e,null,"F")):this.es(t,d,e,l)}))})))}Hi(t,e,n,r){return uv(e)||r.isEqual(G.min())?N.resolve(null):this.zi.getDocuments(t,n).next(s=>{let o=this.Zi(e,s);return this.Xi(e,o,n,r)?N.resolve(null):(Qs()<=Z.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ar(e)),this.es(t,o,e,rR(r,-1)).next(c=>c))})}Zi(t,e){let n=new Wt($v(t));return e.forEach((r,s)=>{Nc(t,s)&&(n=n.add(s))}),n}Xi(t,e,n,r){if(t.limit===null)return!1;if(n.size!==e.size)return!0;let s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(t,e,n){return Qs()<=Z.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",ar(e)),this.zi.getDocumentsMatchingQuery(t,e,hi.min(),n)}es(t,e,n,r){return this.zi.getDocumentsMatchingQuery(t,n,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}};var uf=class{constructor(t,e,n,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new yt(st),this.rs=new Un(s=>Wf(s),Gf),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Qh(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}};function XR(i,t,e,n){return new uf(i,t,e,n)}function ly(i,t){return y(this,null,function*(){let e=W(i);return yield e.persistence.runTransaction("Handle user change","readonly",n=>{let r;return e.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,e._s(t),e.mutationQueue.getAllMutationBatches(n))).next(s=>{let o=[],c=[],l=J();for(let d of r){o.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}for(let d of s){c.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}return e.localDocuments.getDocuments(n,l).next(d=>({us:d,removedBatchIds:o,addedBatchIds:c}))})})})}function ZR(i,t){let e=W(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{let r=t.batch.keys(),s=e.os.newChangeBuffer({trackRemovals:!0});return function(c,l,d,f){let p=d.batch,v=p.keys(),S=N.resolve();return v.forEach(D=>{S=S.next(()=>f.getEntry(l,D)).next(P=>{let k=d.docVersions.get(D);ft(k!==null),P.version.compareTo(k)<0&&(p.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),f.addEntry(P)))})}),S.next(()=>c.mutationQueue.removeMutationBatch(l,p))}(e,n,t,s).next(()=>s.apply(n)).next(()=>e.mutationQueue.performConsistencyCheck(n)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(n,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let l=J();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(t))).next(()=>e.localDocuments.getDocuments(n,r))})}function uy(i){let t=W(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function JR(i,t){let e=W(i),n=t.snapshotVersion,r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;let c=[];t.targetChanges.forEach((f,p)=>{let v=r.get(p);if(!v)return;c.push(e.Qr.removeMatchingKeys(s,f.removedDocuments,p).next(()=>e.Qr.addMatchingKeys(s,f.addedDocuments,p)));let S=v.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(p)!==null?S=S.withResumeToken(Jt.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,n)),r=r.insert(p,S),function(P,k,$){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(v,S,f)&&c.push(e.Qr.updateTargetData(s,S))});let l=hn(),d=J();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&c.push(e.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(tx(s,o,t.documentUpdates).next(f=>{l=f.cs,d=f.ls})),!n.isEqual(G.min())){let f=e.Qr.getLastRemoteSnapshotVersion(s).next(p=>e.Qr.setTargetsMetadata(s,s.currentSequenceNumber,n));c.push(f)}return N.waitFor(c).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(e.ns=r,s))}function tx(i,t,e){let n=J(),r=J();return e.forEach(s=>n=n.add(s)),t.getEntries(i,n).next(s=>{let o=hn();return e.forEach((c,l)=>{let d=s.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(G.min())?(t.removeEntry(c,l.readTime),o=o.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(l),o=o.insert(c,l)):U("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{cs:o,ls:r}})}function ex(i,t){let e=W(i);return e.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function nx(i,t){let e=W(i);return e.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return e.Qr.getTargetData(n,t).next(s=>s?(r=s,N.resolve(r)):e.Qr.allocateTargetId(n).next(o=>(r=new ao(t,o,"TargetPurposeListen",n.currentSequenceNumber),e.Qr.addTargetData(n,r).next(()=>r))))}).then(n=>{let r=e.ns.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(n.targetId,n),e.rs.set(t,n.targetId)),n})}function df(i,t,e){return y(this,null,function*(){let n=W(i),r=n.ns.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!go(o))throw o;U("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}n.ns=n.ns.remove(t),n.rs.delete(r.target)})}function wv(i,t,e){let n=W(i),r=G.min(),s=J();return n.persistence.runTransaction("Execute query","readwrite",o=>function(l,d,f){let p=W(l),v=p.rs.get(f);return v!==void 0?N.resolve(p.ns.get(v)):p.Qr.getTargetData(d,f)}(n,o,ze(t)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>n.ts.getDocumentsMatchingQuery(o,t,e?r:G.min(),e?s:J())).next(c=>(ix(n,_R(t),c),{documents:c,hs:s})))}function ix(i,t,e){let n=i.ss.get(t)||G.min();e.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.ss.set(t,n)}var hc=class{constructor(){this.activeTargetIds=TR()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var hf=class{constructor(){this.no=new hc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new hc,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var ff=class{io(t){}shutdown(){}};var fc=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.uo)t(0)}ao(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Qa=null;function sh(){return Qa===null?Qa=function(){return 268435456+Math.round(2147483648*Math.random())}():Qa++,"0x"+Qa.toString(16)}var rx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var mf=class{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}};var Ht="WebChannelConnection",pf=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=n+"://"+e.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(e,n,r,s,o){let c=sh(),l=this.vo(e,n.toUriEncodedString());U("RestConnection",`Sending RPC '${e}' ${c}:`,l,r);let d={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(d,s,o),this.Mo(e,l,d,r).then(f=>(U("RestConnection",`Received RPC '${e}' ${c}: `,f),f),f=>{throw fr("RestConnection",`RPC '${e}' ${c} failed with error: `,f,"url: ",l,"request:",r),f})}xo(e,n,r,s,o,c){return this.Co(e,n,r,s,o)}Fo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}vo(e,n){let r=rx[e];return`${this.wo}/v1/${n}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,n,r){let s=sh();return new Promise((o,c)=>{let l=new Zd;l.setWithCredentials(!0),l.listenOnce(th.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ys.NO_ERROR:let f=l.getResponseJson();U(Ht,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(f)),o(f);break;case Ys.TIMEOUT:U(Ht,`RPC '${t}' ${s} timed out`),c(new F(x.DEADLINE_EXCEEDED,"Request time out"));break;case Ys.HTTP_ERROR:let p=l.getStatus();if(U(Ht,`RPC '${t}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let v=l.getResponseJson();Array.isArray(v)&&(v=v[0]);let S=v?.error;if(S&&S.status&&S.message){let D=function(k){let $=k.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf($)>=0?$:x.UNKNOWN}(S.status);c(new F(D,S.message))}else c(new F(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new F(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{U(Ht,`RPC '${t}' ${s} completed.`)}});let d=JSON.stringify(r);U(Ht,`RPC '${t}' ${s} sending request:`,r),l.send(e,"POST",d,n,15)})}Oo(t,e,n){let r=sh(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=ih(),c=nh(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.xmlHttpFactory=new Jd({})),this.Fo(l.initMessageHeaders,e,n),l.encodeInitMessageHeaders=!0;let f=s.join("");U(Ht,`Creating RPC '${t}' stream ${r}: ${f}`,l);let p=o.createWebChannel(f,l),v=!1,S=!1,D=new mf({lo:k=>{S?U(Ht,`Not sending because RPC '${t}' stream ${r} is closed:`,k):(v||(U(Ht,`Opening RPC '${t}' stream ${r} transport.`),p.open(),v=!0),U(Ht,`RPC '${t}' stream ${r} sending:`,k),p.send(k))},ho:()=>p.close()}),P=(k,$,Y)=>{k.listen($,et=>{try{Y(et)}catch(mt){setTimeout(()=>{throw mt},0)}})};return P(p,or.EventType.OPEN,()=>{S||(U(Ht,`RPC '${t}' stream ${r} transport opened.`),D.mo())}),P(p,or.EventType.CLOSE,()=>{S||(S=!0,U(Ht,`RPC '${t}' stream ${r} transport closed`),D.po())}),P(p,or.EventType.ERROR,k=>{S||(S=!0,fr(Ht,`RPC '${t}' stream ${r} transport errored:`,k),D.po(new F(x.UNAVAILABLE,"The operation could not be completed")))}),P(p,or.EventType.MESSAGE,k=>{var $;if(!S){let Y=k.data[0];ft(!!Y);let et=Y,mt=et.error||(($=et[0])===null||$===void 0?void 0:$.error);if(mt){U(Ht,`RPC '${t}' stream ${r} received error:`,mt);let Gt=mt.status,ct=function(_){let w=St[_];if(w!==void 0)return ey(w)}(Gt),I=mt.message;ct===void 0&&(ct=x.INTERNAL,I="Unknown error status: "+Gt+" with message "+mt.message),S=!0,D.po(new F(ct,I)),p.close()}else U(Ht,`RPC '${t}' stream ${r} received:`,Y),D.yo(Y)}}),P(c,eh.STAT_EVENT,k=>{k.stat===Ka.PROXY?U(Ht,`RPC '${t}' stream ${r} detected buffering proxy`):k.stat===Ka.NOPROXY&&U(Ht,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.fo()},0),D}};function oh(){return typeof document<"u"?document:null}function Mc(i){return new jh(i,!0)}var mc=class{constructor(t,e,n=1e3,r=1.5,s=6e4){this.oi=t,this.timerId=e,this.No=n,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();let e=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,e-n);r>0&&U("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var pc=class{constructor(t,e,n,r,s,o,c,l){this.oi=t,this.Go=n,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new mc(t,e)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return y(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}r_(){return y(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(t,e){return y(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():e&&e.code===x.RESOURCE_EXHAUSTED?(un(e.toString()),un("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):e&&e.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.Ao(e)})}__(){}auth(){this.state=1;let t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.jo===e&&this.u_(n,r)},n=>{t(()=>{let r=new F(x.UNKNOWN,"Fetching auth token failed: "+n.message);return this.c_(r)})})}u_(t,e){let n=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po(()=>{n(()=>this.listener.Po())}),this.stream.To(()=>{n(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{n(()=>this.c_(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>y(this,null,function*(){this.state=0,this.start()}))}c_(t){return U("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget(()=>this.jo===t?e():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},gf=class extends pc{constructor(t,e,n,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();let e=UR(this.serializer,t),n=function(s){if(!("targetChange"in s))return G.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?G.min():o.readTime?$e(o.readTime):G.min()}(t);return this.listener.h_(e,n)}P_(t){let e={};e.database=qh(this.serializer),e.addTarget=function(s,o){let c,l=o.target;if(c=xh(l)?{documents:zR(s,l)}:{query:$R(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=ny(s,o.resumeToken);let d=Bh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(G.min())>0){c.readTime=uc(s,o.snapshotVersion.toTimestamp());let d=Bh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,t);let n=HR(this.serializer,t);n&&(e.labels=n),this.i_(e)}I_(t){let e={};e.database=qh(this.serializer),e.removeTarget=t,this.i_(e)}},bf=class extends pc{constructor(t,e,n,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if(ft(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();let e=BR(t.writeResults,t.commitTime),n=$e(t.commitTime);return this.listener.A_(n,e)}return ft(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let t={};t.database=qh(this.serializer),this.i_(t)}d_(t){let e={streamToken:this.lastStreamToken,writes:t.map(n=>jR(this.serializer,n))};this.i_(e)}};var _f=class extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new F(x.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,zh(e,n),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(x.UNKNOWN,s.toString())})}xo(t,e,n,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.xo(t,zh(e,n),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(x.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},vf=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(un(e),this.y_=!1):U("OnlineStateTracker",e)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var yf=class{constructor(t,e,n,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{n.enqueueAndForget(()=>y(this,null,function*(){vi(this)&&(U("RemoteStore","Restarting streams for network reachability change."),yield function(l){return y(this,null,function*(){let d=W(l);d.M_.add(4),yield bo(d),d.N_.set("Unknown"),d.M_.delete(4),yield Lc(d)})}(this))}))}),this.N_=new vf(n,r)}};function Lc(i){return y(this,null,function*(){if(vi(i))for(let t of i.x_)yield t(!0)})}function bo(i){return y(this,null,function*(){for(let t of i.x_)yield t(!1)})}function dy(i,t){let e=W(i);e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),Jf(e)?Zf(e):Rr(e).Xo()&&Xf(e,t))}function Qf(i,t){let e=W(i),n=Rr(e);e.F_.delete(t),n.Xo()&&hy(e,t),e.F_.size===0&&(n.Xo()?n.n_():vi(e)&&e.N_.set("Unknown"))}function Xf(i,t){if(i.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(G.min())>0){let e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Rr(i).P_(t)}function hy(i,t){i.L_.xe(t),Rr(i).I_(t)}function Zf(i){i.L_=new Uh({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>i.F_.get(t)||null,tt:()=>i.datastore.serializer.databaseId}),Rr(i).start(),i.N_.w_()}function Jf(i){return vi(i)&&!Rr(i).Zo()&&i.F_.size>0}function vi(i){return W(i).M_.size===0}function fy(i){i.L_=void 0}function sx(i){return y(this,null,function*(){i.N_.set("Online")})}function ox(i){return y(this,null,function*(){i.F_.forEach((t,e)=>{Xf(i,t)})})}function ax(i,t){return y(this,null,function*(){fy(i),Jf(i)?(i.N_.D_(t),Zf(i)):i.N_.set("Unknown")})}function cx(i,t,e){return y(this,null,function*(){if(i.N_.set("Online"),t instanceof cc&&t.state===2&&t.cause)try{yield function(r,s){return y(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.F_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.F_.delete(c),r.L_.removeTarget(c))})}(i,t)}catch(n){U("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield gc(i,n)}else if(t instanceof dr?i.L_.Ke(t):t instanceof ac?i.L_.He(t):i.L_.We(t),!e.isEqual(G.min()))try{let n=yield uy(i.localStore);e.compareTo(n)>=0&&(yield function(s,o){let c=s.L_.rt(o);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let f=s.F_.get(d);f&&s.F_.set(d,f.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,d)=>{let f=s.F_.get(l);if(!f)return;s.F_.set(l,f.withResumeToken(Jt.EMPTY_BYTE_STRING,f.snapshotVersion)),hy(s,l);let p=new ao(f.target,l,d,f.sequenceNumber);Xf(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(i,e))}catch(n){U("RemoteStore","Failed to raise snapshot:",n),yield gc(i,n)}})}function gc(i,t,e){return y(this,null,function*(){if(!go(t))throw t;i.M_.add(1),yield bo(i),i.N_.set("Offline"),e||(e=()=>uy(i.localStore)),i.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){U("RemoteStore","Retrying IndexedDB access"),yield e(),i.M_.delete(1),yield Lc(i)}))})}function my(i,t){return t().catch(e=>gc(i,e,t))}function Fc(i){return y(this,null,function*(){let t=W(i),e=jn(t),n=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;lx(t);)try{let r=yield ex(t.localStore,n);if(r===null){t.v_.length===0&&e.n_();break}n=r.batchId,ux(t,r)}catch(r){yield gc(t,r)}py(t)&&gy(t)})}function lx(i){return vi(i)&&i.v_.length<10}function ux(i,t){i.v_.push(t);let e=jn(i);e.Xo()&&e.E_&&e.d_(t.mutations)}function py(i){return vi(i)&&!jn(i).Zo()&&i.v_.length>0}function gy(i){jn(i).start()}function dx(i){return y(this,null,function*(){jn(i).V_()})}function hx(i){return y(this,null,function*(){let t=jn(i);for(let e of i.v_)t.d_(e.mutations)})}function fx(i,t,e){return y(this,null,function*(){let n=i.v_.shift(),r=Mh.from(n,t,e);yield my(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),yield Fc(i)})}function mx(i,t){return y(this,null,function*(){t&&jn(i).E_&&(yield function(n,r){return y(this,null,function*(){if(function(o){return kR(o)&&o!==x.ABORTED}(r.code)){let s=n.v_.shift();jn(n).t_(),yield my(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Fc(n)}})}(i,t)),py(i)&&gy(i)})}function Iv(i,t){return y(this,null,function*(){let e=W(i);e.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");let n=vi(e);e.M_.add(3),yield bo(e),n&&e.N_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),yield Lc(e)})}function px(i,t){return y(this,null,function*(){let e=W(i);t?(e.M_.delete(2),yield Lc(e)):t||(e.M_.add(2),yield bo(e),e.N_.set("Unknown"))})}function Rr(i){return i.B_||(i.B_=function(e,n,r){let s=W(e);return s.f_(),new gf(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:sx.bind(null,i),To:ox.bind(null,i),Ao:ax.bind(null,i),h_:cx.bind(null,i)}),i.x_.push(t=>y(this,null,function*(){t?(i.B_.t_(),Jf(i)?Zf(i):i.N_.set("Unknown")):(yield i.B_.stop(),fy(i))}))),i.B_}function jn(i){return i.k_||(i.k_=function(e,n,r){let s=W(e);return s.f_(),new bf(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:()=>Promise.resolve(),To:dx.bind(null,i),Ao:mx.bind(null,i),R_:hx.bind(null,i),A_:fx.bind(null,i)}),i.x_.push(t=>y(this,null,function*(){t?(i.k_.t_(),yield Fc(i)):(yield i.k_.stop(),i.v_.length>0&&(U("RemoteStore",`Stopping write stream with ${i.v_.length} pending writes`),i.v_=[]))}))),i.k_}var wf=class i{constructor(t,e,n,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Re,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,s){let o=Date.now()+n,c=new i(t,e,o,r,s);return c.start(n),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(x.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function tm(i,t){if(un("AsyncQueue",`${t}: ${i}`),go(i))return new F(x.UNAVAILABLE,`${t}: ${i}`);throw i}var bc=class i{constructor(t){this.comparator=t?(e,n)=>t(e,n)||j.comparator(e.key,n.key):(e,n)=>j.comparator(e.key,n.key),this.keyedMap=Xs(),this.sortedSet=new yt(this.comparator)}static emptySet(t){return new i(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof i)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let n=new i;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}};var _c=class{constructor(){this.q_=new yt(j.comparator)}track(t){let e=t.doc.key,n=this.q_.get(e);n?t.type!==0&&n.type===3?this.q_=this.q_.insert(e,t):t.type===3&&n.type!==1?this.q_=this.q_.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.q_=this.q_.remove(e):t.type===1&&n.type===2?this.q_=this.q_.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):z():this.q_=this.q_.insert(e,t)}Q_(){let t=[];return this.q_.inorderTraversal((e,n)=>{t.push(n)}),t}},Er=class i{constructor(t,e,n,r,s,o,c,l,d){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(t,e,n,r,s){let o=[];return e.forEach(c=>{o.push({type:0,doc:c})}),new i(t,e,bc.emptySet(e),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Oc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}};var If=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}},Ef=class{constructor(){this.queries=new Un(t=>zv(t),Oc),this.onlineState="Unknown",this.z_=new Set}};function by(i,t){return y(this,null,function*(){let e=W(i),n=3,r=t.query,s=e.queries.get(r);s?!s.W_()&&t.G_()&&(n=2):(s=new If,n=t.G_()?0:1);try{switch(n){case 0:s.K_=yield e.onListen(r,!0);break;case 1:s.K_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(o){let c=tm(o,`Initialization of query '${ar(t.query)}' failed`);return void t.onError(c)}e.queries.set(r,s),s.U_.push(t),t.j_(e.onlineState),s.K_&&t.H_(s.K_)&&em(e)})}function _y(i,t){return y(this,null,function*(){let e=W(i),n=t.query,r=3,s=e.queries.get(n);if(s){let o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}})}function gx(i,t){let e=W(i),n=!1;for(let r of t){let s=r.query,o=e.queries.get(s);if(o){for(let c of o.U_)c.H_(r)&&(n=!0);o.K_=r}}n&&em(e)}function bx(i,t,e){let n=W(i),r=n.queries.get(t);if(r)for(let s of r.U_)s.onError(e);n.queries.delete(t)}function em(i){i.z_.forEach(t=>{t.next()})}var Tf,Ev;(Ev=Tf||(Tf={})).J_="default",Ev.Cache="cache";var vc=class{constructor(t,e,n){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(t){if(!this.options.includeMetadataChanges){let n=[];for(let r of t.docChanges)r.type!==3&&n.push(r);t=new Er(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){if(!t.fromCache||!this.G_())return!0;let n=e!=="Offline";return(!this.options.ra||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ea(t){if(t.docChanges.length>0)return!0;let e=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}na(t){t=Er.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==Tf.Cache}};var yc=class{constructor(t){this.key=t}},wc=class{constructor(t){this.key=t}},Af=class{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=J(),this.mutatedKeys=J(),this.Ia=$v(t),this.Ta=new bc(this.Ia)}get Ea(){return this.la}da(t,e){let n=e?e.Aa:new _c,r=e?e.Ta:this.Ta,s=e?e.mutatedKeys:this.mutatedKeys,o=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((f,p)=>{let v=r.get(f),S=Nc(this.query,p)?p:null,D=!!v&&this.mutatedKeys.has(v.key),P=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),k=!1;v&&S?v.data.isEqual(S.data)?D!==P&&(n.track({type:3,doc:S}),k=!0):this.Ra(v,S)||(n.track({type:2,doc:S}),k=!0,(l&&this.Ia(S,l)>0||d&&this.Ia(S,d)<0)&&(c=!0)):!v&&S?(n.track({type:0,doc:S}),k=!0):v&&!S&&(n.track({type:1,doc:v}),k=!0,(l||d)&&(c=!0)),k&&(S?(o=o.add(S),s=P?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),n.track({type:1,doc:f})}return{Ta:o,Aa:n,Xi:c,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){let s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;let o=t.Aa.Q_();o.sort((f,p)=>function(S,D){let P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return P(S)-P(D)}(f.type,p.type)||this.Ia(f.doc,p.doc)),this.Va(n),r=r!=null&&r;let c=e&&!r?this.ma():[],l=this.Pa.size===0&&this.current&&!r?1:0,d=l!==this.ha;return this.ha=l,o.length!==0||d?{snapshot:new Er(this.query,t.Ta,s,o,t.mutatedKeys,l===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new _c,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(e=>this.la=this.la.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=t.current)}ma(){if(!this.current)return[];let t=this.Pa;this.Pa=J(),this.Ta.forEach(n=>{this.ga(n.key)&&(this.Pa=this.Pa.add(n.key))});let e=[];return t.forEach(n=>{this.Pa.has(n)||e.push(new wc(n))}),this.Pa.forEach(n=>{t.has(n)||e.push(new yc(n))}),e}pa(t){this.la=t.hs,this.Pa=J();let e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return Er.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},Sf=class{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}},Cf=class{constructor(t){this.key=t,this.wa=!1}},Rf=class{constructor(t,e,n,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Un(c=>zv(c),Oc),this.Da=new Map,this.Ca=new Set,this.va=new yt(j.comparator),this.Fa=new Map,this.Ma=new lo,this.xa={},this.Oa=new Map,this.Na=co.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function _x(i,t,e=!0){return y(this,null,function*(){let n=Ty(i),r,s=n.ba.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=yield vy(n,t,e,!0),r})}function vx(i,t){return y(this,null,function*(){let e=Ty(i);yield vy(e,t,!0,!1)})}function vy(i,t,e,n){return y(this,null,function*(){let r=yield nx(i.localStore,ze(t)),s=r.targetId,o=e?i.sharedClientState.addLocalQueryTarget(s):"not-current",c;return n&&(c=yield yx(i,t,s,o==="current",r.resumeToken)),i.isPrimaryClient&&e&&dy(i.remoteStore,r),c})}function yx(i,t,e,n,r){return y(this,null,function*(){i.Ba=(p,v,S)=>function(P,k,$,Y){return y(this,null,function*(){let et=k.view.da($);et.Xi&&(et=yield wv(P.localStore,k.query,!1).then(({documents:I})=>k.view.da(I,et)));let mt=Y&&Y.targetChanges.get(k.targetId),Gt=Y&&Y.targetMismatches.get(k.targetId)!=null,ct=k.view.applyChanges(et,P.isPrimaryClient,mt,Gt);return Av(P,k.targetId,ct.fa),ct.snapshot})}(i,p,v,S);let s=yield wv(i.localStore,t,!0),o=new Af(t,s.hs),c=o.da(s.documents),l=oo.createSynthesizedTargetChangeForCurrentChange(e,n&&i.onlineState!=="Offline",r),d=o.applyChanges(c,i.isPrimaryClient,l);Av(i,e,d.fa);let f=new Sf(t,e,o);return i.ba.set(t,f),i.Da.has(e)?i.Da.get(e).push(t):i.Da.set(e,[t]),d.snapshot})}function wx(i,t,e){return y(this,null,function*(){let n=W(i),r=n.ba.get(t),s=n.Da.get(r.targetId);if(s.length>1)return n.Da.set(r.targetId,s.filter(o=>!Oc(o,t))),void n.ba.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield df(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),e&&Qf(n.remoteStore,r.targetId),xf(n,r.targetId)}).catch(po))):(xf(n,r.targetId),yield df(n.localStore,r.targetId,!0))})}function Ix(i,t){return y(this,null,function*(){let e=W(i),n=e.ba.get(t),r=e.Da.get(n.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),Qf(e.remoteStore,n.targetId))})}function Ex(i,t,e){return y(this,null,function*(){let n=Dx(i);try{let r=yield function(o,c){let l=W(o),d=Vt.now(),f=c.reduce((S,D)=>S.add(D.key),J()),p,v;return l.persistence.runTransaction("Locally write mutations","readwrite",S=>{let D=hn(),P=J();return l.os.getEntries(S,f).next(k=>{D=k,D.forEach(($,Y)=>{Y.isValidDocument()||(P=P.add($))})}).next(()=>l.localDocuments.getOverlayedDocuments(S,D)).next(k=>{p=k;let $=[];for(let Y of c){let et=DR(Y,p.get(Y.key).overlayedDocument);et!=null&&$.push(new He(Y.key,et,Mv(et.value.mapValue),ln.exists(!0)))}return l.mutationQueue.addMutationBatch(S,d,$,c)}).next(k=>{v=k;let $=k.applyToLocalDocumentSet(p,P);return l.documentOverlayCache.saveOverlays(S,k.batchId,$)})}).then(()=>({batchId:v.batchId,changes:Hv(p)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(r.batchId),function(o,c,l){let d=o.xa[o.currentUser.toKey()];d||(d=new yt(st)),d=d.insert(c,l),o.xa[o.currentUser.toKey()]=d}(n,r.batchId,e),yield _o(n,r.changes),yield Fc(n.remoteStore)}catch(r){let s=tm(r,"Failed to persist write");e.reject(s)}})}function yy(i,t){return y(this,null,function*(){let e=W(i);try{let n=yield JR(e.localStore,t);t.targetChanges.forEach((r,s)=>{let o=e.Fa.get(s);o&&(ft(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?ft(o.wa):r.removedDocuments.size>0&&(ft(o.wa),o.wa=!1))}),yield _o(e,n,t)}catch(n){yield po(n)}})}function Tv(i,t,e){let n=W(i);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){let r=[];n.ba.forEach((s,o)=>{let c=o.view.j_(t);c.snapshot&&r.push(c.snapshot)}),function(o,c){let l=W(o);l.onlineState=c;let d=!1;l.queries.forEach((f,p)=>{for(let v of p.U_)v.j_(c)&&(d=!0)}),d&&em(l)}(n.eventManager,t),r.length&&n.Sa.h_(r),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}function Tx(i,t,e){return y(this,null,function*(){let n=W(i);n.sharedClientState.updateQueryState(t,"rejected",e);let r=n.Fa.get(t),s=r&&r.key;if(s){let o=new yt(j.comparator);o=o.insert(s,xe.newNoDocument(s,G.min()));let c=J().add(s),l=new oc(G.min(),new Map,new yt(st),o,c);yield yy(n,l),n.va=n.va.remove(s),n.Fa.delete(t),nm(n)}else yield df(n.localStore,t,!1).then(()=>xf(n,t,e)).catch(po)})}function Ax(i,t){return y(this,null,function*(){let e=W(i),n=t.batch.batchId;try{let r=yield ZR(e.localStore,t);Iy(e,n,null),wy(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),yield _o(e,r)}catch(r){yield po(r)}})}function Sx(i,t,e){return y(this,null,function*(){let n=W(i);try{let r=yield function(o,c){let l=W(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return l.mutationQueue.lookupMutationBatch(d,c).next(p=>(ft(p!==null),f=p.keys(),l.mutationQueue.removeMutationBatch(d,p))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>l.localDocuments.getDocuments(d,f))})}(n.localStore,t);Iy(n,t,e),wy(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),yield _o(n,r)}catch(r){yield po(r)}})}function wy(i,t){(i.Oa.get(t)||[]).forEach(e=>{e.resolve()}),i.Oa.delete(t)}function Iy(i,t,e){let n=W(i),r=n.xa[n.currentUser.toKey()];if(r){let s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),n.xa[n.currentUser.toKey()]=r}}function xf(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(let n of i.Da.get(t))i.ba.delete(n),e&&i.Sa.ka(n,e);i.Da.delete(t),i.isPrimaryClient&&i.Ma.Vr(t).forEach(n=>{i.Ma.containsKey(n)||Ey(i,n)})}function Ey(i,t){i.Ca.delete(t.path.canonicalString());let e=i.va.get(t);e!==null&&(Qf(i.remoteStore,e),i.va=i.va.remove(t),i.Fa.delete(e),nm(i))}function Av(i,t,e){for(let n of e)n instanceof yc?(i.Ma.addReference(n.key,t),Cx(i,n)):n instanceof wc?(U("SyncEngine","Document no longer in limbo: "+n.key),i.Ma.removeReference(n.key,t),i.Ma.containsKey(n.key)||Ey(i,n.key)):z()}function Cx(i,t){let e=t.key,n=e.path.canonicalString();i.va.get(e)||i.Ca.has(n)||(U("SyncEngine","New document in limbo: "+e),i.Ca.add(n),nm(i))}function nm(i){for(;i.Ca.size>0&&i.va.size<i.maxConcurrentLimboResolutions;){let t=i.Ca.values().next().value;i.Ca.delete(t);let e=new j(bt.fromString(t)),n=i.Na.next();i.Fa.set(n,new Cf(e)),i.va=i.va.insert(e,n),dy(i.remoteStore,new ao(ze(Kf(e.path)),n,"TargetPurposeLimboResolution",Pv.oe))}}function _o(i,t,e){return y(this,null,function*(){let n=W(i),r=[],s=[],o=[];n.ba.isEmpty()||(n.ba.forEach((c,l)=>{o.push(n.Ba(l,t,e).then(d=>{var f;if((d||e)&&n.isPrimaryClient){let p=d?!d.fromCache:(f=e?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;n.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(d){r.push(d);let p=af.Ki(l.targetId,d);s.push(p)}}))}),yield Promise.all(o),n.Sa.h_(r),yield function(l,d){return y(this,null,function*(){let f=W(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>N.forEach(d,v=>N.forEach(v.qi,S=>f.persistence.referenceDelegate.addReference(p,v.targetId,S)).next(()=>N.forEach(v.Qi,S=>f.persistence.referenceDelegate.removeReference(p,v.targetId,S)))))}catch(p){if(!go(p))throw p;U("LocalStore","Failed to update sequence numbers: "+p)}for(let p of d){let v=p.targetId;if(!p.fromCache){let S=f.ns.get(v),D=S.snapshotVersion,P=S.withLastLimboFreeSnapshotVersion(D);f.ns=f.ns.insert(v,P)}}})}(n.localStore,s))})}function Rx(i,t){return y(this,null,function*(){let e=W(i);if(!e.currentUser.isEqual(t)){U("SyncEngine","User change. New user:",t.toKey());let n=yield ly(e.localStore,t);e.currentUser=t,function(s,o){s.Oa.forEach(c=>{c.forEach(l=>{l.reject(new F(x.CANCELLED,o))})}),s.Oa.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),yield _o(e,n.us)}})}function xx(i,t){let e=W(i),n=e.Fa.get(t);if(n&&n.wa)return J().add(n.key);{let r=J(),s=e.Da.get(t);if(!s)return r;for(let o of s){let c=e.ba.get(o);r=r.unionWith(c.view.Ea)}return r}}function Ty(i){let t=W(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=yy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Tx.bind(null,t),t.Sa.h_=gx.bind(null,t.eventManager),t.Sa.ka=bx.bind(null,t.eventManager),t}function Dx(i){let t=W(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ax.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Sx.bind(null,t),t}var Ic=class{constructor(){this.synchronizeTabs=!1}initialize(t){return y(this,null,function*(){this.serializer=Mc(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return XR(this.persistence,new lf,t.initialUser,this.serializer)}createPersistence(t){return new rf(of.Hr,this.serializer)}createSharedClientState(t){return new hf}terminate(){return y(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Df=class{initialize(t,e){return y(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Tv(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Rx.bind(null,this.syncEngine),yield px(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Ef}()}createDatastore(t){let e=Mc(t.databaseInfo.databaseId),n=function(s){return new pf(s)}(t.databaseInfo);return function(s,o,c,l){return new _f(s,o,c,l)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(n,r,s,o,c){return new yf(n,r,s,o,c)}(this.localStore,this.datastore,t.asyncQueue,e=>Tv(this.syncEngine,e,0),function(){return fc.D()?new fc:new ff}())}createSyncEngine(t,e){return function(r,s,o,c,l,d,f){let p=new Rf(r,s,o,c,l,d);return f&&(p.La=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return y(this,null,function*(){var t;yield function(n){return y(this,null,function*(){let r=W(n);U("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield bo(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()})}};var Ec=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):un("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}};var kf=class{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=Ot.UNAUTHENTICATED,this.clientId=tc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,s=>y(this,null,function*(){U("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,s=>(U("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Re;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let n=tm(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}};function ah(i,t){return y(this,null,function*(){i.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");let e=i.configuration;yield t.initialize(e);let n=e.initialUser;i.setCredentialChangeListener(r=>y(this,null,function*(){n.isEqual(r)||(yield ly(t.localStore,r),n=r)})),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t})}function Sv(i,t){return y(this,null,function*(){i.asyncQueue.verifyOperationInProgress();let e=yield Px(i);U("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,i.configuration),i.setCredentialChangeListener(n=>Iv(t.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>Iv(t.remoteStore,r)),i._onlineComponents=t})}function kx(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}function Px(i){return y(this,null,function*(){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ah(i,i._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!kx(e))throw e;fr("Error using user provided cache. Falling back to memory cache: "+e),yield ah(i,new Ic)}}else U("FirestoreClient","Using default OfflineComponentProvider"),yield ah(i,new Ic);return i._offlineComponents})}function Ay(i){return y(this,null,function*(){return i._onlineComponents||(i._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),yield Sv(i,i._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),yield Sv(i,new Df))),i._onlineComponents})}function Ox(i){return Ay(i).then(t=>t.syncEngine)}function Sy(i){return y(this,null,function*(){let t=yield Ay(i),e=t.eventManager;return e.onListen=_x.bind(null,t.syncEngine),e.onUnlisten=wx.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=vx.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Ix.bind(null,t.syncEngine),e})}function Nx(i,t,e={}){let n=new Re;return i.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,c,l,d){let f=new Ec({next:v=>{o.enqueueAndForget(()=>_y(s,p));let S=v.docs.has(c);!S&&v.fromCache?d.reject(new F(x.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&v.fromCache&&l&&l.source==="server"?d.reject(new F(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),p=new vc(Kf(c.path),f,{includeMetadataChanges:!0,ra:!0});return by(s,p)}(yield Sy(i),i.asyncQueue,t,e,n)})),n.promise}function Mx(i,t,e={}){let n=new Re;return i.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,c,l,d){let f=new Ec({next:v=>{o.enqueueAndForget(()=>_y(s,p)),v.fromCache&&l.source==="server"?d.reject(new F(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),p=new vc(c,f,{includeMetadataChanges:!0,ra:!0});return by(s,p)}(yield Sy(i),i.asyncQueue,t,e,n)})),n.promise}function Cy(i){let t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}var Cv=new Map;function Ry(i,t,e){if(!e)throw new F(x.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function Lx(i,t,e,n){if(t===!0&&n===!0)throw new F(x.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function Rv(i){if(!j.isDocumentKey(i))throw new F(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function xv(i){if(j.isDocumentKey(i))throw new F(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Vc(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{let t=function(n){return n.constructor?n.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":z()}function fn(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new F(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=Vc(i);throw new F(x.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}var Tc=class{constructor(t){var e,n;if(t.host===void 0){if(t.ssl!==void 0)throw new F(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new F(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Lx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cy((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},Tr=class{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new F(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tc(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new ch;switch(n.type){case"firstParty":return new hh(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new F(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let n=Cv.get(e);n&&(U("ComponentProvider","Removing Datastore"),Cv.delete(e),n.terminate())}(this),Promise.resolve()}};function xy(i,t,e,n={}){var r;let s=(i=fn(i,Tr))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let c,l;if(typeof n.mockUserToken=="string")c=n.mockUserToken,l=Ot.MOCK_USER;else{c=$b(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);let d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new F(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ot(d)}i._authCredentials=new lh(new Ja(c,l))}}var Ar=class i{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new i(this.firestore,t,this._query)}},ne=class i{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new i(this.firestore,t,this._key)}},Fn=class i extends Ar{constructor(t,e,n){super(t,e,Kf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new ne(this.firestore,null,new j(t))}withConverter(t){return new i(this.firestore,t,this._path)}};function Dy(i,t,...e){if(i=Ft(i),Ry("collection","path",t),i instanceof Tr){let n=bt.fromString(t,...e);return xv(n),new Fn(i,null,n)}{if(!(i instanceof ne||i instanceof Fn))throw new F(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=i._path.child(bt.fromString(t,...e));return xv(n),new Fn(i.firestore,null,n)}}function im(i,t,...e){if(i=Ft(i),arguments.length===1&&(t=tc.newId()),Ry("doc","path",t),i instanceof Tr){let n=bt.fromString(t,...e);return Rv(n),new ne(i,null,new j(n))}{if(!(i instanceof ne||i instanceof Fn))throw new F(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=i._path.child(bt.fromString(t,...e));return Rv(n),new ne(i.firestore,i instanceof Fn?i.converter:null,new j(n))}}var Pf=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new mc(this,"async_queue_retry"),this.hu=()=>{let e=oh();e&&U("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};let t=oh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;let e=oh();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});let e=new Re;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}Tu(){return y(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!go(t))throw t;U("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(t){let e=this.iu.then(()=>(this.uu=!0,t().catch(n=>{this.au=n,this.uu=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(n);throw un("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.uu=!1,n))));return this.iu=e,e}enqueueAfterDelay(t,e,n){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);let r=wf.createAndSchedule(this,t,e,n,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&z()}verifyOperationInProgress(){}du(){return y(this,null,function*(){let t;do t=this.iu,yield t;while(t!==this.iu)})}Au(t){for(let e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((e,n)=>e.targetTimeMs-n.targetTimeMs);for(let e of this._u)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){let e=this._u.indexOf(t);this._u.splice(e,1)}};var Bn=class extends Tr{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=function(){return new Pf}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Py(this),this._firestoreClient.terminate()}};function ky(i,t){let e=typeof i=="object"?i:Ji(),n=typeof i=="string"?i:t||"(default)",r=Vs(e,"firestore").getImmediate({identifier:n});if(!r._initialized){let s=zb("firestore");s&&xy(r,...s)}return r}function rm(i){return i._firestoreClient||Py(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Py(i){var t,e,n;let r=i._freezeSettings(),s=function(c,l,d,f){return new bh(c,l,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Cy(f.experimentalLongPollingOptions),f.useFetchStreams)}(i._databaseId,((t=i._app)===null||t===void 0?void 0:t.options.appId)||"",i._persistenceKey,r);i._firestoreClient=new kf(i._authCredentials,i._appCheckCredentials,i._queue,s),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var uo=class i{constructor(t){this._byteString=t}static fromBase64String(t){try{return new i(Jt.fromBase64String(t))}catch(e){throw new F(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new i(Jt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var Sr=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new F(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new he(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var ho=class{constructor(t){this._methodName=t}};var fo=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new F(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new F(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return st(this._lat,t._lat)||st(this._long,t._long)}};var Fx=/^__.*__$/,Of=class{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new He(t,this.data,this.fieldMask,e,this.fieldTransforms):new bi(t,this.data,e,this.fieldTransforms)}},Ac=class{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new He(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function Oy(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var Nf=class i{constructor(t,e,n,r,s,o){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new i(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;let n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.wu(t),r}Su(t){var e;let n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return Cc(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(Oy(this.fu)&&Fx.test(t))throw this.Du('Document fields cannot begin and end with "__"')}},Mf=class{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Mc(t)}Fu(t,e,n,r=!1){return new Nf({fu:t,methodName:e,vu:n,path:he.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function sm(i){let t=i._freezeSettings(),e=Mc(i._databaseId);return new Mf(i._databaseId,!!t.ignoreUndefinedProperties,e)}function Vx(i,t,e,n,r,s={}){let o=i.Fu(s.merge||s.mergeFields?2:0,t,e,r);om("Data must be an object, but it was:",o,n);let c=Ny(n,o),l,d;if(s.merge)l=new ye(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let p of s.mergeFields){let v=Lf(t,p,e);if(!o.contains(v))throw new F(x.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Ly(f,v)||f.push(v)}l=new ye(f),d=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,d=o.fieldTransforms;return new Of(new de(c),l,d)}var Sc=class i extends ho{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof i}};function Ux(i,t,e,n){let r=i.Fu(1,t,e);om("Data must be an object, but it was:",r,n);let s=[],o=de.empty();_i(n,(l,d)=>{let f=am(t,l,e);d=Ft(d);let p=r.Su(f);if(d instanceof Sc)s.push(f);else{let v=vo(d,p);v!=null&&(s.push(f),o.set(f,v))}});let c=new ye(s);return new Ac(o,c,r.fieldTransforms)}function jx(i,t,e,n,r,s){let o=i.Fu(1,t,e),c=[Lf(t,n,e)],l=[r];if(s.length%2!=0)throw new F(x.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)c.push(Lf(t,s[v])),l.push(s[v+1]);let d=[],f=de.empty();for(let v=c.length-1;v>=0;--v)if(!Ly(d,c[v])){let S=c[v],D=l[v];D=Ft(D);let P=o.Su(S);if(D instanceof Sc)d.push(S);else{let k=vo(D,P);k!=null&&(d.push(S),f.set(S,k))}}let p=new ye(d);return new Ac(f,p,o.fieldTransforms)}function Bx(i,t,e,n=!1){return vo(e,i.Fu(n?4:3,t))}function vo(i,t){if(My(i=Ft(i)))return om("Unsupported field value:",t,i),Ny(i,t);if(i instanceof ho)return function(n,r){if(!Oy(r.fu))throw r.Du(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${n._methodName}() is not currently supported inside arrays`);let s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(n,r){let s=[],o=0;for(let c of n){let l=vo(c,r.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(i,t)}return function(n,r){if((n=Ft(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return AR(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let s=Vt.fromDate(n);return{timestampValue:uc(r.serializer,s)}}if(n instanceof Vt){let s=new Vt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:uc(r.serializer,s)}}if(n instanceof fo)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof uo)return{bytesValue:ny(r.serializer,n._byteString)};if(n instanceof ne){let s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Yf(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Du(`Unsupported field value: ${Vc(n)}`)}(i,t)}function Ny(i,t){let e={};return Ov(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):_i(i,(n,r)=>{let s=vo(r,t.pu(n));s!=null&&(e[n]=s)}),{mapValue:{fields:e}}}function My(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Vt||i instanceof fo||i instanceof uo||i instanceof ne||i instanceof ho)}function om(i,t,e){if(!My(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let n=Vc(e);throw n==="an object"?t.Du(i+" a custom object"):t.Du(i+" "+n)}}function Lf(i,t,e){if((t=Ft(t))instanceof Sr)return t._internalPath;if(typeof t=="string")return am(i,t);throw Cc("Field path arguments must be of type string or ",i,!1,void 0,e)}var zx=new RegExp("[~\\*/\\[\\]]");function am(i,t,e){if(t.search(zx)>=0)throw Cc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new Sr(...t.split("."))._internalPath}catch{throw Cc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function Cc(i,t,e,n,r){let s=n&&!n.isEmpty(),o=r!==void 0,c=`Function ${t}() called with invalid data`;e&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${n}`),o&&(l+=` in document ${r}`),l+=")"),new F(x.INVALID_ARGUMENT,c+i+l)}function Ly(i,t){return i.some(e=>e.isEqual(t))}var Rc=class{constructor(t,e,n,r,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ne(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Ff(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(cm("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},Ff=class extends Rc{data(){return super.data()}};function cm(i,t){return typeof t=="string"?am(i,t):t instanceof Sr?t._internalPath:t._delegate._internalPath}function $x(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new F(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var mo=class{},Vf=class extends mo{};function Fy(i,t,...e){let n=[];t instanceof mo&&n.push(t),n=n.concat(e),function(s){let o=s.filter(l=>l instanceof Uf).length,c=s.filter(l=>l instanceof xc).length;if(o>1||o>0&&c>0)throw new F(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(let r of n)i=r._apply(i);return i}var xc=class i extends Vf{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new i(t,e,n)}_apply(t){let e=this._parse(t);return Uy(t._query,e),new Ar(t.firestore,t.converter,Dh(t._query,e))}_parse(t){let e=sm(t.firestore);return function(s,o,c,l,d,f,p){let v;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new F(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){kv(p,f);let S=[];for(let D of p)S.push(Dv(l,s,D));v={arrayValue:{values:S}}}else v=Dv(l,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||kv(p,f),v=Bx(c,o,p,f==="in"||f==="not-in");return Rt.create(d,f,v)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};function Vy(i,t,e){let n=t,r=cm("where",i);return xc._create(r,n,e)}var Uf=class i extends mo{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new i(t,e)}_parse(t){let e=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return e.length===1?e[0]:De.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:(function(r,s){let o=r,c=s.getFlattenedFilters();for(let l of c)Uy(o,l),o=Dh(o,l)}(t._query,e),new Ar(t.firestore,t.converter,Dh(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function Dv(i,t,e){if(typeof(e=Ft(e))=="string"){if(e==="")throw new F(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bv(t)&&e.indexOf("/")!==-1)throw new F(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let n=t.path.child(bt.fromString(e));if(!j.isDocumentKey(n))throw new F(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return rv(i,new j(n))}if(e instanceof ne)return rv(i,e._key);throw new F(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vc(e)}.`)}function kv(i,t){if(!Array.isArray(i)||i.length===0)throw new F(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Uy(i,t){let e=function(r,s){for(let o of r)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(i.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new F(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new F(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}var jf=class{convertValue(t,e="none"){switch(fi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return vt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Vn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw z()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let n={};return _i(t,(r,s)=>{n[r]=this.convertValue(s,e)}),n}convertGeoPoint(t){return new fo(vt(t.latitude),vt(t.longitude))}convertArray(t,e){return(t.values||[]).map(n=>this.convertValue(n,e))}convertServerTimestamp(t,e){switch(e){case"previous":let n=qf(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(io(t));default:return null}}convertTimestamp(t){let e=dn(t);return new Vt(e.seconds,e.nanos)}convertDocumentKey(t,e){let n=bt.fromString(t);ft(cy(n));let r=new rc(n.get(1),n.get(3)),s=new j(n.popFirst(5));return r.isEqual(e)||un(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}};function qx(i,t,e){let n;return n=i?e&&(e.merge||e.mergeFields)?i.toFirestore(t,e):i.toFirestore(t):t,n}var ui=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},Dc=class extends Rc{constructor(t,e,n,r,s,o){super(t,e,n,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new hr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let n=this._document.data.field(cm("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}},hr=class extends Dc{data(t={}){return super.data(t)}},Bf=class{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new ui(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new hr(this._firestore,this._userDataWriter,n.key,n,new ui(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new F(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{let l=new hr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ui(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new hr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ui(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:Hx(c.type),doc:l,oldIndex:d,newIndex:f}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function Hx(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function jy(i){i=fn(i,ne);let t=fn(i.firestore,Bn);return Nx(rm(t),i._key).then(e=>Wx(t,i,e))}var kc=class extends jf{constructor(t){super(),this.firestore=t}convertBytes(t){return new uo(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new ne(this.firestore,null,e)}};function By(i){i=fn(i,Ar);let t=fn(i.firestore,Bn),e=rm(t),n=new kc(t);return $x(i._query),Mx(e,i._query).then(r=>new Bf(t,n,i,r))}function zy(i,t,e,...n){i=fn(i,ne);let r=fn(i.firestore,Bn),s=sm(r),o;return o=typeof(t=Ft(t))=="string"||t instanceof Sr?jx(s,"updateDoc",i._key,t,e,n):Ux(s,"updateDoc",i._key,t),lm(r,[o.toMutation(i._key,ln.exists(!0))])}function $y(i){return lm(fn(i.firestore,Bn),[new so(i._key,ln.none())])}function qy(i,t){let e=fn(i.firestore,Bn),n=im(i),r=qx(i.converter,t);return lm(e,[Vx(sm(i.firestore),"addDoc",n._key,r,i.converter!==null,{}).toMutation(n._key,ln.exists(!1))]).then(()=>n)}function lm(i,t){return function(n,r){let s=new Re;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Ex(yield Ox(n),r,s)})),s.promise}(rm(i),t)}function Wx(i,t,e){let n=e.docs.get(t._key),r=new kc(i);return new Dc(i,r,t._key,n,new ui(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){Cr=r})(Nn),On(new ve("firestore",(n,{instanceIdentifier:r,options:s})=>{let o=n.getProvider("app").getImmediate(),c=new Bn(new uh(n.getProvider("auth-internal")),new mh(n.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new F(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rc(d.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),kt(ev,"4.6.4",t),kt(ev,"4.6.4","esm2017")})();var yi=class{constructor(t){return t}},Hy="firestore",um=class{constructor(){return Us(Hy)}};var dm=new tt("angularfire2.firestore-instances");function Gx(i,t){let e=Aa(Hy,i,t);return e&&new yi(e)}function Kx(i){return(t,e)=>{let n=t.runOutsideAngular(()=>i(e));return new yi(n)}}var Yx={provide:um,deps:[[new Qt,dm]]},Qx={provide:yi,useFactory:Gx,deps:[[new Qt,dm],Se]};function z1(i,...t){return kt("angularfire",ni.full,"fst"),Ee([Qx,Yx,{provide:dm,useFactory:Kx(i),multi:!0,deps:[H,Lt,nr,ii,[new Qt,Ks],[new Qt,er],...t]}])}var $1=qt(qy,!0);var q1=qt(Dy,!0);var H1=qt($y,!0);var W1=qt(im,!0);var G1=qt(jy,!0);var K1=qt(By,!0);var Y1=qt(ky,!0);var Q1=qt(Fy,!0);var X1=qt(zy,!0);var Z1=qt(Vy,!0);function Zx(i){return i!=null&&`${i}`!="false"}function Wy(i,t=0){return Jx(i)?Number(i):t}function Jx(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}function xr(i){return Array.isArray(i)?i:[i]}function Tt(i){return i==null?"":typeof i=="string"?i:`${i}px`}function mn(i){return i instanceof xt?i.nativeElement:i}var fm;try{fm=typeof Intl<"u"&&Intl.v8BreakIterator}catch{fm=!1}var wt=(()=>{let t=class t{constructor(n){this._platformId=n,this.isBrowser=this._platformId?Dg(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||fm)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(r){return new(r||t)(R(Xe))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var Dr,Gy=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function aM(){if(Dr)return Dr;if(typeof document!="object"||!document)return Dr=new Set(Gy),Dr;let i=document.createElement("input");return Dr=new Set(Gy.filter(t=>(i.setAttribute("type",t),i.type===t))),Dr}var yo;function tD(){if(yo==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>yo=!0}))}finally{yo=yo||!1}return yo}function kr(i){return tD()?i:!!i.capture}var wi;function Ky(){if(wi==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return wi=!1,wi;if("scrollBehavior"in document.documentElement.style)wi=!0;else{let i=Element.prototype.scrollTo;i?wi=!/\{\s*\[native code\]\s*\}/.test(i.toString()):wi=!1}}return wi}var hm;function eD(){if(hm==null){let i=typeof document<"u"?document.head:null;hm=!!(i&&(i.createShadowRoot||i.attachShadow))}return hm}function Yy(i){if(eD()){let t=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function nD(){let i=typeof document<"u"&&document?document.activeElement:null;for(;i&&i.shadowRoot;){let t=i.shadowRoot.activeElement;if(t===i)break;i=t}return i}function ke(i){return i.composedPath?i.composedPath()[0]:i.target}function wo(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Qy=new Set,Ii,iD=(()=>{let t=class t{constructor(n,r){this._platform=n,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):sD}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&rD(n,this._nonce),this._matchMedia(n)}};t.\u0275fac=function(r){return new(r||t)(R(wt),R(rs,8))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function rD(i,t){if(!Qy.has(i))try{Ii||(Ii=document.createElement("style"),t&&Ii.setAttribute("nonce",t),Ii.setAttribute("type","text/css"),document.head.appendChild(Ii)),Ii.sheet&&(Ii.sheet.insertRule(`@media ${i} {body{ }}`,0),Qy.add(i))}catch(e){console.error(e)}}function sD(i){return{matches:i==="all"||i==="",media:i,addListener:()=>{},removeListener:()=>{}}}var Zy=(()=>{let t=class t{constructor(n,r){this._mediaMatcher=n,this._zone=r,this._queries=new Map,this._destroySubject=new X}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return Xy(xr(n)).some(s=>this._registerQuery(s).mql.matches)}observe(n){let s=Xy(xr(n)).map(c=>this._registerQuery(c).observable),o=Di(s);return o=zo(o.pipe(fe(1)),o.pipe(Ho(1),$o(0))),o.pipe(ot(c=>{let l={matches:!1,breakpoints:{}};return c.forEach(({matches:d,query:f})=>{l.matches=l.matches||d,l.breakpoints[f]=d}),l}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);let r=this._mediaMatcher.matchMedia(n),o={observable:new Gn(c=>{let l=d=>this._zone.run(()=>c.next(d));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(ts(r),ot(({matches:c})=>({query:n,matches:c})),Ye(this._destroySubject)),mql:r};return this._queries.set(n,o),o}};t.\u0275fac=function(r){return new(r||t)(R(iD),R(H))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function Xy(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var gM={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function Jy(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}var oD=(()=>{let t=class t{create(n){return typeof MutationObserver>"u"?null:new MutationObserver(n)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var tw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({providers:[oD]});let i=t;return i})();var ow=" ";function AD(i,t,e){let n=zc(i,t);e=e.trim(),!n.some(r=>r.trim()===e)&&(n.push(e),i.setAttribute(t,n.join(ow)))}function SD(i,t,e){let n=zc(i,t);e=e.trim();let r=n.filter(s=>s!==e);r.length?i.setAttribute(t,r.join(ow)):i.removeAttribute(t)}function zc(i,t){return i.getAttribute(t)?.match(/\S+/g)??[]}var aw="cdk-describedby-message",Uc="cdk-describedby-host",gm=0,LM=(()=>{let t=class t{constructor(n,r){this._platform=r,this._messageRegistry=new Map,this._messagesContainer=null,this._id=`${gm++}`,this._document=n,this._id=L(is)+"-"+gm++}describe(n,r,s){if(!this._canBeDescribed(n,r))return;let o=mm(r,s);typeof r!="string"?(ew(r,this._id),this._messageRegistry.set(o,{messageElement:r,referenceCount:0})):this._messageRegistry.has(o)||this._createMessageElement(r,s),this._isElementDescribedByMessage(n,o)||this._addMessageReference(n,o)}removeDescription(n,r,s){if(!r||!this._isElementNode(n))return;let o=mm(r,s);if(this._isElementDescribedByMessage(n,o)&&this._removeMessageReference(n,o),typeof r=="string"){let c=this._messageRegistry.get(o);c&&c.referenceCount===0&&this._deleteMessageElement(o)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let n=this._document.querySelectorAll(`[${Uc}="${this._id}"]`);for(let r=0;r<n.length;r++)this._removeCdkDescribedByReferenceIds(n[r]),n[r].removeAttribute(Uc);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(n,r){let s=this._document.createElement("div");ew(s,this._id),s.textContent=n,r&&s.setAttribute("role",r),this._createMessagesContainer(),this._messagesContainer.appendChild(s),this._messageRegistry.set(mm(n,r),{messageElement:s,referenceCount:0})}_deleteMessageElement(n){this._messageRegistry.get(n)?.messageElement?.remove(),this._messageRegistry.delete(n)}_createMessagesContainer(){if(this._messagesContainer)return;let n="cdk-describedby-message-container",r=this._document.querySelectorAll(`.${n}[platform="server"]`);for(let o=0;o<r.length;o++)r[o].remove();let s=this._document.createElement("div");s.style.visibility="hidden",s.classList.add(n),s.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&s.setAttribute("platform","server"),this._document.body.appendChild(s),this._messagesContainer=s}_removeCdkDescribedByReferenceIds(n){let r=zc(n,"aria-describedby").filter(s=>s.indexOf(aw)!=0);n.setAttribute("aria-describedby",r.join(" "))}_addMessageReference(n,r){let s=this._messageRegistry.get(r);AD(n,"aria-describedby",s.messageElement.id),n.setAttribute(Uc,this._id),s.referenceCount++}_removeMessageReference(n,r){let s=this._messageRegistry.get(r);s.referenceCount--,SD(n,"aria-describedby",s.messageElement.id),n.removeAttribute(Uc)}_isElementDescribedByMessage(n,r){let s=zc(n,"aria-describedby"),o=this._messageRegistry.get(r),c=o&&o.messageElement.id;return!!c&&s.indexOf(c)!=-1}_canBeDescribed(n,r){if(!this._isElementNode(n))return!1;if(r&&typeof r=="object")return!0;let s=r==null?"":`${r}`.trim(),o=n.getAttribute("aria-label");return s?!o||o.trim()!==s:!1}_isElementNode(n){return n.nodeType===this._document.ELEMENT_NODE}};t.\u0275fac=function(r){return new(r||t)(R(Q),R(wt))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function mm(i,t){return typeof i=="string"?`${t||""}/${i}`:i}function ew(i,t){i.id||(i.id=`${aw}-${t}-${gm++}`)}var bm=class{constructor(t,e){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new X,this._typeaheadSubscription=yn.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=n=>n.disabled,this._pressedLetters=[],this.tabOut=new X,this.change=new X,t instanceof Ml?this._itemChangesSubscription=t.changes.subscribe(n=>this._itemsChanged(n.toArray())):Fl(t)&&(this._effectRef=wg(()=>this._itemsChanged(t()),{injector:e}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(At(e=>this._pressedLetters.push(e)),$o(t),oe(()=>this._pressedLetters.length>0),ot(()=>this._pressedLetters.join(""))).subscribe(e=>{let n=this._getItemsArray();for(let r=1;r<n.length+1;r++){let s=(this._activeItemIndex+r)%n.length,o=n[s];if(!this._skipPredicateFn(o)&&o.getLabel().toUpperCase().trim().indexOf(e)===0){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){let e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){let e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}else return;default:(r||Jy(t,"shiftKey"))&&(t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e)));return}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let e=this._getItemsArray(),n=typeof t=="number"?t:e.indexOf(t),r=e[n];this._activeItem=r??null,this._activeItemIndex=n}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let e=this._getItemsArray();for(let n=1;n<=e.length;n++){let r=(this._activeItemIndex+t*n+e.length)%e.length,s=e[r];if(!this._skipPredicateFn(s)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){let n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(t+=e,!n[t])return;this.setActiveItem(t)}}_getItemsArray(){return Fl(this._items)?this._items():this._items instanceof Ml?this._items.toArray():this._items}_itemsChanged(t){if(this._activeItem){let e=t.indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}}};var nw=class extends bm{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}};var CD=(()=>{let t=class t{constructor(n){this._platform=n}isDisabled(n){return n.hasAttribute("disabled")}isVisible(n){return xD(n)&&getComputedStyle(n).visibility==="visible"}isTabbable(n){if(!this._platform.isBrowser)return!1;let r=RD(FD(n));if(r&&(iw(r)===-1||!this.isVisible(r)))return!1;let s=n.nodeName.toLowerCase(),o=iw(n);return n.hasAttribute("contenteditable")?o!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!MD(n)?!1:s==="audio"?n.hasAttribute("controls")?o!==-1:!1:s==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||n.hasAttribute("controls"):n.tabIndex>=0}isFocusable(n,r){return LD(n)&&!this.isDisabled(n)&&(r?.ignoreVisibility||this.isVisible(n))}};t.\u0275fac=function(r){return new(r||t)(R(wt))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function RD(i){try{return i.frameElement}catch{return null}}function xD(i){return!!(i.offsetWidth||i.offsetHeight||typeof i.getClientRects=="function"&&i.getClientRects().length)}function DD(i){let t=i.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function kD(i){return OD(i)&&i.type=="hidden"}function PD(i){return ND(i)&&i.hasAttribute("href")}function OD(i){return i.nodeName.toLowerCase()=="input"}function ND(i){return i.nodeName.toLowerCase()=="a"}function cw(i){if(!i.hasAttribute("tabindex")||i.tabIndex===void 0)return!1;let t=i.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function iw(i){if(!cw(i))return null;let t=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function MD(i){let t=i.nodeName.toLowerCase(),e=t==="input"&&i.type;return e==="text"||e==="password"||t==="select"||t==="textarea"}function LD(i){return kD(i)?!1:DD(i)||PD(i)||i.hasAttribute("contenteditable")||cw(i)}function FD(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}var _m=class{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,n,r,s=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let n=this._getFirstTabbableElement(e);return n?.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){let e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let n=0;n<e.length;n++){let r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let n=e.length-1;n>=0;n--){let r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(fe(1)).subscribe(t)}},FM=(()=>{let t=class t{constructor(n,r,s){this._checker=n,this._ngZone=r,this._document=s}create(n,r=!1){return new _m(n,this._checker,this._ngZone,this._document,r)}};t.\u0275fac=function(r){return new(r||t)(R(CD),R(H),R(Q))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function vm(i){return i.buttons===0||i.detail===0}function ym(i){let t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var VD=new tt("cdk-input-modality-detector-options"),UD={ignoreKeys:[18,17,224,91,16]},lw=650,Or=kr({passive:!0,capture:!0}),jD=(()=>{let t=class t{get mostRecentModality(){return this._modality.value}constructor(n,r,s,o){this._platform=n,this._mostRecentTarget=null,this._modality=new Mt(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(l=>l===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ke(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<lw||(this._modality.next(vm(c)?"keyboard":"mouse"),this._mostRecentTarget=ke(c))},this._onTouchstart=c=>{if(ym(c)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ke(c)},this._options=O(O({},UD),o),this.modalityDetected=this._modality.pipe(Ho(1)),this.modalityChanged=this.modalityDetected.pipe(xl()),n.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Or),s.addEventListener("mousedown",this._onMousedown,Or),s.addEventListener("touchstart",this._onTouchstart,Or)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Or),document.removeEventListener("mousedown",this._onMousedown,Or),document.removeEventListener("touchstart",this._onTouchstart,Or))}};t.\u0275fac=function(r){return new(r||t)(R(wt),R(H),R(Q),R(VD,8))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var Bc=function(i){return i[i.IMMEDIATE=0]="IMMEDIATE",i[i.EVENTUAL=1]="EVENTUAL",i}(Bc||{}),BD=new tt("cdk-focus-monitor-default-options"),jc=kr({passive:!0,capture:!0}),uw=(()=>{let t=class t{constructor(n,r,s,o,c){this._ngZone=n,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new X,this._rootNodeFocusAndBlurListener=l=>{let d=ke(l);for(let f=d;f;f=f.parentElement)l.type==="focus"?this._onFocus(l,f):this._onBlur(l,f)},this._document=o,this._detectionMode=c?.detectionMode||Bc.IMMEDIATE}monitor(n,r=!1){let s=mn(n);if(!this._platform.isBrowser||s.nodeType!==1)return B();let o=Yy(s)||this._getDocument(),c=this._elementInfo.get(s);if(c)return r&&(c.checkChildren=!0),c.subject;let l={checkChildren:r,subject:new X,rootNode:o};return this._elementInfo.set(s,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(n){let r=mn(n),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(n,r,s){let o=mn(n),c=this._getDocument().activeElement;o===c?this._getClosestElementsInfo(o).forEach(([l,d])=>this._originChanged(l,r,d)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((n,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return this._detectionMode===Bc.EVENTUAL||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,r){n.classList.toggle("cdk-focused",!!r),n.classList.toggle("cdk-touch-focused",r==="touch"),n.classList.toggle("cdk-keyboard-focused",r==="keyboard"),n.classList.toggle("cdk-mouse-focused",r==="mouse"),n.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(n,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=n,this._originFromTouchInteraction=n==="touch"&&r,this._detectionMode===Bc.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?lw:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(n,r){let s=this._elementInfo.get(r),o=ke(n);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(n,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&n.relatedTarget instanceof Node&&r.contains(n.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(n,r){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(r))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;let r=n.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,jc),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,jc)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ye(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(n){let r=n.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,jc),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,jc),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,r,s){this._setClasses(n,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(n){let r=[];return this._elementInfo.forEach((s,o)=>{(o===n||s.checkChildren&&o.contains(n))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(n){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===n||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA"||n.disabled)return!1;let o=n.labels;if(o){for(let c=0;c<o.length;c++)if(o[c].contains(r))return!0}return!1}};t.\u0275fac=function(r){return new(r||t)(R(H),R(wt),R(jD),R(Q,8),R(BD,8))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var Ei=function(i){return i[i.NONE=0]="NONE",i[i.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",i[i.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",i}(Ei||{}),rw="cdk-high-contrast-black-on-white",sw="cdk-high-contrast-white-on-black",pm="cdk-high-contrast-active",wm=(()=>{let t=class t{constructor(n,r){this._platform=n,this._document=r,this._breakpointSubscription=L(Zy).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Ei.NONE;let n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(n):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(n.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Ei.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Ei.BLACK_ON_WHITE}return Ei.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let n=this._document.body.classList;n.remove(pm,rw,sw),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Ei.BLACK_ON_WHITE?n.add(pm,rw):r===Ei.WHITE_ON_BLACK&&n.add(pm,sw)}}};t.\u0275fac=function(r){return new(r||t)(R(wt),R(Q))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),VM=(()=>{let t=class t{constructor(n){n._applyBodyHighContrastModeCssClasses()}};t.\u0275fac=function(r){return new(r||t)(R(wm))},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({imports:[tw]});let i=t;return i})();var $D=new tt("cdk-dir-doc",{providedIn:"root",factory:qD});function qD(){return L(Q)}var HD=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function WD(i){let t=i?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?HD.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var dw=(()=>{let t=class t{constructor(n){if(this.value="ltr",this.change=new pe,n){let r=n.body?n.body.dir:null,s=n.documentElement?n.documentElement.dir:null;this.value=WD(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};t.\u0275fac=function(r){return new(r||t)(R($D,8))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var zn=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({});let i=t;return i})();function YD(){return!0}var QD=new tt("mat-sanity-checks",{providedIn:"root",factory:YD}),Ti=(()=>{let t=class t{constructor(n,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,n._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return wo()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[n]}};t.\u0275fac=function(r){return new(r||t)(R(wm),R(QD,8),R(Q))},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({imports:[zn,zn]});let i=t;return i})();var hw=class{constructor(t,e,n,r,s){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=n,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,n=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=n?.isErrorState(r,e)??!1;s!==t&&(this.errorState=s,this._stateChanges.next())}};var pL=(()=>{let t=class t{isErrorState(n,r){return!!(n&&n.invalid&&(n.touched||r&&r.submitted))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var gL=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({imports:[Ti,Ti]});let i=t;return i})(),we=function(i){return i[i.FADING_IN=0]="FADING_IN",i[i.VISIBLE=1]="VISIBLE",i[i.FADING_OUT=2]="FADING_OUT",i[i.HIDDEN=3]="HIDDEN",i}(we||{}),Am=class{constructor(t,e,n,r=!1){this._renderer=t,this.element=e,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=we.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},fw=kr({passive:!0,capture:!0}),Sm=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=ke(t);e&&this._events.get(t.type)?.forEach((n,r)=>{(r===e||r.contains(e))&&n.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,n,r){let s=this._events.get(e);if(s){let o=s.get(n);o?o.add(r):s.set(n,new Set([r]))}else this._events.set(e,new Map([[n,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,fw)})}removeHandler(t,e,n){let r=this._events.get(t);if(!r)return;let s=r.get(e);s&&(s.delete(n),s.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,fw)))}},mw={enterDuration:225,exitDuration:150},XD=800,pw=kr({passive:!0,capture:!0}),gw=["mousedown","touchstart"],bw=["mouseup","mouseleave","touchend","touchcancel"],Io=class Io{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=mn(n))}fadeInRipple(t,e,n={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=O(O({},mw),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let o=n.radius||ZD(t,e,r),c=t-r.left,l=e-r.top,d=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${c-o}px`,f.style.top=`${l-o}px`,f.style.height=`${o*2}px`,f.style.width=`${o*2}px`,n.color!=null&&(f.style.backgroundColor=n.color),f.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(f);let p=window.getComputedStyle(f),v=p.transitionProperty,S=p.transitionDuration,D=v==="none"||S==="0s"||S==="0s, 0s"||r.width===0&&r.height===0,P=new Am(this,f,n,D);f.style.transform="scale3d(1, 1, 1)",P.state=we.FADING_IN,n.persistent||(this._mostRecentTransientRipple=P);let k=null;return!D&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let $=()=>this._finishRippleTransition(P),Y=()=>this._destroyRipple(P);f.addEventListener("transitionend",$),f.addEventListener("transitioncancel",Y),k={onTransitionEnd:$,onTransitionCancel:Y}}),this._activeRipples.set(P,k),(D||!d)&&this._finishRippleTransition(P),P}fadeOutRipple(t){if(t.state===we.FADING_OUT||t.state===we.HIDDEN)return;let e=t.element,n=O(O({},mw),t.config.animation);e.style.transitionDuration=`${n.exitDuration}ms`,e.style.opacity="0",t.state=we.FADING_OUT,(t._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=mn(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,gw.forEach(n=>{Io._eventManager.addHandler(this._ngZone,n,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{bw.forEach(e=>{this._triggerElement.addEventListener(e,this,pw)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===we.FADING_IN?this._startFadeOutTransition(t):t.state===we.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:n}=t.config;t.state=we.VISIBLE,!n&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=we.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){let e=vm(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+XD;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!ym(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===we.VISIBLE||t.config.terminateOnPointerUp&&t.state===we.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(gw.forEach(e=>Io._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&bw.forEach(e=>t.removeEventListener(e,this,pw)))}};Io._eventManager=new Sm;var Cm=Io;function ZD(i,t,e){let n=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+r*r)}var ww=new tt("mat-ripple-global-options"),JD=(()=>{let t=class t{get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}constructor(n,r,s,o,c){this._elementRef=n,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Cm(this,r,n,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:O(O(O({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,r=0,s){return typeof n=="number"?this._rippleRenderer.fadeInRipple(n,r,O(O({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,O(O({},this.rippleConfig),n))}};t.\u0275fac=function(r){return new(r||t)(rt(xt),rt(H),rt(wt),rt(ww,8),rt(Kn,8))},t.\u0275dir=Xt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){r&2&&ji("mat-ripple-unbounded",s.unbounded)},inputs:{color:[gt.None,"matRippleColor","color"],unbounded:[gt.None,"matRippleUnbounded","unbounded"],centered:[gt.None,"matRippleCentered","centered"],radius:[gt.None,"matRippleRadius","radius"],animation:[gt.None,"matRippleAnimation","animation"],disabled:[gt.None,"matRippleDisabled","disabled"],trigger:[gt.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let i=t;return i})(),Iw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({imports:[Ti,Ti]});let i=t;return i})();var _w={capture:!0},vw=["focus","click","mouseenter","touchstart"],Em="mat-ripple-loader-uninitialized",Tm="mat-ripple-loader-class-name",yw="mat-ripple-loader-centered",$c="mat-ripple-loader-disabled",Ew=(()=>{let t=class t{constructor(){this._document=L(Q,{optional:!0}),this._animationMode=L(Kn,{optional:!0}),this._globalRippleOptions=L(ww,{optional:!0}),this._platform=L(wt),this._ngZone=L(H),this._hosts=new Map,this._onInteraction=n=>{if(!(n.target instanceof HTMLElement))return;let s=n.target.closest(`[${Em}]`);s&&this._createRipple(s)},this._ngZone.runOutsideAngular(()=>{for(let n of vw)this._document?.addEventListener(n,this._onInteraction,_w)})}ngOnDestroy(){let n=this._hosts.keys();for(let r of n)this.destroyRipple(r);for(let r of vw)this._document?.removeEventListener(r,this._onInteraction,_w)}configureRipple(n,r){n.setAttribute(Em,""),(r.className||!n.hasAttribute(Tm))&&n.setAttribute(Tm,r.className||""),r.centered&&n.setAttribute(yw,""),r.disabled&&n.setAttribute($c,"")}getRipple(n){return this._hosts.get(n)||this._createRipple(n)}setDisabled(n,r){let s=this._hosts.get(n);if(s){s.disabled=r;return}r?n.setAttribute($c,""):n.removeAttribute($c)}_createRipple(n){if(!this._document)return;let r=this._hosts.get(n);if(r)return r;n.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",n.getAttribute(Tm)),n.append(s);let o=new JD(new xt(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=n,o.centered=n.hasAttribute(yw),o.disabled=n.hasAttribute($c),this.attachRipple(n,o),o}attachRipple(n,r){n.removeAttribute(Em),this._hosts.set(n,r)}destroyRipple(n){let r=this._hosts.get(n);r&&(r.ngOnDestroy(),this._hosts.delete(n))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var tk=["mat-button",""],ek=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],nk=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var ik=new tt("MAT_BUTTON_CONFIG");var rk=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],sk=(()=>{let t=class t{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(n){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,n)}get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=n,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(n){this._disabled=n,this._updateRippleDisabled()}constructor(n,r,s,o){this._elementRef=n,this._platform=r,this._ngZone=s,this._animationMode=o,this._focusMonitor=L(uw),this._rippleLoader=L(Ew),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let c=L(ik,{optional:!0}),l=n.nativeElement,d=l.classList;this.disabledInteractive=c?.disabledInteractive??!1,this._rippleLoader?.configureRipple(l,{className:"mat-mdc-button-ripple"});for(let{attribute:f,mdcClasses:p}of rk)l.hasAttribute(f)&&d.add(...p)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(n="program",r){n?this._focusMonitor.focusVia(this._elementRef.nativeElement,n,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};t.\u0275fac=function(r){Go()},t.\u0275dir=Xt({type:t,inputs:{color:"color",disableRipple:[gt.HasDecoratorInputTransform,"disableRipple","disableRipple",be],disabled:[gt.HasDecoratorInputTransform,"disabled","disabled",be],ariaDisabled:[gt.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",be],disabledInteractive:[gt.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",be]},features:[Je]});let i=t;return i})();var kL=(()=>{let t=class t extends sk{constructor(n,r,s,o){super(n,r,s,o)}};t.\u0275fac=function(r){return new(r||t)(rt(xt),rt(wt),rt(H),rt(Kn,8))},t.\u0275cmp=Qe({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,s){r&2&&(Te("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),Ae(s.color?"mat-"+s.color:""),ji("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._animationMode==="NoopAnimations")("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[os,tn],attrs:tk,ngContentSelectors:nk,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,s){r&1&&(Ko(ek),ge(0,"span",0),Bi(1),Zt(2,"span",1),Bi(3,1),ae(),Bi(4,2),ge(5,"span",2)(6,"span",3)),r&2&&ji("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let i=t;return i})();var PL=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({imports:[Ti,Iw,Ti]});let i=t;return i})();var ML=(()=>{let t=class t{constructor(n,r,s){this.app=n,this.auth=r,this.fireStore=s,this.isLoggedInSubject=new Mt(null),this.isWhiteBoardComponentLoadedSubject=new Mt(!1),this.isNewBoardSubject=new X,this.auth.onAuthStateChanged(o=>{this.isLoggedInSubject.next(o)},o=>{console.log(o)})}getFirebaseApp(){return this.app}getAuth(){return this.auth}isLoggedIn(){return this.isLoggedInSubject.asObservable()}getFirestore(){return this.fireStore}setHasWhiteBoardLoaded(n){this.isWhiteBoardComponentLoadedSubject.next(n)}hasWhiteBoardLoaded$(){return this.isWhiteBoardComponentLoadedSubject.asObservable()}setIsNewBoard(n){this.isNewBoardSubject.next(n)}isNewBoard(){return this.isNewBoardSubject.asObservable()}};t.\u0275fac=function(r){return new(r||t)(R(Se),R(ai),R(yi))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var Eo=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Rm=class extends Eo{constructor(t,e,n,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=s}},qc=class extends Eo{constructor(t,e,n,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},xm=class extends Eo{constructor(t){super(),this.element=t instanceof xt?t.nativeElement:t}},Hc=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof Rm)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof qc)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof xm)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Wc=class extends Hc{constructor(t,e,n,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let c=o.element;c.parentNode;let l=this._document.createComment("dom-portal");c.parentNode.insertBefore(l,c),this.outletElement.appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=s}attachComponentPortal(t){let n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||Lt.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);r!==-1&&e.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var qL=(()=>{let t=class t extends Hc{constructor(n,r,s){super(),this._componentFactoryResolver=n,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new pe,this.attachDomPortal=o=>{this._document;let c=o.element;c.parentNode;let l=this._document.createComment("dom-portal");o.setAttachedHost(this),c.parentNode.insertBefore(l,c),this._getRootNode().appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=s}get portal(){return this._attachedPortal}set portal(n){this.hasAttached()&&!n&&!this._isInitialized||(this.hasAttached()&&super.detach(),n&&super.attach(n),this._attachedPortal=n||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(n){n.setAttachedHost(this);let r=n.viewContainerRef!=null?n.viewContainerRef:this._viewContainerRef,o=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component),c=r.createComponent(o,r.length,n.injector||r.injector,n.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=n,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(n){n.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=n,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let n=this._viewContainerRef.element.nativeElement;return n.nodeType===n.ELEMENT_NODE?n:n.parentNode}};t.\u0275fac=function(r){return new(r||t)(rt(Li),rt(Fi),rt(Q))},t.\u0275dir=Xt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[gt.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[os]});let i=t;return i})();var Aw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({});let i=t;return i})();var ok=20,Dm=(()=>{let t=class t{constructor(n,r,s){this._ngZone=n,this._platform=r,this._scrolled=new X,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){let r=this.scrollContainers.get(n);r&&(r.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=ok){return this._platform.isBrowser?new Gn(r=>{this._globalSubscription||this._addGlobalListener();let s=n>0?this._scrolled.pipe(Cl(n)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):B()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((n,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(n,r){let s=this.getAncestorScrollContainers(n);return this.scrolled(r).pipe(oe(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(n){let r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,n)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(n,r){let s=mn(r),o=n.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let n=this._getWindow();return Gp(n.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};t.\u0275fac=function(r){return new(r||t)(R(H),R(wt),R(Q,8))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var ak=20,Gc=(()=>{let t=class t{constructor(n,r,s){this._platform=n,this._change=new X,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(n.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let n=this._getWindow();n.removeEventListener("resize",this._changeListener),n.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){let n=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+s,right:n.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let n=this._document,r=this._getWindow(),s=n.documentElement,o=s.getBoundingClientRect(),c=-o.top||n.body.scrollTop||r.scrollY||s.scrollTop||0,l=-o.left||n.body.scrollLeft||r.scrollX||s.scrollLeft||0;return{top:c,left:l}}change(n=ak){return n>0?this._change.pipe(Cl(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}};t.\u0275fac=function(r){return new(r||t)(R(wt),R(H),R(Q,8))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var Sw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({});let i=t;return i})(),km=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({imports:[zn,Sw,zn,Sw]});let i=t;return i})();var Cw=Ky(),Pm=class{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Tt(-this._previousScrollPosition.left),t.style.top=Tt(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,n=t.style,r=e.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Cw&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Cw&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}};var Om=class{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(oe(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Kc=class{enable(){}disable(){}attach(){}};function Nm(i,t){return t.some(e=>{let n=i.bottom<e.top,r=i.top>e.bottom,s=i.right<e.left,o=i.left>e.right;return n||r||s||o})}function Rw(i,t){return t.some(e=>{let n=i.top<e.top,r=i.bottom>e.bottom,s=i.left<e.left,o=i.right>e.right;return n||r||s||o})}var Mm=class{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();Nm(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},lk=(()=>{let t=class t{constructor(n,r,s,o){this._scrollDispatcher=n,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new Kc,this.close=c=>new Om(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new Pm(this._viewportRuler,this._document),this.reposition=c=>new Mm(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=o}};t.\u0275fac=function(r){return new(r||t)(R(Dm),R(Gc),R(H),R(Q))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),Lm=class{constructor(t){if(this.scrollStrategy=new Kc,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let e=Object.keys(t);for(let n of e)t[n]!==void 0&&(this[n]=t[n])}}};var Fm=class{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var Ow=(()=>{let t=class t{constructor(n){this._attachedOverlays=[],this._document=n}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){let r=this._attachedOverlays.indexOf(n);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};t.\u0275fac=function(r){return new(r||t)(R(Q))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),uk=(()=>{let t=class t extends Ow{constructor(n,r){super(n),this._ngZone=r,this._keydownListener=s=>{let o=this._attachedOverlays;for(let c=o.length-1;c>-1;c--)if(o[c]._keydownEvents.observers.length>0){let l=o[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(s)):l.next(s);break}}}add(n){super.add(n),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};t.\u0275fac=function(r){return new(r||t)(R(Q),R(H,8))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),dk=(()=>{let t=class t extends Ow{constructor(n,r,s){super(n),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=ke(o)},this._clickListener=o=>{let c=ke(o),l=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;let d=this._attachedOverlays.slice();for(let f=d.length-1;f>-1;f--){let p=d[f];if(p._outsidePointerEvents.observers.length<1||!p.hasAttached())continue;if(p.overlayElement.contains(c)||p.overlayElement.contains(l))break;let v=p._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>v.next(o)):v.next(o)}}}add(n){if(super.add(n),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let n=this._document.body;n.removeEventListener("pointerdown",this._pointerDownListener,!0),n.removeEventListener("click",this._clickListener,!0),n.removeEventListener("auxclick",this._clickListener,!0),n.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(n.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(n){n.addEventListener("pointerdown",this._pointerDownListener,!0),n.addEventListener("click",this._clickListener,!0),n.addEventListener("auxclick",this._clickListener,!0),n.addEventListener("contextmenu",this._clickListener,!0)}};t.\u0275fac=function(r){return new(r||t)(R(Q),R(wt),R(H,8))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),Nw=(()=>{let t=class t{constructor(n,r){this._platform=r,this._document=n}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n="cdk-overlay-container";if(this._platform.isBrowser||wo()){let s=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let r=this._document.createElement("div");r.classList.add(n),wo()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};t.\u0275fac=function(r){return new(r||t)(R(Q),R(wt))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),Vm=class{constructor(t,e,n,r,s,o,c,l,d,f=!1){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=c,this._location=l,this._outsideClickDispatcher=d,this._animationsDisabled=f,this._backdropElement=null,this._backdropClick=new X,this._attachments=new X,this._detachments=new X,this._locationChanges=yn.EMPTY,this._backdropClickHandler=p=>this._backdropClick.next(p),this._backdropTransitionendHandler=p=>{this._disposeBackdrop(p.target)},this._keydownEvents=new X,this._outsidePointerEvents=new X,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(fe(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=O(O({},this._config),t),this._updateElementSize()}setDirection(t){this._config=ut(O({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=Tt(this._config.width),t.height=Tt(this._config.height),t.minWidth=Tt(this._config.minWidth),t.minHeight=Tt(this._config.minHeight),t.maxWidth=Tt(this._config.maxWidth),t.maxHeight=Tt(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,n){let r=xr(e||[]).filter(s=>!!s);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let t=this._ngZone.onStable.pipe(Ye(Kp(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},xw="cdk-overlay-connected-position-bounding-box",hk=/([A-Za-z%]+)$/,Um=class{get positions(){return this._preferredPositions}constructor(t,e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new X,this._resizeSubscription=yn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(xw),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[],o;for(let c of this._preferredPositions){let l=this._getOriginPoint(t,r,c),d=this._getOverlayPoint(l,e,c),f=this._getOverlayFit(d,e,n,c);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,l);return}if(this._canFitWithFlexibleDimensions(f,d,n)){s.push({position:c,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,c)});continue}(!o||o.overlayFit.visibleArea<f.visibleArea)&&(o={overlayFit:f,overlayPoint:d,originPoint:l,position:c,overlayRect:e})}if(s.length){let c=null,l=-1;for(let d of s){let f=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);f>l&&(l=f,c=d)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ai(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(xw),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let r;if(n.originX=="center")r=t.left+t.width/2;else{let o=this._isRtl()?t.right:t.left,c=this._isRtl()?t.left:t.right;r=n.originX=="start"?o:c}e.left<0&&(r-=e.left);let s;return n.originY=="center"?s=t.top+t.height/2:s=n.originY=="top"?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,n){let r;n.overlayX=="center"?r=-e.width/2:n.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let s;return n.overlayY=="center"?s=-e.height/2:s=n.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,n,r){let s=kw(e),{x:o,y:c}=t,l=this._getOffset(r,"x"),d=this._getOffset(r,"y");l&&(o+=l),d&&(c+=d);let f=0-o,p=o+s.width-n.width,v=0-c,S=c+s.height-n.height,D=this._subtractOverflows(s.width,f,p),P=this._subtractOverflows(s.height,v,S),k=D*P;return{visibleArea:k,isCompletelyWithinViewport:s.width*s.height===k,fitsInViewportVertically:P===s.height,fitsInViewportHorizontally:D==s.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){let r=n.bottom-e.y,s=n.right-e.x,o=Dw(this._overlayRef.getConfig().minHeight),c=Dw(this._overlayRef.getConfig().minWidth),l=t.fitsInViewportVertically||o!=null&&o<=r,d=t.fitsInViewportHorizontally||c!=null&&c<=s;return l&&d}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=kw(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),c=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-n.top-t.y,0),d=Math.max(s.left-n.left-t.x,0),f=0,p=0;return r.width<=s.width?f=d||-o:f=t.x<this._viewportMargin?s.left-n.left-t.x:0,r.height<=s.height?p=l||-c:p=t.y<this._viewportMargin?s.top-n.top-t.y:0,this._previousPushAmount={x:f,y:p},{x:t.x+f,y:t.y+p}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!fk(this._lastScrollVisibility,n)){let r=new Fm(t,n);this._positionChanges.next(r)}this._lastScrollVisibility=n}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,r=t.overlayY;t.overlayX==="center"?n="center":this._isRtl()?n=t.overlayX==="start"?"right":"left":n=t.overlayX==="start"?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){let n=this._viewportRect,r=this._isRtl(),s,o,c;if(e.overlayY==="top")o=t.y,s=n.height-o+this._viewportMargin;else if(e.overlayY==="bottom")c=n.height-t.y+this._viewportMargin*2,s=n.height-c+this._viewportMargin;else{let S=Math.min(n.bottom-t.y+n.top,t.y),D=this._lastBoundingBoxSize.height;s=S*2,o=t.y-S,s>D&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-D/2)}let l=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,d=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,f,p,v;if(d)v=n.width-t.x+this._viewportMargin*2,f=t.x-this._viewportMargin;else if(l)p=t.x,f=n.right-t.x;else{let S=Math.min(n.right-t.x+n.left,t.x),D=this._lastBoundingBoxSize.width;f=S*2,p=t.x-S,f>D&&!this._isInitialRender&&!this._growAfterOpen&&(p=t.x-D/2)}return{top:o,left:p,bottom:c,right:v,width:f,height:s}}_setBoundingBoxStyles(t,e){let n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Tt(n.height),r.top=Tt(n.top),r.bottom=Tt(n.bottom),r.width=Tt(n.width),r.left=Tt(n.left),r.right=Tt(n.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=Tt(s)),o&&(r.maxWidth=Tt(o))}this._lastBoundingBoxSize=n,Ai(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Ai(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ai(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let f=this._viewportRuler.getViewportScrollPosition();Ai(n,this._getExactOverlayY(e,t,f)),Ai(n,this._getExactOverlayX(e,t,f))}else n.position="static";let c="",l=this._getOffset(e,"x"),d=this._getOffset(e,"y");l&&(c+=`translateX(${l}px) `),d&&(c+=`translateY(${d}px)`),n.transform=c.trim(),o.maxHeight&&(r?n.maxHeight=Tt(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=Tt(o.maxWidth):s&&(n.maxWidth="")),Ai(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),t.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=Tt(s.y);return r}_getExactOverlayX(t,e,n){let r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n));let o;if(this._isRtl()?o=t.overlayX==="end"?"left":"right":o=t.overlayX==="end"?"right":"left",o==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(s.x+this._overlayRect.width)}px`}else r.left=Tt(s.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Rw(t,n),isOriginOutsideView:Nm(t,n),isOverlayClipped:Rw(e,n),isOverlayOutsideView:Nm(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&xr(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof xt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}};function Ai(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function Dw(i){if(typeof i!="number"&&i!=null){let[t,e]=i.split(hk);return!e||e==="px"?parseFloat(t):null}return i||null}function kw(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}function fk(i,t){return i===t?!0:i.isOriginClipped===t.isOriginClipped&&i.isOriginOutsideView===t.isOriginOutsideView&&i.isOverlayClipped===t.isOverlayClipped&&i.isOverlayOutsideView===t.isOverlayOutsideView}var Pw="cdk-global-overlay-wrapper",jm=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Pw),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:c}=n,l=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),d=(s==="100%"||s==="100vh")&&(!c||c==="100%"||c==="100vh"),f=this._xPosition,p=this._xOffset,v=this._overlayRef.getConfig().direction==="rtl",S="",D="",P="";l?P="flex-start":f==="center"?(P="center",v?D=p:S=p):v?f==="left"||f==="end"?(P="flex-end",S=p):(f==="right"||f==="start")&&(P="flex-start",D=p):f==="left"||f==="start"?(P="flex-start",S=p):(f==="right"||f==="end")&&(P="flex-end",D=p),t.position=this._cssPosition,t.marginLeft=l?"0":S,t.marginTop=d?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":D,e.justifyContent=P,e.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(Pw),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},mk=(()=>{let t=class t{constructor(n,r,s,o){this._viewportRuler=n,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new jm}flexibleConnectedTo(n){return new Um(n,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};t.\u0275fac=function(r){return new(r||t)(R(Gc),R(Q),R(wt),R(Nw))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),pk=0,Bm=(()=>{let t=class t{constructor(n,r,s,o,c,l,d,f,p,v,S,D){this.scrollStrategies=n,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=c,this._injector=l,this._ngZone=d,this._document=f,this._directionality=p,this._location=v,this._outsideClickDispatcher=S,this._animationsModuleType=D}create(n){let r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),c=new Lm(n);return c.direction=c.direction||this._directionality.value,new Vm(o,r,s,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(n){let r=this._document.createElement("div");return r.id=`cdk-overlay-${pk++}`,r.classList.add("cdk-overlay-pane"),n.appendChild(r),r}_createHostElement(){let n=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalOutlet(n){return this._appRef||(this._appRef=this._injector.get(en)),new Wc(n,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};t.\u0275fac=function(r){return new(r||t)(R(lk),R(Nw),R(Li),R(mk),R(uk),R(Lt),R(H),R(Q),R(dw),R(Yn),R(dk),R(Kn,8))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var gk=new tt("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let i=L(Bm);return()=>i.scrollStrategies.reposition()}});function bk(i){return()=>i.scrollStrategies.reposition()}var _k={provide:gk,deps:[Bm],useFactory:bk},yF=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({providers:[Bm,_k],imports:[zn,Aw,km,km]});let i=t;return i})();export{Ng as a,jk as b,nu as c,Ki as d,Ne as e,Cn as f,ws as g,pu as h,xn as i,u0 as j,nn as k,oP as l,aP as m,cP as n,Vb as o,XE as p,IP as q,hO as r,fO as s,GA as t,aN as u,cN as v,lN as w,z1 as x,$1 as y,q1 as z,H1 as A,W1 as B,G1 as C,K1 as D,Y1 as E,Q1 as F,X1 as G,Z1 as H,wt as I,aM as J,kr as K,nD as L,Jy as M,Zx as N,Wy as O,mn as P,tw as Q,Zy as R,gM as S,LM as T,nw as U,CD as V,FM as W,vm as X,ym as Y,uw as Z,VM as _,dw as $,Ti as aa,hw as ba,pL as ca,gL as da,JD as ea,Iw as fa,Rm as ga,qc as ha,Hc as ia,qL as ja,Aw as ka,Dm as la,Sw as ma,Lm as na,Nw as oa,Vm as pa,Bm as qa,yF as ra,kL as sa,PL as ta,ML as ua};
